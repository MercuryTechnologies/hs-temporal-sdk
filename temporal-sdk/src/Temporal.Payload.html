<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ConstraintKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DefaultSignatures #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE DeriveLift #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE ImpredicativeTypes #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE InstanceSigs #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE PolyKinds #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators #-}</span><span>
</span><span id="line-17"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="annot"><span class="hs-comment">{- |
Module: Temporal.Payload
Description: Payloads are the binary data that is sent to and from the Temporal Server.

A Payload represents binary data such as input and output from Activities and Workflows. Payloads contain metadata that describe the binary data, such as its data type or other arbitrary values for use by custom encoders/converters.

When processed through the SDK, the default Data Converter serializes your data/value to a Payload before sending it to the Temporal Server. The default Data Converter processes supported type values to Payloads, and you can create a custom Payload Converter to convert your custom object types.

You can additionally apply custom codecs (such as for encryption or compression) on your Payloads to wrap them into new encoded Payloads.
-}</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Temporal.Payload.html"><span class="hs-identifier">Temporal.Payload</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier">Payload</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#Codec"><span class="hs-identifier">Codec</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#JSON"><span class="hs-identifier">JSON</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#Null"><span class="hs-identifier">Null</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#Binary"><span class="hs-identifier">Binary</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#Protobuf"><span class="hs-identifier">Protobuf</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#Zlib"><span class="hs-identifier">Zlib</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#zlib"><span class="hs-identifier">zlib</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#applyPayloads"><span class="hs-identifier">applyPayloads</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#Around"><span class="hs-identifier">Around</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#mkPayloadProcessor"><span class="hs-identifier">mkPayloadProcessor</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#addPayloadProcessor"><span class="hs-identifier">addPayloadProcessor</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#PayloadProcessor"><span class="hs-identifier">PayloadProcessor</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#ApplyPayloads"><span class="hs-identifier">ApplyPayloads</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier">ArgsOf</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#ResultOf"><span class="hs-identifier">ResultOf</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator">(:-&gt;:)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#convertToProtoPayload"><span class="hs-identifier">convertToProtoPayload</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#convertFromProtoPayload"><span class="hs-identifier">convertFromProtoPayload</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Vararg manipulation</span></span><span>
</span><span id="line-51"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#VarArgs"><span class="hs-identifier">VarArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#hoistResult"><span class="hs-identifier">hoistResult</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#foldMapArgs"><span class="hs-identifier">foldMapArgs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#foldMArgs"><span class="hs-identifier">foldMArgs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#foldMArgs_"><span class="hs-identifier">foldMArgs_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#withArgs"><span class="hs-identifier">withArgs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#UnencodedPayload"><span class="hs-identifier">UnencodedPayload</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#processorEncodePayloads"><span class="hs-identifier">processorEncodePayloads</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#processorDecodePayloads"><span class="hs-identifier">processorDecodePayloads</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#AllArgs"><span class="hs-identifier">AllArgs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#GatherArgs"><span class="hs-identifier">GatherArgs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#GatherArgsOf"><span class="hs-identifier">GatherArgsOf</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#FunctionSupportsCodec"><span class="hs-identifier">FunctionSupportsCodec</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#FunctionSupportsCodec%27"><span class="hs-identifier">FunctionSupportsCodec'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#ValueError"><span class="hs-identifier">ValueError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Codec.Compression.Zlib.Internal</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Format</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Exception</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Exception</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">throwIO</span></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.IO.Class</span></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">decode</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">encode</span></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Aeson</span></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ByteString</span></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Base64</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">decodeBase64</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">encodeBase64</span></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Char8</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Lazy</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BL</span></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Kind</span></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ProtoLens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Message</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">defMessage</span></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ProtoLens.Encoding</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">decodeMessage</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">encodeMessage</span></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Proxy</span></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">encodeUtf8</span></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Typeable</span></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">V</span></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector.Fusion.Bundle</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">B</span></span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector.Generic</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">VG</span></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.TypeLits</span></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Language.Haskell.TH.Syntax</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Lift</span></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Lens.Family2</span></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Proto.Temporal.Api.Common.V1.Message</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Proto</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Payload</span></span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Proto.Temporal.Api.Common.V1.Message_Fields</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Proto</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">data'</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">metadata</span></span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="annot"><span class="hs-comment">-- | Used to denote that a payload either failed to encode or decode</span></span><span>
</span><span id="line-102"></span><span class="hs-keyword">data</span><span> </span><span id="ValueError"><span class="annot"><a href="Temporal.Payload.html#ValueError"><span class="hs-identifier hs-var">ValueError</span></a></span></span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ValueError"><span class="annot"><a href="Temporal.Payload.html#ValueError"><span class="hs-identifier hs-var">ValueError</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680160765"><span id="local-6989586621680160770"><span class="annot"><span class="annottext">ValueError -&gt; ValueError -&gt; Bool
(ValueError -&gt; ValueError -&gt; Bool)
-&gt; (ValueError -&gt; ValueError -&gt; Bool) -&gt; Eq ValueError
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: ValueError -&gt; ValueError -&gt; Bool
== :: ValueError -&gt; ValueError -&gt; Bool
$c/= :: ValueError -&gt; ValueError -&gt; Bool
/= :: ValueError -&gt; ValueError -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680160776"><span id="local-6989586621680160783"><span id="local-6989586621680160787"><span class="annot"><span class="annottext">Int -&gt; ValueError -&gt; ShowS
[ValueError] -&gt; ShowS
ValueError -&gt; String
(Int -&gt; ValueError -&gt; ShowS)
-&gt; (ValueError -&gt; String)
-&gt; ([ValueError] -&gt; ShowS)
-&gt; Show ValueError
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; ValueError -&gt; ShowS
showsPrec :: Int -&gt; ValueError -&gt; ShowS
$cshow :: ValueError -&gt; String
show :: ValueError -&gt; String
$cshowList :: [ValueError] -&gt; ShowS
showList :: [ValueError] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680160797"><span id="local-6989586621680160801"><span id="local-6989586621680160804"><span id="local-6989586621680160807"><span class="annot"><span class="hs-identifier hs-type">Exception</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#ValueError"><span class="hs-identifier hs-type">ValueError</span></a></span></span></span></span></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="annot"><span class="hs-comment">{- * Parameter serialization

We want to be able to serialize &amp; deserialize the parameters of a function using an arbitrary serialization code.
We do this by gathering the order of the parameters as a type-level list, then fold over the type level list to
build a function with the same parameters that outputs a list of serialized params.

To deserialize, we do the inverse&#8211; we progressively apply the args of the function by consuming serialized params
as we go. If there are not enough or too many params, we fail.
-}</span></span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="annot"><span class="hs-comment">-- | We want to be able to serialize &amp; deserialize the parameters of a function using an arbitrary serialization format.</span></span><span>
</span><span id="line-122"></span><span class="hs-keyword">class</span><span> </span><span id="Codec"><span class="annot"><a href="Temporal.Payload.html#Codec"><span class="hs-identifier hs-var">Codec</span></a></span></span><span> </span><span id="local-6989586621680160416"><span class="annot"><a href="#local-6989586621680160416"><span class="hs-identifier hs-type">fmt</span></a></span></span><span> </span><span id="local-6989586621680160415"><span class="annot"><a href="#local-6989586621680160415"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-123"></span><span>  </span><span class="hs-comment">-- | Similar to a content-type header, this is a string that identifies the format of the payload.</span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-comment">-- it will be set on the 'encoding' metadata field of the payload.</span><span>
</span><span id="line-125"></span><span>  </span><span id="encoding"><span class="annot"><a href="Temporal.Payload.html#encoding"><span class="hs-identifier hs-type">encoding</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680160416"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621680160415"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span>  </span><span id="messageType"><span class="annot"><a href="Temporal.Payload.html#messageType"><span class="hs-identifier hs-type">messageType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680160416"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160415"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-129"></span><span>  </span><span class="hs-keyword">default</span><span> </span><span id="messageType"><span class="annot"><a href="Temporal.Payload.html#messageType"><span class="hs-identifier hs-type">messageType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621680160415"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160416"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160415"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-130"></span><span>  </span><span id="local-6989586621680160813"><span class="annot"><a href="Temporal.Payload.html#messageType"><span class="hs-identifier hs-var hs-var">messageType</span></a></span><span> </span><span class="annot"><span class="annottext">fmt
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; ByteString
</span><span class="hs-identifier hs-var">C.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; ByteString) -&gt; String -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TypeRep -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">(TypeRep -&gt; String) -&gt; TypeRep -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proxy a -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160415"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-131"></span><span>  </span><span id="encode"><span class="annot"><a href="Temporal.Payload.html#encode"><span class="hs-identifier hs-type">encode</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680160416"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160415"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span>
</span><span id="line-132"></span><span>  </span><span id="decode"><span class="annot"><a href="Temporal.Payload.html#decode"><span class="hs-identifier hs-type">decode</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680160416"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621680160415"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span id="local-6989586621680160429"><span id="local-6989586621680160430"><span class="annot"><a href="Temporal.Payload.html#insertStandardMetadata"><span class="hs-identifier hs-type">insertStandardMetadata</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Temporal.Payload.html#Codec"><span class="hs-identifier hs-type">Codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160429"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160430"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160429"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160430"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span></span></span><span>
</span><span id="line-136"></span><span id="insertStandardMetadata"><span class="annot"><span class="annottext">insertStandardMetadata :: forall fmt a. Codec fmt a =&gt; fmt -&gt; a -&gt; Payload -&gt; Payload
</span><a href="Temporal.Payload.html#insertStandardMetadata"><span class="hs-identifier hs-var hs-var">insertStandardMetadata</span></a></span></span><span> </span><span id="local-6989586621680160838"><span class="annot"><span class="annottext">fmt
</span><a href="#local-6989586621680160838"><span class="hs-identifier hs-var">fmt</span></a></span></span><span> </span><span id="local-6989586621680160839"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680160839"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span> </span><span id="local-6989586621680160841"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680160841"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621680160842"><span class="annot"><span class="annottext">Map Text ByteString
</span><a href="#local-6989586621680160842"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-137"></span><span>  </span><span class="annot"><span class="annottext">ByteString -&gt; Map Text ByteString -&gt; Payload
</span><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-var">Payload</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680160841"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Text ByteString -&gt; Payload) -&gt; Map Text ByteString -&gt; Payload
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-138"></span><span>    </span><span class="annot"><span class="annottext">Map Text ByteString
</span><a href="#local-6989586621680160842"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-139"></span><span>      </span><span class="annot"><span class="annottext">Map Text ByteString -&gt; Map Text ByteString -&gt; Map Text ByteString
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(Text, ByteString)] -&gt; Map Text ByteString
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span>
</span><span id="line-140"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;encoding&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fmt -&gt; Proxy a -&gt; ByteString
forall fmt a. Codec fmt a =&gt; fmt -&gt; Proxy a -&gt; ByteString
</span><a href="Temporal.Payload.html#encoding"><span class="hs-identifier hs-var">encoding</span></a></span><span> </span><span class="annot"><span class="annottext">fmt
</span><a href="#local-6989586621680160838"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">(Proxy a -&gt; ByteString) -&gt; Proxy a -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Proxy a
forall a. a -&gt; Proxy a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680160839"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;messageType&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fmt -&gt; a -&gt; ByteString
forall fmt a. Codec fmt a =&gt; fmt -&gt; a -&gt; ByteString
</span><a href="Temporal.Payload.html#messageType"><span class="hs-identifier hs-var">messageType</span></a></span><span> </span><span class="annot"><span class="annottext">fmt
</span><a href="#local-6989586621680160838"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680160839"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span class="hs-keyword">data</span><span> </span><span id="JSON"><span class="annot"><a href="Temporal.Payload.html#JSON"><span class="hs-identifier hs-var">JSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="JSON"><span class="annot"><a href="Temporal.Payload.html#JSON"><span class="hs-identifier hs-var">JSON</span></a></span></span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680160846"><span id="local-6989586621680160848"><span class="annot"><span class="annottext">JSON -&gt; JSON -&gt; Bool
(JSON -&gt; JSON -&gt; Bool) -&gt; (JSON -&gt; JSON -&gt; Bool) -&gt; Eq JSON
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: JSON -&gt; JSON -&gt; Bool
== :: JSON -&gt; JSON -&gt; Bool
$c/= :: JSON -&gt; JSON -&gt; Bool
/= :: JSON -&gt; JSON -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680160852"><span id="local-6989586621680160854"><span id="local-6989586621680160858"><span class="annot"><span class="annottext">Int -&gt; JSON -&gt; ShowS
[JSON] -&gt; ShowS
JSON -&gt; String
(Int -&gt; JSON -&gt; ShowS)
-&gt; (JSON -&gt; String) -&gt; ([JSON] -&gt; ShowS) -&gt; Show JSON
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; JSON -&gt; ShowS
showsPrec :: Int -&gt; JSON -&gt; ShowS
$cshow :: JSON -&gt; String
show :: JSON -&gt; String
$cshowList :: [JSON] -&gt; ShowS
showList :: [JSON] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680160861"><span id="local-6989586621680160865"><span class="annot"><span class="annottext">(forall (m :: * -&gt; *). Quote m =&gt; JSON -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *). Quote m =&gt; JSON -&gt; Code m JSON)
-&gt; Lift JSON
forall t.
(forall (m :: * -&gt; *). Quote m =&gt; t -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *). Quote m =&gt; t -&gt; Code m t) -&gt; Lift t
forall (m :: * -&gt; *). Quote m =&gt; JSON -&gt; m Exp
forall (m :: * -&gt; *). Quote m =&gt; JSON -&gt; Code m JSON
$clift :: forall (m :: * -&gt; *). Quote m =&gt; JSON -&gt; m Exp
lift :: forall (m :: * -&gt; *). Quote m =&gt; JSON -&gt; m Exp
$cliftTyped :: forall (m :: * -&gt; *). Quote m =&gt; JSON -&gt; Code m JSON
liftTyped :: forall (m :: * -&gt; *). Quote m =&gt; JSON -&gt; Code m JSON
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Lift</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680160452"><span id="local-6989586621680160875"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621680160452"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621680160452"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621680160452"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Payload.html#Codec"><span class="hs-identifier hs-type">Codec</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#JSON"><span class="hs-identifier hs-type">JSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160452"><span class="hs-identifier hs-type">a</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-150"></span><span>  </span><span id="local-6989586621680160884"><span class="annot"><span class="annottext">encoding :: JSON -&gt; Proxy a -&gt; ByteString
</span><a href="Temporal.Payload.html#encoding"><span class="hs-identifier hs-var hs-var hs-var">encoding</span></a></span></span><span> </span><span class="annot"><span class="annottext">JSON
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Proxy a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;json/plain&quot;</span></span><span>
</span><span id="line-151"></span><span>  </span><span id="local-6989586621680160892"><span class="annot"><span class="annottext">encode :: JSON -&gt; a -&gt; IO Payload
</span><a href="Temporal.Payload.html#encode"><span class="hs-identifier hs-var hs-var hs-var">encode</span></a></span></span><span> </span><span id="local-6989586621680160893"><span class="annot"><span class="annottext">JSON
</span><a href="#local-6989586621680160893"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680160894"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680160894"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Payload -&gt; IO Payload
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Payload -&gt; IO Payload) -&gt; Payload -&gt; IO Payload
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">JSON -&gt; a -&gt; Payload -&gt; Payload
forall fmt a. Codec fmt a =&gt; fmt -&gt; a -&gt; Payload -&gt; Payload
</span><a href="Temporal.Payload.html#insertStandardMetadata"><span class="hs-identifier hs-var">insertStandardMetadata</span></a></span><span> </span><span class="annot"><span class="annottext">JSON
</span><a href="#local-6989586621680160893"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680160894"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">(Payload -&gt; Payload) -&gt; Payload -&gt; Payload
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Map Text ByteString -&gt; Payload
</span><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-var">Payload</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LazyByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">BL.toStrict</span></span><span> </span><span class="annot"><span class="annottext">(LazyByteString -&gt; ByteString) -&gt; LazyByteString -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; LazyByteString
forall a. ToJSON a =&gt; a -&gt; LazyByteString
</span><span class="hs-identifier hs-var">Aeson.encode</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680160894"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Text ByteString
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-152"></span><span>  </span><span id="local-6989586621680160898"><span class="annot"><span class="annottext">decode :: JSON -&gt; Payload -&gt; IO (Either String a)
</span><a href="Temporal.Payload.html#decode"><span class="hs-identifier hs-var hs-var hs-var">decode</span></a></span></span><span> </span><span class="annot"><span class="annottext">JSON
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either String a -&gt; IO (Either String a)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Either String a -&gt; IO (Either String a))
-&gt; (Payload -&gt; Either String a) -&gt; Payload -&gt; IO (Either String a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either String a
forall a. FromJSON a =&gt; ByteString -&gt; Either String a
</span><span class="hs-identifier hs-var">Aeson.eitherDecodeStrict'</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Either String a)
-&gt; (Payload -&gt; ByteString) -&gt; Payload -&gt; Either String a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Payload -&gt; ByteString
</span><a href="Temporal.Payload.html#payloadData"><span class="hs-identifier hs-var">payloadData</span></a></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="hs-keyword">data</span><span> </span><span id="Null"><span class="annot"><a href="Temporal.Payload.html#Null"><span class="hs-identifier hs-var">Null</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Null"><span class="annot"><a href="Temporal.Payload.html#Null"><span class="hs-identifier hs-var">Null</span></a></span></span><span>
</span><span id="line-156"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680160904"><span id="local-6989586621680160906"><span class="annot"><span class="annottext">Null -&gt; Null -&gt; Bool
(Null -&gt; Null -&gt; Bool) -&gt; (Null -&gt; Null -&gt; Bool) -&gt; Eq Null
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Null -&gt; Null -&gt; Bool
== :: Null -&gt; Null -&gt; Bool
$c/= :: Null -&gt; Null -&gt; Bool
/= :: Null -&gt; Null -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680160910"><span id="local-6989586621680160912"><span id="local-6989586621680160916"><span class="annot"><span class="annottext">Int -&gt; Null -&gt; ShowS
[Null] -&gt; ShowS
Null -&gt; String
(Int -&gt; Null -&gt; ShowS)
-&gt; (Null -&gt; String) -&gt; ([Null] -&gt; ShowS) -&gt; Show Null
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Null -&gt; ShowS
showsPrec :: Int -&gt; Null -&gt; ShowS
$cshow :: Null -&gt; String
show :: Null -&gt; String
$cshowList :: [Null] -&gt; ShowS
showList :: [Null] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680160919"><span id="local-6989586621680160923"><span class="annot"><span class="annottext">(forall (m :: * -&gt; *). Quote m =&gt; Null -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *). Quote m =&gt; Null -&gt; Code m Null)
-&gt; Lift Null
forall t.
(forall (m :: * -&gt; *). Quote m =&gt; t -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *). Quote m =&gt; t -&gt; Code m t) -&gt; Lift t
forall (m :: * -&gt; *). Quote m =&gt; Null -&gt; m Exp
forall (m :: * -&gt; *). Quote m =&gt; Null -&gt; Code m Null
$clift :: forall (m :: * -&gt; *). Quote m =&gt; Null -&gt; m Exp
lift :: forall (m :: * -&gt; *). Quote m =&gt; Null -&gt; m Exp
$cliftTyped :: forall (m :: * -&gt; *). Quote m =&gt; Null -&gt; Code m Null
liftTyped :: forall (m :: * -&gt; *). Quote m =&gt; Null -&gt; Code m Null
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Lift</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680160929"><span class="annot"><a href="Temporal.Payload.html#Codec"><span class="hs-identifier hs-type">Codec</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Null"><span class="hs-identifier hs-type">Null</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-160"></span><span>  </span><span id="local-6989586621680160936"><span class="annot"><span class="annottext">encoding :: Null -&gt; Proxy () -&gt; ByteString
</span><a href="Temporal.Payload.html#encoding"><span class="hs-identifier hs-var hs-var hs-var">encoding</span></a></span></span><span> </span><span class="annot"><span class="annottext">Null
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Proxy ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;binary/null&quot;</span></span><span>
</span><span id="line-161"></span><span>  </span><span id="local-6989586621680160943"><span class="annot"><span class="annottext">encode :: Null -&gt; () -&gt; IO Payload
</span><a href="Temporal.Payload.html#encode"><span class="hs-identifier hs-var hs-var hs-var">encode</span></a></span></span><span> </span><span id="local-6989586621680160944"><span class="annot"><span class="annottext">Null
</span><a href="#local-6989586621680160944"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680160945"><span class="annot"><span class="annottext">()
</span><a href="#local-6989586621680160945"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Payload -&gt; IO Payload
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Payload -&gt; IO Payload) -&gt; Payload -&gt; IO Payload
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Null -&gt; () -&gt; Payload -&gt; Payload
forall fmt a. Codec fmt a =&gt; fmt -&gt; a -&gt; Payload -&gt; Payload
</span><a href="Temporal.Payload.html#insertStandardMetadata"><span class="hs-identifier hs-var">insertStandardMetadata</span></a></span><span> </span><span class="annot"><span class="annottext">Null
</span><a href="#local-6989586621680160944"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">()
</span><a href="#local-6989586621680160945"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">(Payload -&gt; Payload) -&gt; Payload -&gt; Payload
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Map Text ByteString -&gt; Payload
</span><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-var">Payload</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">Map Text ByteString
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-162"></span><span>  </span><span id="local-6989586621680160947"><span class="annot"><span class="annottext">decode :: Null -&gt; Payload -&gt; IO (Either String ())
</span><a href="Temporal.Payload.html#decode"><span class="hs-identifier hs-var hs-var hs-var">decode</span></a></span></span><span> </span><span class="annot"><span class="annottext">Null
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Payload
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either String () -&gt; IO (Either String ())
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Either String () -&gt; IO (Either String ()))
-&gt; Either String () -&gt; IO (Either String ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">() -&gt; Either String ()
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="annot"><span class="hs-comment">{- | Direct binary serialization.

A generalized instance like the one for JSON is not provided because
there are many possible binary serialization formats and libraries.

You can provide a simple version of this instance for your own codebase
using something like the cereal package:

&gt; import Data.Serialize (Serialize)
&gt; import qualified Data.Serialize as Serialize
&gt; instance {\-# OVERLAPPABLE #-\} (Typeable a, Serialize a) =&gt; Codec Binary a where
&gt;   encodingType _ _ = &quot;binary/plain&quot;
&gt;   encodePayload _ x = Serialize.encode x
&gt;   decode _ = Serialize.decode . inputPayloadData
-}</span></span><span>
</span><span id="line-180"></span><span class="hs-keyword">data</span><span> </span><span id="Binary"><span class="annot"><a href="Temporal.Payload.html#Binary"><span class="hs-identifier hs-var">Binary</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Binary"><span class="annot"><a href="Temporal.Payload.html#Binary"><span class="hs-identifier hs-var">Binary</span></a></span></span><span>
</span><span id="line-181"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680160950"><span id="local-6989586621680160952"><span class="annot"><span class="annottext">Binary -&gt; Binary -&gt; Bool
(Binary -&gt; Binary -&gt; Bool)
-&gt; (Binary -&gt; Binary -&gt; Bool) -&gt; Eq Binary
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Binary -&gt; Binary -&gt; Bool
== :: Binary -&gt; Binary -&gt; Bool
$c/= :: Binary -&gt; Binary -&gt; Bool
/= :: Binary -&gt; Binary -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680160956"><span id="local-6989586621680160958"><span id="local-6989586621680160962"><span class="annot"><span class="annottext">Int -&gt; Binary -&gt; ShowS
[Binary] -&gt; ShowS
Binary -&gt; String
(Int -&gt; Binary -&gt; ShowS)
-&gt; (Binary -&gt; String) -&gt; ([Binary] -&gt; ShowS) -&gt; Show Binary
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Binary -&gt; ShowS
showsPrec :: Int -&gt; Binary -&gt; ShowS
$cshow :: Binary -&gt; String
show :: Binary -&gt; String
$cshowList :: [Binary] -&gt; ShowS
showList :: [Binary] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680160965"><span id="local-6989586621680160969"><span class="annot"><span class="annottext">(forall (m :: * -&gt; *). Quote m =&gt; Binary -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *). Quote m =&gt; Binary -&gt; Code m Binary)
-&gt; Lift Binary
forall t.
(forall (m :: * -&gt; *). Quote m =&gt; t -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *). Quote m =&gt; t -&gt; Code m t) -&gt; Lift t
forall (m :: * -&gt; *). Quote m =&gt; Binary -&gt; m Exp
forall (m :: * -&gt; *). Quote m =&gt; Binary -&gt; Code m Binary
$clift :: forall (m :: * -&gt; *). Quote m =&gt; Binary -&gt; m Exp
lift :: forall (m :: * -&gt; *). Quote m =&gt; Binary -&gt; m Exp
$cliftTyped :: forall (m :: * -&gt; *). Quote m =&gt; Binary -&gt; Code m Binary
liftTyped :: forall (m :: * -&gt; *). Quote m =&gt; Binary -&gt; Code m Binary
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Lift</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680160975"><span class="annot"><a href="Temporal.Payload.html#Codec"><span class="hs-identifier hs-type">Codec</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-185"></span><span>  </span><span id="local-6989586621680160982"><span class="annot"><span class="annottext">encoding :: Binary -&gt; Proxy ByteString -&gt; ByteString
</span><a href="Temporal.Payload.html#encoding"><span class="hs-identifier hs-var hs-var hs-var">encoding</span></a></span></span><span> </span><span class="annot"><span class="annottext">Binary
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Proxy ByteString
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;binary/plain&quot;</span></span><span>
</span><span id="line-186"></span><span>  </span><span id="local-6989586621680160987"><span class="annot"><span class="annottext">encode :: Binary -&gt; ByteString -&gt; IO Payload
</span><a href="Temporal.Payload.html#encode"><span class="hs-identifier hs-var hs-var hs-var">encode</span></a></span></span><span> </span><span id="local-6989586621680160988"><span class="annot"><span class="annottext">Binary
</span><a href="#local-6989586621680160988"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680160989"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680160989"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Payload -&gt; IO Payload
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Payload -&gt; IO Payload) -&gt; Payload -&gt; IO Payload
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Binary -&gt; ByteString -&gt; Payload -&gt; Payload
forall fmt a. Codec fmt a =&gt; fmt -&gt; a -&gt; Payload -&gt; Payload
</span><a href="Temporal.Payload.html#insertStandardMetadata"><span class="hs-identifier hs-var">insertStandardMetadata</span></a></span><span> </span><span class="annot"><span class="annottext">Binary
</span><a href="#local-6989586621680160988"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680160989"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">(Payload -&gt; Payload) -&gt; Payload -&gt; Payload
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Map Text ByteString -&gt; Payload
</span><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-var">Payload</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680160989"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text ByteString
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-187"></span><span>  </span><span id="local-6989586621680160991"><span class="annot"><span class="annottext">decode :: Binary -&gt; Payload -&gt; IO (Either String ByteString)
</span><a href="Temporal.Payload.html#decode"><span class="hs-identifier hs-var hs-var hs-var">decode</span></a></span></span><span> </span><span class="annot"><span class="annottext">Binary
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either String ByteString -&gt; IO (Either String ByteString)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Either String ByteString -&gt; IO (Either String ByteString))
-&gt; (Payload -&gt; Either String ByteString)
-&gt; Payload
-&gt; IO (Either String ByteString)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either String ByteString
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Either String ByteString)
-&gt; (Payload -&gt; ByteString) -&gt; Payload -&gt; Either String ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Payload -&gt; ByteString
</span><a href="Temporal.Payload.html#payloadData"><span class="hs-identifier hs-var">payloadData</span></a></span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span class="hs-keyword">data</span><span> </span><span id="Protobuf"><span class="annot"><a href="Temporal.Payload.html#Protobuf"><span class="hs-identifier hs-var">Protobuf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Protobuf"><span class="annot"><a href="Temporal.Payload.html#Protobuf"><span class="hs-identifier hs-var">Protobuf</span></a></span></span><span>
</span><span id="line-191"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680160994"><span id="local-6989586621680160996"><span class="annot"><span class="annottext">Protobuf -&gt; Protobuf -&gt; Bool
(Protobuf -&gt; Protobuf -&gt; Bool)
-&gt; (Protobuf -&gt; Protobuf -&gt; Bool) -&gt; Eq Protobuf
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Protobuf -&gt; Protobuf -&gt; Bool
== :: Protobuf -&gt; Protobuf -&gt; Bool
$c/= :: Protobuf -&gt; Protobuf -&gt; Bool
/= :: Protobuf -&gt; Protobuf -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680161000"><span id="local-6989586621680161002"><span id="local-6989586621680161006"><span class="annot"><span class="annottext">Int -&gt; Protobuf -&gt; ShowS
[Protobuf] -&gt; ShowS
Protobuf -&gt; String
(Int -&gt; Protobuf -&gt; ShowS)
-&gt; (Protobuf -&gt; String) -&gt; ([Protobuf] -&gt; ShowS) -&gt; Show Protobuf
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Protobuf -&gt; ShowS
showsPrec :: Int -&gt; Protobuf -&gt; ShowS
$cshow :: Protobuf -&gt; String
show :: Protobuf -&gt; String
$cshowList :: [Protobuf] -&gt; ShowS
showList :: [Protobuf] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680161009"><span id="local-6989586621680161013"><span class="annot"><span class="annottext">(forall (m :: * -&gt; *). Quote m =&gt; Protobuf -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *). Quote m =&gt; Protobuf -&gt; Code m Protobuf)
-&gt; Lift Protobuf
forall t.
(forall (m :: * -&gt; *). Quote m =&gt; t -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *). Quote m =&gt; t -&gt; Code m t) -&gt; Lift t
forall (m :: * -&gt; *). Quote m =&gt; Protobuf -&gt; m Exp
forall (m :: * -&gt; *). Quote m =&gt; Protobuf -&gt; Code m Protobuf
$clift :: forall (m :: * -&gt; *). Quote m =&gt; Protobuf -&gt; m Exp
lift :: forall (m :: * -&gt; *). Quote m =&gt; Protobuf -&gt; m Exp
$cliftTyped :: forall (m :: * -&gt; *). Quote m =&gt; Protobuf -&gt; Code m Protobuf
liftTyped :: forall (m :: * -&gt; *). Quote m =&gt; Protobuf -&gt; Code m Protobuf
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Lift</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680160474"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Message</span></span><span> </span><span class="annot"><a href="#local-6989586621680160474"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Payload.html#Codec"><span class="hs-identifier hs-type">Codec</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Protobuf"><span class="hs-identifier hs-type">Protobuf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160474"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-195"></span><span>  </span><span id="local-6989586621680161025"><span class="annot"><span class="annottext">messageType :: Protobuf -&gt; a -&gt; ByteString
</span><a href="Temporal.Payload.html#messageType"><span class="hs-identifier hs-var hs-var hs-var">messageType</span></a></span></span><span> </span><span class="annot"><span class="annottext">Protobuf
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680161026"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680161026"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ByteString) -&gt; Text -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proxy a -&gt; Text
forall msg. Message msg =&gt; Proxy msg -&gt; Text
</span><span class="hs-identifier hs-var">messageName</span></span><span> </span><span class="annot"><span class="annottext">(Proxy a -&gt; Text) -&gt; Proxy a -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Proxy a
forall a. a -&gt; Proxy a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680161026"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-196"></span><span>  </span><span id="local-6989586621680161029"><span class="annot"><span class="annottext">encoding :: Protobuf -&gt; Proxy a -&gt; ByteString
</span><a href="Temporal.Payload.html#encoding"><span class="hs-identifier hs-var hs-var hs-var">encoding</span></a></span></span><span> </span><span class="annot"><span class="annottext">Protobuf
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Proxy a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;binary/protobuf&quot;</span></span><span>
</span><span id="line-197"></span><span>  </span><span id="local-6989586621680161035"><span class="annot"><span class="annottext">encode :: Protobuf -&gt; a -&gt; IO Payload
</span><a href="Temporal.Payload.html#encode"><span class="hs-identifier hs-var hs-var hs-var">encode</span></a></span></span><span> </span><span id="local-6989586621680161036"><span class="annot"><span class="annottext">Protobuf
</span><a href="#local-6989586621680161036"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680161037"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680161037"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Payload -&gt; IO Payload
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Payload -&gt; IO Payload) -&gt; Payload -&gt; IO Payload
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Protobuf -&gt; a -&gt; Payload -&gt; Payload
forall fmt a. Codec fmt a =&gt; fmt -&gt; a -&gt; Payload -&gt; Payload
</span><a href="Temporal.Payload.html#insertStandardMetadata"><span class="hs-identifier hs-var">insertStandardMetadata</span></a></span><span> </span><span class="annot"><span class="annottext">Protobuf
</span><a href="#local-6989586621680161036"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680161037"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">(Payload -&gt; Payload) -&gt; Payload -&gt; Payload
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Map Text ByteString -&gt; Payload
</span><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-var">Payload</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; ByteString
forall msg. Message msg =&gt; msg -&gt; ByteString
</span><span class="hs-identifier hs-var">encodeMessage</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680161037"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Text ByteString
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-198"></span><span>  </span><span id="local-6989586621680161040"><span class="annot"><span class="annottext">decode :: Protobuf -&gt; Payload -&gt; IO (Either String a)
</span><a href="Temporal.Payload.html#decode"><span class="hs-identifier hs-var hs-var hs-var">decode</span></a></span></span><span> </span><span class="annot"><span class="annottext">Protobuf
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either String a -&gt; IO (Either String a)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Either String a -&gt; IO (Either String a))
-&gt; (Payload -&gt; Either String a) -&gt; Payload -&gt; IO (Either String a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either String a
forall msg. Message msg =&gt; ByteString -&gt; Either String msg
</span><span class="hs-identifier hs-var">decodeMessage</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Either String a)
-&gt; (Payload -&gt; ByteString) -&gt; Payload -&gt; Either String a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Payload -&gt; ByteString
</span><a href="Temporal.Payload.html#payloadData"><span class="hs-identifier hs-var">payloadData</span></a></span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span class="hs-keyword">data</span><span> </span><span id="Zlib"><span class="annot"><a href="Temporal.Payload.html#Zlib"><span class="hs-identifier hs-var">Zlib</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Zlib"><span class="annot"><a href="Temporal.Payload.html#Zlib"><span class="hs-identifier hs-var">Zlib</span></a></span></span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="minimumEncodingSize"><span class="annot"><span class="annottext">Zlib -&gt; Int
</span><a href="Temporal.Payload.html#minimumEncodingSize"><span class="hs-identifier hs-var hs-var">minimumEncodingSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-203"></span><span>  </span><span class="hs-comment">-- ^ Skip compression when the size of the response body is</span><span>
</span><span id="line-204"></span><span>  </span><span class="hs-comment">-- below this amount of bytes (default: 860.)</span><span>
</span><span id="line-205"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-206"></span><span>  </span><span class="hs-comment">-- /Setting this option to less than 150 will actually increase/</span><span>
</span><span id="line-207"></span><span>  </span><span class="hs-comment">-- /the size of outgoing data if its original size is less than 150 bytes/.</span><span>
</span><span id="line-208"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="compressParams"><span class="annot"><span class="annottext">Zlib -&gt; CompressParams
</span><a href="Temporal.Payload.html#compressParams"><span class="hs-identifier hs-var hs-var">compressParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CompressParams</span></span><span>
</span><span id="line-209"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="decompressParams"><span class="annot"><span class="annottext">Zlib -&gt; DecompressParams
</span><a href="Temporal.Payload.html#decompressParams"><span class="hs-identifier hs-var hs-var">decompressParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecompressParams</span></span><span>
</span><span id="line-210"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="annot"><a href="Temporal.Payload.html#zlib"><span class="hs-identifier hs-type">zlib</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Temporal.Payload.html#Zlib"><span class="hs-identifier hs-type">Zlib</span></a></span><span>
</span><span id="line-214"></span><span id="zlib"><span class="annot"><span class="annottext">zlib :: Zlib
</span><a href="Temporal.Payload.html#zlib"><span class="hs-identifier hs-var hs-var">zlib</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; CompressParams -&gt; DecompressParams -&gt; Zlib
</span><a href="Temporal.Payload.html#Zlib"><span class="hs-identifier hs-var">Zlib</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">860</span></span><span> </span><span class="annot"><span class="annottext">CompressParams
</span><span class="hs-identifier hs-var">defaultCompressParams</span></span><span> </span><span class="annot"><span class="annottext">DecompressParams
</span><span class="hs-identifier hs-var">defaultDecompressParams</span></span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680161049"><span class="annot"><a href="Temporal.Payload.html#Codec"><span class="hs-identifier hs-type">Codec</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Zlib"><span class="hs-identifier hs-type">Zlib</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-218"></span><span>  </span><span id="local-6989586621680161056"><span class="annot"><span class="annottext">encoding :: Zlib -&gt; Proxy Payload -&gt; ByteString
</span><a href="Temporal.Payload.html#encoding"><span class="hs-identifier hs-var hs-var hs-var">encoding</span></a></span></span><span> </span><span class="annot"><span class="annottext">Zlib
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Proxy Payload
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;binary/zlib&quot;</span></span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span>  </span><span class="hs-comment">-- TODO, if we keep the original compression size, we can allocate the right size buffer for the decompressed data.</span><span>
</span><span id="line-222"></span><span>  </span><span id="local-6989586621680161065"><span class="annot"><span class="annottext">encode :: Zlib -&gt; Payload -&gt; IO Payload
</span><a href="Temporal.Payload.html#encode"><span class="hs-identifier hs-var hs-var hs-var">encode</span></a></span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Zlib"><span class="hs-identifier hs-type">Zlib</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621680161066"><span id="local-6989586621680161067"><span id="local-6989586621680161068"><span class="annot"><span class="annottext">Int
DecompressParams
CompressParams
minimumEncodingSize :: Zlib -&gt; Int
compressParams :: Zlib -&gt; CompressParams
decompressParams :: Zlib -&gt; DecompressParams
minimumEncodingSize :: Int
compressParams :: CompressParams
decompressParams :: DecompressParams
</span><a href="Temporal.Payload.html#minimumEncodingSize"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621680161069"><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161069"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-223"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Int
</span><span class="hs-identifier hs-var">BS.length</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680161071"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680161066"><span class="hs-identifier hs-var">minimumEncodingSize</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Int
</span><span class="hs-identifier hs-var">BS.length</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680161073"><span class="hs-identifier hs-var">compressed</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Int
</span><span class="hs-identifier hs-var">BS.length</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680161071"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-224"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Payload -&gt; IO Payload
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Payload -&gt; IO Payload) -&gt; Payload -&gt; IO Payload
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Map Text ByteString -&gt; Payload
</span><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-var">Payload</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680161073"><span class="hs-identifier hs-var">compressed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ByteString -&gt; Map Text ByteString
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;encoding&quot;</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;binary/zlib&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Payload -&gt; IO Payload
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161069"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-226"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-227"></span><span>      </span><span id="local-6989586621680161071"><span class="annot"><span class="annottext">msg :: ByteString
</span><a href="#local-6989586621680161071"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Payload -&gt; ByteString
forall msg. Message msg =&gt; msg -&gt; ByteString
</span><span class="hs-identifier hs-var">encodeMessage</span></span><span> </span><span class="annot"><span class="annottext">(Payload -&gt; ByteString) -&gt; Payload -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Payload -&gt; Payload
</span><a href="Temporal.Payload.html#convertToProtoPayload"><span class="hs-identifier hs-var">convertToProtoPayload</span></a></span><span> </span><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161069"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-228"></span><span>      </span><span id="local-6989586621680161073"><span class="annot"><span class="annottext">compressed :: ByteString
</span><a href="#local-6989586621680161073"><span class="hs-identifier hs-var hs-var">compressed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">BL.toStrict</span></span><span> </span><span class="annot"><span class="annottext">(LazyByteString -&gt; ByteString) -&gt; LazyByteString -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Format -&gt; CompressParams -&gt; LazyByteString -&gt; LazyByteString
</span><span class="hs-identifier hs-var">compress</span></span><span> </span><span class="annot"><span class="annottext">Format
</span><span class="hs-identifier hs-var">zlibFormat</span></span><span> </span><span class="annot"><span class="annottext">CompressParams
</span><a href="#local-6989586621680161067"><span class="hs-identifier hs-var">compressParams</span></a></span><span> </span><span class="annot"><span class="annottext">(LazyByteString -&gt; LazyByteString)
-&gt; LazyByteString -&gt; LazyByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; LazyByteString
</span><span class="hs-identifier hs-var">BL.fromStrict</span></span><span> </span><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161069"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">payloadData</span><span>
</span><span id="line-229"></span><span>  </span><span id="local-6989586621680161091"><span class="annot"><span class="annottext">decode :: Zlib -&gt; Payload -&gt; IO (Either String Payload)
</span><a href="Temporal.Payload.html#decode"><span class="hs-identifier hs-var hs-var hs-var">decode</span></a></span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Zlib"><span class="hs-identifier hs-type">Zlib</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621680161092"><span id="local-6989586621680161093"><span id="local-6989586621680161094"><span class="annot"><span class="annottext">Int
DecompressParams
CompressParams
minimumEncodingSize :: Zlib -&gt; Int
compressParams :: Zlib -&gt; CompressParams
decompressParams :: Zlib -&gt; DecompressParams
minimumEncodingSize :: Int
compressParams :: CompressParams
decompressParams :: DecompressParams
</span><a href="Temporal.Payload.html#minimumEncodingSize"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621680161095"><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161095"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161095"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">payloadMetadata</span><span> </span><span class="annot"><span class="annottext">Map Text ByteString -&gt; Text -&gt; Maybe ByteString
forall k a. Ord k =&gt; Map k a -&gt; k -&gt; Maybe a
</span><span class="hs-operator hs-var">Map.!?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;encoding&quot;</span></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-230"></span><span>    </span><span class="hs-comment">-- TODO, use `decompressIO` instead of `decompress`  so we can return the error in the Left case.</span><span>
</span><span id="line-231"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;binary/zlib&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-232"></span><span>      </span><span class="annot"><span class="annottext">Either String Payload -&gt; IO (Either String Payload)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Either String Payload -&gt; IO (Either String Payload))
-&gt; Either String Payload -&gt; IO (Either String Payload)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-233"></span><span>        </span><span class="annot"><span class="annottext">(Payload -&gt; Payload)
-&gt; Either String Payload -&gt; Either String Payload
forall a b. (a -&gt; b) -&gt; Either String a -&gt; Either String b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Payload -&gt; Payload
</span><a href="Temporal.Payload.html#convertFromProtoPayload"><span class="hs-identifier hs-var">convertFromProtoPayload</span></a></span><span> </span><span class="annot"><span class="annottext">(Either String Payload -&gt; Either String Payload)
-&gt; Either String Payload -&gt; Either String Payload
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-234"></span><span>          </span><span class="annot"><span class="annottext">ByteString -&gt; Either String Payload
forall msg. Message msg =&gt; ByteString -&gt; Either String msg
</span><span class="hs-identifier hs-var">decodeMessage</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Either String Payload)
-&gt; ByteString -&gt; Either String Payload
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-235"></span><span>            </span><span class="annot"><span class="annottext">LazyByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">BS.toStrict</span></span><span> </span><span class="annot"><span class="annottext">(LazyByteString -&gt; ByteString) -&gt; LazyByteString -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-236"></span><span>              </span><span class="annot"><span class="annottext">Format -&gt; DecompressParams -&gt; LazyByteString -&gt; LazyByteString
</span><span class="hs-identifier hs-var">decompress</span></span><span> </span><span class="annot"><span class="annottext">Format
</span><span class="hs-identifier hs-var">zlibFormat</span></span><span> </span><span class="annot"><span class="annottext">DecompressParams
</span><a href="#local-6989586621680161094"><span class="hs-identifier hs-var">decompressParams</span></a></span><span> </span><span class="annot"><span class="annottext">(LazyByteString -&gt; LazyByteString)
-&gt; LazyByteString -&gt; LazyByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-237"></span><span>                </span><span class="annot"><span class="annottext">ByteString -&gt; LazyByteString
</span><span class="hs-identifier hs-var">BL.fromStrict</span></span><span> </span><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161095"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">payloadData</span><span>
</span><span id="line-238"></span><span>    </span><span class="annot"><span class="annottext">Maybe ByteString
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either String Payload -&gt; IO (Either String Payload)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Either String Payload -&gt; IO (Either String Payload))
-&gt; Either String Payload -&gt; IO (Either String Payload)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Payload -&gt; Either String Payload
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161095"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span class="annot"><span class="hs-comment">{- | A codec that post-processes the payload after encoding and pre-processes before decoding.

Combining multiple 'PayloadProcessor's will apply them in the order that they are added.
For example, if you want to compress and then encrypt, you would add the compression processor
first, then the encryption processor.
-}</span></span><span>
</span><span id="line-247"></span><span class="hs-keyword">data</span><span> </span><span id="PayloadProcessor"><span class="annot"><a href="Temporal.Payload.html#PayloadProcessor"><span class="hs-identifier hs-var">PayloadProcessor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PayloadProcessor"><span class="annot"><a href="Temporal.Payload.html#PayloadProcessor"><span class="hs-identifier hs-var">PayloadProcessor</span></a></span></span><span>
</span><span id="line-248"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="payloadProcessorEncode"><span class="annot"><span class="annottext">PayloadProcessor -&gt; Payload -&gt; IO Payload
</span><a href="Temporal.Payload.html#payloadProcessorEncode"><span class="hs-identifier hs-var hs-var">payloadProcessorEncode</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span>
</span><span id="line-249"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="payloadProcessorDecode"><span class="annot"><span class="annottext">PayloadProcessor -&gt; Payload -&gt; IO (Either String Payload)
</span><a href="Temporal.Payload.html#payloadProcessorDecode"><span class="hs-identifier hs-var hs-var">payloadProcessorDecode</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="hs-comment">-- TODO, need to make sure to unit test this before using it. The ordering guarantees have me confused.</span><span>
</span><span id="line-254"></span><span class="hs-comment">-- instance Semigroup PayloadProcessor where</span><span>
</span><span id="line-255"></span><span class="hs-comment">--   PayloadProcessor e1 d1 &lt;&gt; PayloadProcessor e2 d2 = PayloadProcessor</span><span>
</span><span id="line-256"></span><span class="hs-comment">--     { PayloadProcessorEncode =</span><span>
</span><span id="line-257"></span><span class="hs-comment">--     , PayloadProcessorDecode =</span><span>
</span><span id="line-258"></span><span class="hs-comment">--     }</span><span>
</span><span id="line-259"></span><span class="hs-comment">-- instance Monoid PayloadProcessor where</span><span>
</span><span id="line-260"></span><span class="hs-comment">--   mempty = PayloadProcessor pure (pure . Right)</span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span id="local-6989586621680160492"><span class="annot"><a href="Temporal.Payload.html#mkPayloadProcessor"><span class="hs-identifier hs-type">mkPayloadProcessor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Temporal.Payload.html#Codec"><span class="hs-identifier hs-type">Codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160492"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160492"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Payload.html#PayloadProcessor"><span class="hs-identifier hs-type">PayloadProcessor</span></a></span></span><span>
</span><span id="line-263"></span><span id="mkPayloadProcessor"><span class="annot"><span class="annottext">mkPayloadProcessor :: forall fmt. Codec fmt Payload =&gt; fmt -&gt; PayloadProcessor
</span><a href="Temporal.Payload.html#mkPayloadProcessor"><span class="hs-identifier hs-var hs-var">mkPayloadProcessor</span></a></span></span><span> </span><span id="local-6989586621680161104"><span class="annot"><span class="annottext">fmt
</span><a href="#local-6989586621680161104"><span class="hs-identifier hs-var">fmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-264"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#PayloadProcessor"><span class="hs-identifier hs-type">PayloadProcessor</span></a></span><span>
</span><span id="line-265"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">payloadProcessorEncode :: Payload -&gt; IO Payload
</span><a href="Temporal.Payload.html#payloadProcessorEncode"><span class="hs-identifier hs-var">payloadProcessorEncode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">fmt -&gt; Payload -&gt; IO Payload
forall fmt a. Codec fmt a =&gt; fmt -&gt; a -&gt; IO Payload
</span><a href="Temporal.Payload.html#encode"><span class="hs-identifier hs-var">encode</span></a></span><span> </span><span class="annot"><span class="annottext">fmt
</span><a href="#local-6989586621680161104"><span class="hs-identifier hs-var">fmt</span></a></span><span>
</span><span id="line-266"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">payloadProcessorDecode :: Payload -&gt; IO (Either String Payload)
</span><a href="Temporal.Payload.html#payloadProcessorDecode"><span class="hs-identifier hs-var">payloadProcessorDecode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">fmt -&gt; Payload -&gt; IO (Either String Payload)
forall fmt a. Codec fmt a =&gt; fmt -&gt; Payload -&gt; IO (Either String a)
</span><a href="Temporal.Payload.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">fmt
</span><a href="#local-6989586621680161104"><span class="hs-identifier hs-var">fmt</span></a></span><span>
</span><span id="line-267"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span id="local-6989586621680160494"><span class="annot"><a href="Temporal.Payload.html#addPayloadProcessor"><span class="hs-identifier hs-type">addPayloadProcessor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Temporal.Payload.html#Codec"><span class="hs-identifier hs-type">Codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160494"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160494"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Payload.html#PayloadProcessor"><span class="hs-identifier hs-type">PayloadProcessor</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Payload.html#PayloadProcessor"><span class="hs-identifier hs-type">PayloadProcessor</span></a></span></span><span>
</span><span id="line-271"></span><span id="addPayloadProcessor"><span class="annot"><span class="annottext">addPayloadProcessor :: forall fmt.
Codec fmt Payload =&gt;
fmt -&gt; PayloadProcessor -&gt; PayloadProcessor
</span><a href="Temporal.Payload.html#addPayloadProcessor"><span class="hs-identifier hs-var hs-var">addPayloadProcessor</span></a></span></span><span> </span><span id="local-6989586621680161112"><span class="annot"><span class="annottext">fmt
</span><a href="#local-6989586621680161112"><span class="hs-identifier hs-var">fmt</span></a></span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#PayloadProcessor"><span class="hs-identifier hs-type">PayloadProcessor</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621680161113"><span id="local-6989586621680161114"><span class="annot"><span class="annottext">Payload -&gt; IO (Either String Payload)
Payload -&gt; IO Payload
payloadProcessorEncode :: PayloadProcessor -&gt; Payload -&gt; IO Payload
payloadProcessorDecode :: PayloadProcessor -&gt; Payload -&gt; IO (Either String Payload)
payloadProcessorEncode :: Payload -&gt; IO Payload
payloadProcessorDecode :: Payload -&gt; IO (Either String Payload)
</span><a href="Temporal.Payload.html#payloadProcessorEncode"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-272"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#PayloadProcessor"><span class="hs-identifier hs-type">PayloadProcessor</span></a></span><span>
</span><span id="line-273"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">payloadProcessorEncode :: Payload -&gt; IO Payload
</span><a href="Temporal.Payload.html#payloadProcessorEncode"><span class="hs-identifier hs-var">payloadProcessorEncode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680161115"><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161115"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-274"></span><span>        </span><span id="local-6989586621680161116"><span class="annot"><a href="#local-6989586621680161116"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Payload -&gt; IO Payload
</span><a href="#local-6989586621680161113"><span class="hs-identifier hs-var">payloadProcessorEncode</span></a></span><span> </span><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161115"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-275"></span><span>        </span><span class="annot"><a href="Temporal.Payload.html#encode"><span class="hs-identifier hs-type">encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161112"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161116"><span class="hs-identifier hs-type">p'</span></a></span><span>
</span><span id="line-276"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">payloadProcessorDecode :: Payload -&gt; IO (Either String Payload)
</span><a href="Temporal.Payload.html#payloadProcessorDecode"><span class="hs-identifier hs-var">payloadProcessorDecode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680161117"><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161117"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-277"></span><span>        </span><span id="local-6989586621680161118"><span class="annot"><a href="#local-6989586621680161118"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">fmt -&gt; Payload -&gt; IO (Either String Payload)
forall fmt a. Codec fmt a =&gt; fmt -&gt; Payload -&gt; IO (Either String a)
</span><a href="Temporal.Payload.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">fmt
</span><a href="#local-6989586621680161112"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161117"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-278"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621680161118"><span class="hs-identifier hs-type">p'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-279"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621680161119"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680161119"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either String Payload -&gt; IO (Either String Payload)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Either String Payload -&gt; IO (Either String Payload))
-&gt; Either String Payload -&gt; IO (Either String Payload)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String Payload
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680161119"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-280"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621680161120"><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161120"><span class="hs-identifier hs-var">ok</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Payload -&gt; IO (Either String Payload)
</span><a href="#local-6989586621680161114"><span class="hs-identifier hs-var">payloadProcessorDecode</span></a></span><span> </span><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161120"><span class="hs-identifier hs-var">ok</span></a></span><span>
</span><span id="line-281"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span class="annot"><span class="hs-comment">{- | A codec that uses the base codec for actually encoding and decoding, but
supports additional pre- and post-processing. This is useful for adding
compression, encryption, or other transformations to an existing codec.
-}</span></span><span>
</span><span id="line-288"></span><span class="hs-keyword">data</span><span> </span><span id="Around"><span class="annot"><a href="Temporal.Payload.html#Around"><span class="hs-identifier hs-var">Around</span></a></span></span><span> </span><span id="local-6989586621680160496"><span class="annot"><a href="#local-6989586621680160496"><span class="hs-identifier hs-type">base</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Around"><span class="annot"><a href="Temporal.Payload.html#Around"><span class="hs-identifier hs-var">Around</span></a></span></span><span>
</span><span id="line-289"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="around"><span class="annot"><span class="annottext">forall base. Around base -&gt; PayloadProcessor
</span><a href="Temporal.Payload.html#around"><span class="hs-identifier hs-var hs-var">around</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Temporal.Payload.html#PayloadProcessor"><span class="hs-identifier hs-type">PayloadProcessor</span></a></span><span>
</span><span id="line-290"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="baseCodec"><span class="annot"><span class="annottext">forall base. Around base -&gt; base
</span><a href="Temporal.Payload.html#baseCodec"><span class="hs-identifier hs-var hs-var">baseCodec</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680160496"><span class="hs-identifier hs-type">base</span></a></span><span>
</span><span id="line-291"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span>
</span><span id="line-294"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680160502"><span id="local-6989586621680160503"><span id="local-6989586621680161128"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621680160502"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Temporal.Payload.html#Codec"><span class="hs-identifier hs-type">Codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160503"><span class="hs-identifier hs-type">base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160502"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Payload.html#Codec"><span class="hs-identifier hs-type">Codec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#Around"><span class="hs-identifier hs-type">Around</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160503"><span class="hs-identifier hs-type">base</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680160502"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-295"></span><span>  </span><span id="local-6989586621680161135"><span class="annot"><span class="annottext">encoding :: Around base -&gt; Proxy a -&gt; ByteString
</span><a href="Temporal.Payload.html#encoding"><span class="hs-identifier hs-var hs-var hs-var">encoding</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#Around"><span class="hs-identifier hs-type">Around</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadProcessor
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680161136"><span class="annot"><span class="annottext">base
</span><a href="#local-6989586621680161136"><span class="hs-identifier hs-var">base</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">base -&gt; Proxy a -&gt; ByteString
forall fmt a. Codec fmt a =&gt; fmt -&gt; Proxy a -&gt; ByteString
</span><a href="Temporal.Payload.html#encoding"><span class="hs-identifier hs-var">encoding</span></a></span><span> </span><span class="annot"><span class="annottext">base
</span><a href="#local-6989586621680161136"><span class="hs-identifier hs-var">base</span></a></span><span>
</span><span id="line-296"></span><span>  </span><span id="local-6989586621680161139"><span class="annot"><span class="annottext">encode :: Around base -&gt; a -&gt; IO Payload
</span><a href="Temporal.Payload.html#encode"><span class="hs-identifier hs-var hs-var hs-var">encode</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#Around"><span class="hs-identifier hs-type">Around</span></a></span><span> </span><span id="local-6989586621680161140"><span class="annot"><span class="annottext">PayloadProcessor
</span><a href="#local-6989586621680161140"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621680161141"><span class="annot"><span class="annottext">base
</span><a href="#local-6989586621680161141"><span class="hs-identifier hs-var">base</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680161142"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680161142"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">base -&gt; a -&gt; IO Payload
forall fmt a. Codec fmt a =&gt; fmt -&gt; a -&gt; IO Payload
</span><a href="Temporal.Payload.html#encode"><span class="hs-identifier hs-var">encode</span></a></span><span> </span><span class="annot"><span class="annottext">base
</span><a href="#local-6989586621680161141"><span class="hs-identifier hs-var">base</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680161142"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">IO Payload -&gt; (Payload -&gt; IO Payload) -&gt; IO Payload
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">PayloadProcessor -&gt; Payload -&gt; IO Payload
</span><a href="Temporal.Payload.html#payloadProcessorEncode"><span class="hs-identifier hs-var">payloadProcessorEncode</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadProcessor
</span><a href="#local-6989586621680161140"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-297"></span><span>  </span><span id="local-6989586621680161146"><span class="annot"><span class="annottext">decode :: Around base -&gt; Payload -&gt; IO (Either String a)
</span><a href="Temporal.Payload.html#decode"><span class="hs-identifier hs-var hs-var hs-var">decode</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#Around"><span class="hs-identifier hs-type">Around</span></a></span><span> </span><span id="local-6989586621680161147"><span class="annot"><span class="annottext">PayloadProcessor
</span><a href="#local-6989586621680161147"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621680161148"><span class="annot"><span class="annottext">base
</span><a href="#local-6989586621680161148"><span class="hs-identifier hs-var">base</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680161149"><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161149"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-298"></span><span>    </span><span class="annot"><span class="annottext">PayloadProcessor -&gt; Payload -&gt; IO (Either String Payload)
</span><a href="Temporal.Payload.html#payloadProcessorDecode"><span class="hs-identifier hs-var">payloadProcessorDecode</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadProcessor
</span><a href="#local-6989586621680161147"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161149"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either String Payload)
-&gt; (Either String Payload -&gt; IO (Either String a))
-&gt; IO (Either String a)
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-299"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621680161150"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680161150"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either String a -&gt; IO (Either String a)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Either String a -&gt; IO (Either String a))
-&gt; Either String a -&gt; IO (Either String a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String a
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680161150"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-300"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621680161151"><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161151"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">base -&gt; Payload -&gt; IO (Either String a)
forall fmt a. Codec fmt a =&gt; fmt -&gt; Payload -&gt; IO (Either String a)
</span><a href="Temporal.Payload.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">base
</span><a href="#local-6989586621680161148"><span class="hs-identifier hs-var">base</span></a></span><span> </span><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161151"><span class="hs-identifier hs-var">x'</span></a></span><span>
</span><span id="line-301"></span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="ArgsAndResult%27"><span class="annot"><a href="Temporal.Payload.html#ArgsAndResult%27"><span class="hs-identifier hs-var">ArgsAndResult'</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680161153"><span class="annot"><a href="#local-6989586621680161153"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680161154"><span class="annot"><a href="#local-6989586621680161154"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-304"></span><span>  </span><span id="ArgsAndResult%27"><span class="annot"><a href="Temporal.Payload.html#ArgsAndResult%27"><span class="hs-identifier hs-var">ArgsAndResult'</span></a></span></span><span> </span><span id="local-6989586621680161155"><span id="local-6989586621680161156"><span id="local-6989586621680161157"><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680161155"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680161156"><span class="hs-identifier hs-type">rest</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680161157"><span class="hs-identifier hs-type">args</span></a></span></span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Payload.html#ArgsAndResult%27"><span class="hs-identifier hs-type">ArgsAndResult'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161156"><span class="hs-identifier hs-type">rest</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680161155"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621680161157"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span>  </span><span id="ArgsAndResult%27"><span class="annot"><a href="Temporal.Payload.html#ArgsAndResult%27"><span class="hs-identifier hs-var">ArgsAndResult'</span></a></span></span><span> </span><span id="local-6989586621680161158"><span id="local-6989586621680161159"><span class="annot"><a href="#local-6989586621680161158"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161159"><span class="hs-identifier hs-type">args</span></a></span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680161159"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680161158"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span>
</span><span id="line-308"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="ArgsAndResult"><span class="annot"><a href="Temporal.Payload.html#ArgsAndResult"><span class="hs-identifier hs-var">ArgsAndResult</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680161161"><span class="annot"><a href="#local-6989586621680161161"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-309"></span><span>  </span><span id="ArgsAndResult"><span class="annot"><a href="Temporal.Payload.html#ArgsAndResult"><span class="hs-identifier hs-var">ArgsAndResult</span></a></span></span><span> </span><span id="local-6989586621680161162"><span class="annot"><a href="#local-6989586621680161162"><span class="hs-identifier hs-type hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Payload.html#ArgsAndResult%27"><span class="hs-identifier hs-type">ArgsAndResult'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161162"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-310"></span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="ArgsOf"><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-var">ArgsOf</span></a></span></span><span> </span><span id="local-6989586621680161163"><span class="annot"><a href="#local-6989586621680161163"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-313"></span><span>  </span><span id="ArgsOf"><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-var">ArgsOf</span></a></span></span><span> </span><span id="local-6989586621680161164"><span id="local-6989586621680161165"><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680161164"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680161165"><span class="hs-identifier hs-type">rest</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680161164"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-type">ArgsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161165"><span class="hs-identifier hs-type">rest</span></a></span><span>
</span><span id="line-314"></span><span>  </span><span id="ArgsOf"><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-var">ArgsOf</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-315"></span><span>
</span><span id="line-316"></span><span>
</span><span id="line-317"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="FunctorInnerValue"><span class="annot"><a href="Temporal.Payload.html#FunctorInnerValue"><span class="hs-identifier hs-var">FunctorInnerValue</span></a></span></span><span> </span><span id="local-6989586621680161167"><span class="annot"><a href="#local-6989586621680161167"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-318"></span><span>  </span><span id="FunctorInnerValue"><span class="annot"><a href="Temporal.Payload.html#FunctorInnerValue"><span class="hs-identifier hs-var">FunctorInnerValue</span></a></span></span><span> </span><span id="local-6989586621680161168"><span id="local-6989586621680161169"><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680161168"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161169"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680161169"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-319"></span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="ResultOf"><span class="annot"><a href="Temporal.Payload.html#ResultOf"><span class="hs-identifier hs-var">ResultOf</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680161170"><span class="annot"><a href="#local-6989586621680161170"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680161171"><span class="annot"><a href="#local-6989586621680161171"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-322"></span><span>  </span><span id="ResultOf"><span class="annot"><a href="Temporal.Payload.html#ResultOf"><span class="hs-identifier hs-var">ResultOf</span></a></span></span><span> </span><span id="local-6989586621680161172"><span id="local-6989586621680161173"><span class="annot"><a href="#local-6989586621680161172"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680161173"><span class="hs-identifier hs-type">rest</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Payload.html#ResultOf"><span class="hs-identifier hs-type">ResultOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161172"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161173"><span class="hs-identifier hs-type">rest</span></a></span><span>
</span><span id="line-323"></span><span>  </span><span id="ResultOf"><span class="annot"><a href="Temporal.Payload.html#ResultOf"><span class="hs-identifier hs-var">ResultOf</span></a></span></span><span> </span><span id="local-6989586621680161174"><span id="local-6989586621680161175"><span class="annot"><a href="#local-6989586621680161174"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680161174"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161175"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680161175"><span class="hs-identifier hs-type">result</span></a></span><span>
</span><span id="line-324"></span><span>  </span><span id="ResultOf"><span class="annot"><a href="Temporal.Payload.html#ResultOf"><span class="hs-identifier hs-var">ResultOf</span></a></span></span><span> </span><span id="local-6989586621680161176"><span id="local-6989586621680161177"><span class="annot"><a href="#local-6989586621680161176"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161177"><span class="hs-identifier hs-type">result</span></a></span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeError</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;This function must use the (&quot;</span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:&lt;&gt;:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">ShowType</span></span><span> </span><span class="annot"><a href="#local-6989586621680161176"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:&lt;&gt;:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;) monad.&quot;</span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Current type: &quot;</span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:&lt;&gt;:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">ShowType</span></span><span> </span><span class="annot"><a href="#local-6989586621680161177"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span>
</span><span id="line-327"></span><span class="annot"><span class="hs-comment">-- | Construct a function type from a list of argument types and a result type.</span></span><span>
</span><span id="line-328"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="%3A-%3E%3A"><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-var">(:-&gt;:)</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680161178"><span class="annot"><a href="#local-6989586621680161178"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680161179"><span class="annot"><a href="#local-6989586621680161179"><span class="hs-identifier hs-type">result</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-329"></span><span>  </span><span id="%3A-%3E%3A"><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-var">(:-&gt;:)</span></a></span></span><span> </span><span id="local-6989586621680161180"><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621680161180"><span class="hs-identifier hs-type">result</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680161180"><span class="hs-identifier hs-type">result</span></a></span><span>
</span><span id="line-330"></span><span>  </span><span id="%3A-%3E%3A"><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-var">(:-&gt;:)</span></a></span></span><span> </span><span id="local-6989586621680161181"><span id="local-6989586621680161182"><span id="local-6989586621680161183"><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680161181"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621680161182"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680161183"><span class="hs-identifier hs-type">result</span></a></span></span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680161181"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680161182"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161183"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">0</span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span>
</span><span id="line-334"></span><span>
</span><span id="line-335"></span><span>
</span><span id="line-336"></span><span class="annot"><span class="hs-comment">-- | Applies a constraint to all types in a type-level list.</span></span><span>
</span><span id="line-337"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="AllArgs"><span class="annot"><a href="Temporal.Payload.html#AllArgs"><span class="hs-identifier hs-var">AllArgs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680161184"><span class="annot"><a href="#local-6989586621680161184"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Constraint</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680161185"><span class="annot"><a href="#local-6989586621680161185"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Constraint</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-338"></span><span>  </span><span id="AllArgs"><span class="annot"><a href="Temporal.Payload.html#AllArgs"><span class="hs-identifier hs-var">AllArgs</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-339"></span><span>  </span><span id="AllArgs"><span class="annot"><a href="Temporal.Payload.html#AllArgs"><span class="hs-identifier hs-var">AllArgs</span></a></span></span><span> </span><span id="local-6989586621680161186"><span id="local-6989586621680161187"><span id="local-6989586621680161188"><span class="annot"><a href="#local-6989586621680161186"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680161187"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621680161188"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680161186"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161187"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Temporal.Payload.html#AllArgs"><span class="hs-identifier hs-type">AllArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161186"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161188"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span class="hs-keyword">class</span><span> </span><span id="VarArgs"><span class="annot"><a href="Temporal.Payload.html#VarArgs"><span class="hs-identifier hs-var">VarArgs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680160517"><span class="annot"><a href="#local-6989586621680160517"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-343"></span><span>  </span><span id="sequenceArgs"><span class="annot"><a href="Temporal.Payload.html#sequenceArgs"><span class="hs-identifier hs-type">sequenceArgs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621680160507"><span id="local-6989586621680160508"><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621680160507"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160507"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160508"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160507"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160517"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160507"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160508"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160517"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160507"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160508"><span class="hs-identifier hs-type">result</span></a></span></span></span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span>
</span><span id="line-346"></span><span>  </span><span id="mapResult"><span class="annot"><a href="Temporal.Payload.html#mapResult"><span class="hs-identifier hs-type">mapResult</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621680160510"><span id="local-6989586621680160511"><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160510"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160511"><span class="hs-identifier hs-type">result'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160517"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160510"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160517"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160511"><span class="hs-identifier hs-type">result'</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span>  </span><span id="foldlArgs"><span class="annot"><a href="Temporal.Payload.html#foldlArgs"><span class="hs-identifier hs-type">foldlArgs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680160512"><span class="annot"><a href="#local-6989586621680160512"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span id="local-6989586621680160515"><span class="annot"><a href="#local-6989586621680160515"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#AllArgs"><span class="hs-identifier hs-type">AllArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160512"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160517"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621680160512"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680160514"><span class="annot"><a href="#local-6989586621680160514"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621680160512"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160514"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160515"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160514"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160515"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160515"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160517"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160515"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span>
</span><span id="line-352"></span><span class="hs-comment">-- Instance for the base case where there are no arguments left</span><span>
</span><span id="line-353"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Temporal.Payload.html#VarArgs"><span class="hs-identifier hs-type">VarArgs</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-354"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#sequenceArgs"><span class="hs-identifier hs-type">sequenceArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621680160518"><span id="local-6989586621680160519"><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621680160518"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160518"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160519"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160518"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160518"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160519"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160518"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160519"><span class="hs-identifier hs-type">result</span></a></span></span></span><span>
</span><span id="line-355"></span><span>  </span><span id="local-6989586621680161201"><span class="annot"><span class="annottext">sequenceArgs :: forall (m :: * -&gt; *) result.
Monad m =&gt;
Proxy (m result) -&gt; m (m result) -&gt; m result
</span><a href="Temporal.Payload.html#sequenceArgs"><span class="hs-identifier hs-var hs-var hs-var">sequenceArgs</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (m result)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (m result) -&gt; m result
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span>
</span><span id="line-356"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Temporal.Payload.html#sequenceArgs"><span class="hs-pragma hs-type">sequenceArgs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-357"></span><span>
</span><span id="line-358"></span><span>
</span><span id="line-359"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#mapResult"><span class="hs-identifier hs-type">mapResult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621680160525"><span id="local-6989586621680160526"><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160525"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160526"><span class="hs-identifier hs-type">result'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160525"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160526"><span class="hs-identifier hs-type">result'</span></a></span></span></span><span>
</span><span id="line-360"></span><span>  </span><span id="local-6989586621680161202"><span class="annot"><span class="annottext">mapResult :: forall result result'. (result -&gt; result') -&gt; result -&gt; result'
</span><a href="Temporal.Payload.html#mapResult"><span class="hs-identifier hs-var hs-var hs-var">mapResult</span></a></span></span><span> </span><span id="local-6989586621680161203"><span class="annot"><span class="annottext">result -&gt; result'
</span><a href="#local-6989586621680161203"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">result -&gt; result'
</span><a href="#local-6989586621680161203"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-361"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Temporal.Payload.html#mapResult"><span class="hs-pragma hs-type">mapResult</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-362"></span><span>
</span><span id="line-363"></span><span>
</span><span id="line-364"></span><span>  </span><span id="local-6989586621680161205"><span class="annot"><span class="annottext">foldlArgs :: forall (c :: * -&gt; Constraint) b.
AllArgs c '[] =&gt;
Proxy c -&gt; (forall a. c a =&gt; b -&gt; a -&gt; b) -&gt; b -&gt; '[] :-&gt;: b
</span><a href="Temporal.Payload.html#foldlArgs"><span class="hs-identifier hs-var hs-var hs-var">foldlArgs</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy c
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">forall a. c a =&gt; b -&gt; a -&gt; b
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621680161206"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680161206"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b
'[] :-&gt;: b
</span><a href="#local-6989586621680161206"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-365"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Temporal.Payload.html#foldlArgs"><span class="hs-pragma hs-type">foldlArgs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-366"></span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span class="hs-comment">-- Instance for the recursive case where there's at least one argument</span><span>
</span><span id="line-369"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680160533"><span id="local-6989586621680160534"><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#VarArgs"><span class="hs-identifier hs-type">VarArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160533"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Payload.html#VarArgs"><span class="hs-identifier hs-type">VarArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160534"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621680160533"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-370"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#sequenceArgs"><span class="hs-identifier hs-type">sequenceArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680160536"><span class="annot"><a href="#local-6989586621680160536"><span class="hs-identifier hs-type">result</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680160535"><span class="annot"><a href="#local-6989586621680160535"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621680160535"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160535"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160536"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160535"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160534"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621680160533"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160535"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160536"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160534"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160533"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160535"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160536"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-371"></span><span>  </span><span id="local-6989586621680161219"><span class="annot"><span class="annottext">sequenceArgs :: forall result (m :: * -&gt; *).
Monad m =&gt;
Proxy (m result)
-&gt; m ((arg : args) :-&gt;: m result) -&gt; arg -&gt; args :-&gt;: m result
</span><a href="Temporal.Payload.html#sequenceArgs"><span class="hs-identifier hs-var hs-var hs-var">sequenceArgs</span></a></span></span><span> </span><span id="local-6989586621680161220"><span class="annot"><span class="annottext">Proxy (m result)
</span><a href="#local-6989586621680161220"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621680161221"><span class="annot"><span class="annottext">m ((arg : args) :-&gt;: m result)
</span><a href="#local-6989586621680161221"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span id="local-6989586621680161222"><span class="annot"><span class="annottext">arg
</span><a href="#local-6989586621680161222"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (args :: [*]) (m :: * -&gt; *) result.
(VarArgs args, Monad m) =&gt;
Proxy (m result) -&gt; m (args :-&gt;: m result) -&gt; args :-&gt;: m result
</span><a href="Temporal.Payload.html#sequenceArgs"><span class="hs-identifier hs-var">sequenceArgs</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160533"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy (m result)
</span><a href="#local-6989586621680161220"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">(m (args :-&gt;: m result) -&gt; args :-&gt;: m result)
-&gt; m (args :-&gt;: m result) -&gt; args :-&gt;: m result
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-372"></span><span>    </span><span id="local-6989586621680161223"><span class="annot"><a href="#local-6989586621680161223"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m ((arg : args) :-&gt;: m result)
</span><a href="#local-6989586621680161221"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-373"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680161223"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161222"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-374"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Temporal.Payload.html#sequenceArgs"><span class="hs-pragma hs-type">sequenceArgs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-375"></span><span>
</span><span id="line-376"></span><span>
</span><span id="line-377"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#mapResult"><span class="hs-identifier hs-type">mapResult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680160541"><span class="annot"><a href="#local-6989586621680160541"><span class="hs-identifier hs-type">result</span></a></span></span><span> </span><span id="local-6989586621680160542"><span class="annot"><a href="#local-6989586621680160542"><span class="hs-identifier hs-type">result'</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160541"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160542"><span class="hs-identifier hs-type">result'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160534"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160533"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160541"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160534"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160533"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160542"><span class="hs-identifier hs-type">result'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-378"></span><span>  </span><span id="local-6989586621680161225"><span class="annot"><span class="annottext">mapResult :: forall result result'.
(result -&gt; result')
-&gt; (arg -&gt; args :-&gt;: result) -&gt; arg -&gt; args :-&gt;: result'
</span><a href="Temporal.Payload.html#mapResult"><span class="hs-identifier hs-var hs-var hs-var">mapResult</span></a></span></span><span> </span><span id="local-6989586621680161226"><span class="annot"><span class="annottext">result -&gt; result'
</span><a href="#local-6989586621680161226"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680161227"><span class="annot"><span class="annottext">arg -&gt; args :-&gt;: result
</span><a href="#local-6989586621680161227"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621680161228"><span class="annot"><span class="annottext">arg
</span><a href="#local-6989586621680161228"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (args :: [*]) result result'.
VarArgs args =&gt;
(result -&gt; result') -&gt; (args :-&gt;: result) -&gt; args :-&gt;: result'
</span><a href="Temporal.Payload.html#mapResult"><span class="hs-identifier hs-var">mapResult</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160533"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160541"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="annot"><span class="annottext">result -&gt; result'
</span><a href="#local-6989586621680161226"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">arg -&gt; args :-&gt;: result
</span><a href="#local-6989586621680161227"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">arg
</span><a href="#local-6989586621680161228"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-379"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Temporal.Payload.html#mapResult"><span class="hs-pragma hs-type">mapResult</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span>
</span><span id="line-382"></span><span>  </span><span id="local-6989586621680161236"><span class="annot"><span class="annottext">foldlArgs :: forall (c :: * -&gt; Constraint) b.
AllArgs c (arg : args) =&gt;
Proxy c
-&gt; (forall a. c a =&gt; b -&gt; a -&gt; b) -&gt; b -&gt; (arg : args) :-&gt;: b
</span><a href="Temporal.Payload.html#foldlArgs"><span class="hs-identifier hs-var hs-var hs-var">foldlArgs</span></a></span></span><span> </span><span id="local-6989586621680161237"><span class="annot"><span class="annottext">Proxy c
</span><a href="#local-6989586621680161237"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621680161238"><span class="annot"><span class="annottext">forall a. c a =&gt; b -&gt; a -&gt; b
</span><a href="#local-6989586621680161238"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621680161239"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680161239"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621680161240"><span class="annot"><span class="annottext">arg
</span><a href="#local-6989586621680161240"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (args :: [*]) (c :: * -&gt; Constraint) b.
(VarArgs args, AllArgs c args) =&gt;
Proxy c -&gt; (forall a. c a =&gt; b -&gt; a -&gt; b) -&gt; b -&gt; args :-&gt;: b
</span><a href="Temporal.Payload.html#foldlArgs"><span class="hs-identifier hs-var">foldlArgs</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160533"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy c
</span><a href="#local-6989586621680161237"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; a -&gt; b
forall a. c a =&gt; b -&gt; a -&gt; b
</span><a href="#local-6989586621680161238"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b -&gt; arg -&gt; b
forall a. c a =&gt; b -&gt; a -&gt; b
</span><a href="#local-6989586621680161238"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680161239"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">arg
</span><a href="#local-6989586621680161240"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-383"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Temporal.Payload.html#foldlArgs"><span class="hs-pragma hs-type">foldlArgs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span class="annot"><a href="Temporal.Payload.html#hoistResult"><span class="hs-identifier hs-type">hoistResult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680160551"><span class="annot"><a href="#local-6989586621680160551"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span id="local-6989586621680160555"><span class="annot"><a href="#local-6989586621680160555"><span class="hs-identifier hs-type">result</span></a></span></span><span> </span><span id="local-6989586621680160552"><span class="annot"><a href="#local-6989586621680160552"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621680160554"><span class="annot"><a href="#local-6989586621680160554"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Temporal.Payload.html#VarArgs"><span class="hs-identifier hs-type">VarArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160551"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680160553"><span class="annot"><a href="#local-6989586621680160553"><span class="hs-identifier hs-type">x</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621680160552"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160553"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160554"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160553"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160551"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160552"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160555"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160551"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160554"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160555"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-387"></span><span id="hoistResult"><span class="annot"><span class="annottext">hoistResult :: forall {k} (args :: [*]) (result :: k) (m :: k -&gt; *) (n :: k -&gt; *).
VarArgs args =&gt;
(forall (x :: k). m x -&gt; n x)
-&gt; (args :-&gt;: m result) -&gt; args :-&gt;: n result
</span><a href="Temporal.Payload.html#hoistResult"><span class="hs-identifier hs-var hs-var">hoistResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (args :: [*]) result result'.
VarArgs args =&gt;
(result -&gt; result') -&gt; (args :-&gt;: result) -&gt; args :-&gt;: result'
</span><a href="Temporal.Payload.html#mapResult"><span class="hs-identifier hs-var">mapResult</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160551"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160552"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160555"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-388"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Temporal.Payload.html#hoistResult"><span class="hs-pragma hs-type">hoistResult</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span>
</span><span id="line-391"></span><span class="annot"><a href="Temporal.Payload.html#foldMapArgs"><span class="hs-identifier hs-type">foldMapArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680160561"><span class="annot"><a href="#local-6989586621680160561"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span id="local-6989586621680160562"><span class="annot"><a href="#local-6989586621680160562"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span id="local-6989586621680160563"><span class="annot"><a href="#local-6989586621680160563"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#VarArgs"><span class="hs-identifier hs-type">VarArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160561"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Temporal.Payload.html#AllArgs"><span class="hs-identifier hs-type">AllArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160562"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160561"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621680160563"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680160564"><span class="annot"><a href="#local-6989586621680160564"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621680160562"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160564"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160564"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160563"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160561"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160563"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-392"></span><span id="foldMapArgs"><span class="annot"><span class="annottext">foldMapArgs :: forall (args :: [*]) (c :: * -&gt; Constraint) m.
(VarArgs args, AllArgs c args, Monoid m) =&gt;
(forall a. c a =&gt; a -&gt; m) -&gt; args :-&gt;: m
</span><a href="Temporal.Payload.html#foldMapArgs"><span class="hs-identifier hs-var hs-var">foldMapArgs</span></a></span></span><span> </span><span id="local-6989586621680161251"><span class="annot"><span class="annottext">forall a. c a =&gt; a -&gt; m
</span><a href="#local-6989586621680161251"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (args :: [*]) (c :: * -&gt; Constraint) b.
(VarArgs args, AllArgs c args) =&gt;
Proxy c -&gt; (forall a. c a =&gt; b -&gt; a -&gt; b) -&gt; b -&gt; args :-&gt;: b
</span><a href="Temporal.Payload.html#foldlArgs"><span class="hs-identifier hs-var">foldlArgs</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160561"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160562"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160563"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy c
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680161255"><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621680161255"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621680161256"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680161256"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621680161255"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">m -&gt; m -&gt; m
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`mappend`</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; m
forall a. c a =&gt; a -&gt; m
</span><a href="#local-6989586621680161251"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680161256"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-393"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Temporal.Payload.html#foldMapArgs"><span class="hs-pragma hs-type">foldMapArgs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-394"></span><span>
</span><span id="line-395"></span><span>
</span><span id="line-396"></span><span class="annot"><a href="Temporal.Payload.html#foldMArgs"><span class="hs-identifier hs-type">foldMArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680160569"><span class="annot"><a href="#local-6989586621680160569"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span id="local-6989586621680160570"><span class="annot"><a href="#local-6989586621680160570"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span id="local-6989586621680160573"><span class="annot"><a href="#local-6989586621680160573"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621680160571"><span class="annot"><a href="#local-6989586621680160571"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#VarArgs"><span class="hs-identifier hs-type">VarArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160569"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Temporal.Payload.html#AllArgs"><span class="hs-identifier hs-type">AllArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160570"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160569"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621680160571"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680160572"><span class="annot"><a href="#local-6989586621680160572"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621680160570"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160572"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160573"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160572"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160571"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160573"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160573"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160569"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160571"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160573"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-397"></span><span id="foldMArgs"><span class="annot"><span class="annottext">foldMArgs :: forall (args :: [*]) (c :: * -&gt; Constraint) b (m :: * -&gt; *).
(VarArgs args, AllArgs c args, Monad m) =&gt;
(forall a. c a =&gt; b -&gt; a -&gt; m b) -&gt; b -&gt; args :-&gt;: m b
</span><a href="Temporal.Payload.html#foldMArgs"><span class="hs-identifier hs-var hs-var">foldMArgs</span></a></span></span><span> </span><span id="local-6989586621680161265"><span class="annot"><span class="annottext">forall a. c a =&gt; b -&gt; a -&gt; m b
</span><a href="#local-6989586621680161265"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680161266"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680161266"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (args :: [*]) (c :: * -&gt; Constraint) b.
(VarArgs args, AllArgs c args) =&gt;
Proxy c -&gt; (forall a. c a =&gt; b -&gt; a -&gt; b) -&gt; b -&gt; args :-&gt;: b
</span><a href="Temporal.Payload.html#foldlArgs"><span class="hs-identifier hs-var">foldlArgs</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160569"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160570"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160571"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160573"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Proxy c
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680161270"><span class="annot"><span class="annottext">m b
</span><a href="#local-6989586621680161270"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621680161271"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680161271"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m b
</span><a href="#local-6989586621680161270"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">m b -&gt; (b -&gt; m b) -&gt; m b
forall a b. m a -&gt; (a -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-glyph">!</span><span id="local-6989586621680161272"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680161272"><span class="hs-identifier hs-var">x'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">b -&gt; a -&gt; m b
forall a. c a =&gt; b -&gt; a -&gt; m b
</span><a href="#local-6989586621680161265"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680161272"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680161271"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b -&gt; m b
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680161266"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-398"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Temporal.Payload.html#foldMArgs"><span class="hs-pragma hs-type">foldMArgs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-399"></span><span>
</span><span id="line-400"></span><span>
</span><span id="line-401"></span><span class="annot"><a href="Temporal.Payload.html#foldMArgs_"><span class="hs-identifier hs-type">foldMArgs_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680160579"><span class="annot"><a href="#local-6989586621680160579"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span id="local-6989586621680160580"><span class="annot"><a href="#local-6989586621680160580"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span id="local-6989586621680160583"><span class="annot"><a href="#local-6989586621680160583"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621680160581"><span class="annot"><a href="#local-6989586621680160581"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#VarArgs"><span class="hs-identifier hs-type">VarArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160579"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Temporal.Payload.html#AllArgs"><span class="hs-identifier hs-type">AllArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160580"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160579"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621680160581"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680160582"><span class="annot"><a href="#local-6989586621680160582"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621680160580"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160582"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160583"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160582"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160581"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160583"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160583"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160579"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160581"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-402"></span><span id="foldMArgs_"><span class="annot"><span class="annottext">foldMArgs_ :: forall (args :: [*]) (c :: * -&gt; Constraint) b (m :: * -&gt; *).
(VarArgs args, AllArgs c args, Monad m) =&gt;
(forall a. c a =&gt; b -&gt; a -&gt; m b) -&gt; b -&gt; args :-&gt;: m ()
</span><a href="Temporal.Payload.html#foldMArgs_"><span class="hs-identifier hs-var hs-var">foldMArgs_</span></a></span></span><span> </span><span id="local-6989586621680161284"><span class="annot"><span class="annottext">forall a. c a =&gt; b -&gt; a -&gt; m b
</span><a href="#local-6989586621680161284"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680161285"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680161285"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (args :: [*]) result result'.
VarArgs args =&gt;
(result -&gt; result') -&gt; (args :-&gt;: result) -&gt; args :-&gt;: result'
</span><a href="Temporal.Payload.html#mapResult"><span class="hs-identifier hs-var">mapResult</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160579"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160581"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160583"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160581"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m b -&gt; m ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (args :: [*]) (c :: * -&gt; Constraint) b (m :: * -&gt; *).
(VarArgs args, AllArgs c args, Monad m) =&gt;
(forall a. c a =&gt; b -&gt; a -&gt; m b) -&gt; b -&gt; args :-&gt;: m b
</span><a href="Temporal.Payload.html#foldMArgs"><span class="hs-identifier hs-var">foldMArgs</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160579"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160580"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160583"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160581"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; a -&gt; m b
forall a. c a =&gt; b -&gt; a -&gt; m b
</span><a href="#local-6989586621680161284"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680161285"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-403"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Temporal.Payload.html#foldMArgs_"><span class="hs-pragma hs-type">foldMArgs_</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-404"></span><span>
</span><span id="line-405"></span><span>
</span><span id="line-406"></span><span class="hs-keyword">type</span><span> </span><span id="UnencodedPayload"><span class="annot"><a href="Temporal.Payload.html#UnencodedPayload"><span class="hs-identifier hs-var">UnencodedPayload</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span>
</span><span id="line-407"></span><span>
</span><span id="line-408"></span><span>
</span><span id="line-409"></span><span class="annot"><span class="hs-comment">{- | This is the final step in the process of encoding payloads.

It takes a list of suspended payload encodings and runs them through the payload processor.
This allows us to
-}</span></span><span>
</span><span id="line-414"></span><span id="local-6989586621680160591"><span id="local-6989586621680160593"><span class="annot"><a href="Temporal.Payload.html#processorEncodePayloads"><span class="hs-identifier hs-type">processorEncodePayloads</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621680160591"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Traversable</span></span><span> </span><span class="annot"><a href="#local-6989586621680160593"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Payload.html#PayloadProcessor"><span class="hs-identifier hs-type">PayloadProcessor</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160593"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160591"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160593"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-415"></span><span id="processorEncodePayloads"><span class="annot"><span class="annottext">processorEncodePayloads :: forall (m :: * -&gt; *) (f :: * -&gt; *).
(MonadIO m, Traversable f) =&gt;
PayloadProcessor -&gt; f Payload -&gt; m (f Payload)
</span><a href="Temporal.Payload.html#processorEncodePayloads"><span class="hs-identifier hs-var hs-var">processorEncodePayloads</span></a></span></span><span> </span><span id="local-6989586621680161294"><span class="annot"><span class="annottext">PayloadProcessor
</span><a href="#local-6989586621680161294"><span class="hs-identifier hs-var">processor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO (f Payload) -&gt; m (f Payload)
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (f Payload) -&gt; m (f Payload))
-&gt; (f Payload -&gt; IO (f Payload)) -&gt; f Payload -&gt; m (f Payload)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Payload -&gt; IO Payload) -&gt; f Payload -&gt; IO (f Payload)
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; f a -&gt; m (f b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PayloadProcessor -&gt; Payload -&gt; IO Payload
</span><a href="Temporal.Payload.html#payloadProcessorEncode"><span class="hs-identifier hs-var">payloadProcessorEncode</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadProcessor
</span><a href="#local-6989586621680161294"><span class="hs-identifier hs-var">processor</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-416"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Temporal.Payload.html#processorEncodePayloads"><span class="hs-pragma hs-type">processorEncodePayloads</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-417"></span><span>
</span><span id="line-418"></span><span>
</span><span id="line-419"></span><span id="local-6989586621680161297"><span id="local-6989586621680161298"><span class="annot"><a href="Temporal.Payload.html#processorDecodePayloads"><span class="hs-identifier hs-type">processorDecodePayloads</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621680161297"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Traversable</span></span><span> </span><span class="annot"><a href="#local-6989586621680161298"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Payload.html#PayloadProcessor"><span class="hs-identifier hs-type">PayloadProcessor</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680161298"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680161297"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680161298"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-420"></span><span id="processorDecodePayloads"><span class="annot"><span class="annottext">processorDecodePayloads :: forall (m :: * -&gt; *) (f :: * -&gt; *).
(MonadIO m, Traversable f) =&gt;
PayloadProcessor -&gt; f Payload -&gt; m (f Payload)
</span><a href="Temporal.Payload.html#processorDecodePayloads"><span class="hs-identifier hs-var hs-var">processorDecodePayloads</span></a></span></span><span> </span><span id="local-6989586621680161309"><span class="annot"><span class="annottext">PayloadProcessor
</span><a href="#local-6989586621680161309"><span class="hs-identifier hs-var">processor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO (f Payload) -&gt; m (f Payload)
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (f Payload) -&gt; m (f Payload))
-&gt; (f Payload -&gt; IO (f Payload)) -&gt; f Payload -&gt; m (f Payload)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Payload -&gt; IO Payload) -&gt; f Payload -&gt; IO (f Payload)
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; f a -&gt; m (f b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PayloadProcessor -&gt; Payload -&gt; IO (Either String Payload)
</span><a href="Temporal.Payload.html#payloadProcessorDecode"><span class="hs-identifier hs-var">payloadProcessorDecode</span></a></span><span> </span><span class="annot"><span class="annottext">PayloadProcessor
</span><a href="#local-6989586621680161309"><span class="hs-identifier hs-var">processor</span></a></span><span> </span><span class="annot"><span class="annottext">(Payload -&gt; IO (Either String Payload))
-&gt; (Either String Payload -&gt; IO Payload) -&gt; Payload -&gt; IO Payload
forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m b) -&gt; (b -&gt; m c) -&gt; a -&gt; m c
</span><span class="hs-operator hs-var">&gt;=&gt;</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO Payload)
-&gt; (Payload -&gt; IO Payload) -&gt; Either String Payload -&gt; IO Payload
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ValueError -&gt; IO Payload
forall e a. (HasCallStack, Exception e) =&gt; e -&gt; IO a
</span><span class="hs-identifier hs-var">throwIO</span></span><span> </span><span class="annot"><span class="annottext">(ValueError -&gt; IO Payload)
-&gt; (String -&gt; ValueError) -&gt; String -&gt; IO Payload
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ValueError
</span><a href="Temporal.Payload.html#ValueError"><span class="hs-identifier hs-var">ValueError</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Payload -&gt; IO Payload
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span class="hs-special">)</span><span>
</span><span id="line-421"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Temporal.Payload.html#processorDecodePayloads"><span class="hs-pragma hs-type">processorDecodePayloads</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-422"></span><span>
</span><span id="line-423"></span><span>
</span><span id="line-424"></span><span class="annot"><a href="Temporal.Payload.html#gatherArgs"><span class="hs-identifier hs-type">gatherArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680160614"><span class="annot"><a href="#local-6989586621680160614"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span id="local-6989586621680160615"><span class="annot"><a href="#local-6989586621680160615"><span class="hs-identifier hs-type">codec</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#VarArgs"><span class="hs-identifier hs-type">VarArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160614"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Temporal.Payload.html#AllArgs"><span class="hs-identifier hs-type">AllArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#Codec"><span class="hs-identifier hs-type">Codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160615"><span class="hs-identifier hs-type">codec</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680160614"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160615"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160614"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#UnencodedPayload"><span class="hs-identifier hs-type">UnencodedPayload</span></a></span><span>
</span><span id="line-425"></span><span id="gatherArgs"><span class="annot"><span class="annottext">gatherArgs :: forall (args :: [*]) codec.
(VarArgs args, AllArgs (Codec codec) args) =&gt;
codec -&gt; args :-&gt;: Vector (IO Payload)
</span><a href="Temporal.Payload.html#gatherArgs"><span class="hs-identifier hs-var hs-var">gatherArgs</span></a></span></span><span> </span><span id="local-6989586621680161320"><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680161320"><span class="hs-identifier hs-var">codec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (args :: [*]) result result'.
VarArgs args =&gt;
(result -&gt; result') -&gt; (args :-&gt;: result) -&gt; args :-&gt;: result'
</span><a href="Temporal.Payload.html#mapResult"><span class="hs-identifier hs-var">mapResult</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160614"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">B.Bundle</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#UnencodedPayload"><span class="hs-identifier hs-type">UnencodedPayload</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#UnencodedPayload"><span class="hs-identifier hs-type">UnencodedPayload</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bundle Vector (IO Payload) -&gt; Vector (IO Payload)
forall (v :: * -&gt; *) a. Vector v a =&gt; Bundle v a -&gt; v a
</span><span class="hs-identifier hs-var">VG.unstream</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (args :: [*]) (c :: * -&gt; Constraint) b.
(VarArgs args, AllArgs c args) =&gt;
Proxy c -&gt; (forall a. c a =&gt; b -&gt; a -&gt; b) -&gt; b -&gt; args :-&gt;: b
</span><a href="Temporal.Payload.html#foldlArgs"><span class="hs-identifier hs-var">foldlArgs</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160614"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#Codec"><span class="hs-identifier hs-type">Codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160615"><span class="hs-identifier hs-type">codec</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Proxy (Codec codec)
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="annot"><span class="annottext">Bundle Vector (IO Payload) -&gt; a -&gt; Bundle Vector (IO Payload)
forall a.
Codec codec a =&gt;
Bundle Vector (IO Payload) -&gt; a -&gt; Bundle Vector (IO Payload)
</span><a href="#local-6989586621680161322"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Bundle Vector (IO Payload)
forall (v :: * -&gt; *) a. Bundle v a
</span><span class="hs-identifier hs-var">B.empty</span></span><span class="hs-special">)</span><span>
</span><span id="line-426"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-427"></span><span>    </span><span class="annot"><a href="#local-6989586621680161322"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680161326"><span class="annot"><a href="#local-6989586621680161326"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Temporal.Payload.html#Codec"><span class="hs-identifier hs-type">Codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160615"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161326"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">B.Bundle</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#UnencodedPayload"><span class="hs-identifier hs-type">UnencodedPayload</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680161326"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">B.Bundle</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#UnencodedPayload"><span class="hs-identifier hs-type">UnencodedPayload</span></a></span><span>
</span><span id="line-428"></span><span>    </span><span id="local-6989586621680161322"><span class="annot"><span class="annottext">go :: forall a.
Codec codec a =&gt;
Bundle Vector (IO Payload) -&gt; a -&gt; Bundle Vector (IO Payload)
</span><a href="#local-6989586621680161322"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621680161329"><span class="annot"><span class="annottext">Bundle Vector (IO Payload)
</span><a href="#local-6989586621680161329"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621680161330"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680161330"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bundle Vector (IO Payload)
-&gt; IO Payload -&gt; Bundle Vector (IO Payload)
forall (v :: * -&gt; *) a. Bundle v a -&gt; a -&gt; Bundle v a
</span><span class="hs-identifier hs-var">B.snoc</span></span><span> </span><span class="annot"><span class="annottext">Bundle Vector (IO Payload)
</span><a href="#local-6989586621680161329"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">codec -&gt; a -&gt; IO Payload
forall fmt a. Codec fmt a =&gt; fmt -&gt; a -&gt; IO Payload
</span><a href="Temporal.Payload.html#encode"><span class="hs-identifier hs-var">encode</span></a></span><span> </span><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680161320"><span class="hs-identifier hs-var">codec</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680161330"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-429"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Temporal.Payload.html#gatherArgs"><span class="hs-pragma hs-type">gatherArgs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-430"></span><span>
</span><span id="line-431"></span><span>
</span><span id="line-432"></span><span class="annot"><a href="Temporal.Payload.html#withArgs"><span class="hs-identifier hs-type">withArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680160630"><span class="annot"><a href="#local-6989586621680160630"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span id="local-6989586621680160632"><span class="annot"><a href="#local-6989586621680160632"><span class="hs-identifier hs-type">result</span></a></span></span><span> </span><span id="local-6989586621680160631"><span class="annot"><a href="#local-6989586621680160631"><span class="hs-identifier hs-type">codec</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#VarArgs"><span class="hs-identifier hs-type">VarArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160630"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Temporal.Payload.html#AllArgs"><span class="hs-identifier hs-type">AllArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#Codec"><span class="hs-identifier hs-type">Codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160631"><span class="hs-identifier hs-type">codec</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680160630"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160631"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#UnencodedPayload"><span class="hs-identifier hs-type">UnencodedPayload</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160632"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160630"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160632"><span class="hs-identifier hs-type">result</span></a></span><span>
</span><span id="line-433"></span><span id="withArgs"><span class="annot"><span class="annottext">withArgs :: forall (args :: [*]) result codec.
(VarArgs args, AllArgs (Codec codec) args) =&gt;
codec -&gt; (Vector (IO Payload) -&gt; result) -&gt; args :-&gt;: result
</span><a href="Temporal.Payload.html#withArgs"><span class="hs-identifier hs-var hs-var">withArgs</span></a></span></span><span> </span><span id="local-6989586621680161337"><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680161337"><span class="hs-identifier hs-var">codec</span></a></span></span><span> </span><span id="local-6989586621680161338"><span class="annot"><span class="annottext">Vector (IO Payload) -&gt; result
</span><a href="#local-6989586621680161338"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (args :: [*]) result result'.
VarArgs args =&gt;
(result -&gt; result') -&gt; (args :-&gt;: result) -&gt; args :-&gt;: result'
</span><a href="Temporal.Payload.html#mapResult"><span class="hs-identifier hs-var">mapResult</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160630"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#UnencodedPayload"><span class="hs-identifier hs-type">UnencodedPayload</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160632"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="annot"><span class="annottext">Vector (IO Payload) -&gt; result
</span><a href="#local-6989586621680161338"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (args :: [*]) codec.
(VarArgs args, AllArgs (Codec codec) args) =&gt;
codec -&gt; args :-&gt;: Vector (IO Payload)
</span><a href="Temporal.Payload.html#gatherArgs"><span class="hs-identifier hs-var">gatherArgs</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160630"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160631"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680161337"><span class="hs-identifier hs-var">codec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-434"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Temporal.Payload.html#withArgs"><span class="hs-pragma hs-type">withArgs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-435"></span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="hs-keyword">data</span><span> </span><span id="Payload"><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-var">Payload</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Payload"><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-var">Payload</span></a></span></span><span>
</span><span id="line-438"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="payloadData"><span class="annot"><span class="annottext">Payload -&gt; ByteString
</span><a href="Temporal.Payload.html#payloadData"><span class="hs-identifier hs-var hs-var">payloadData</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-439"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="payloadMetadata"><span class="annot"><span class="annottext">Payload -&gt; Map Text ByteString
</span><a href="Temporal.Payload.html#payloadMetadata"><span class="hs-identifier hs-var hs-var">payloadMetadata</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data.Map.Strict.Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-440"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-441"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680161341"><span id="local-6989586621680161349"><span id="local-6989586621680161353"><span class="annot"><span class="annottext">Int -&gt; Payload -&gt; ShowS
[Payload] -&gt; ShowS
Payload -&gt; String
(Int -&gt; Payload -&gt; ShowS)
-&gt; (Payload -&gt; String) -&gt; ([Payload] -&gt; ShowS) -&gt; Show Payload
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Payload -&gt; ShowS
showsPrec :: Int -&gt; Payload -&gt; ShowS
$cshow :: Payload -&gt; String
show :: Payload -&gt; String
$cshowList :: [Payload] -&gt; ShowS
showList :: [Payload] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680161357"><span id="local-6989586621680161363"><span class="annot"><span class="annottext">Payload -&gt; Payload -&gt; Bool
(Payload -&gt; Payload -&gt; Bool)
-&gt; (Payload -&gt; Payload -&gt; Bool) -&gt; Eq Payload
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Payload -&gt; Payload -&gt; Bool
== :: Payload -&gt; Payload -&gt; Bool
$c/= :: Payload -&gt; Payload -&gt; Bool
/= :: Payload -&gt; Payload -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680161370"><span id="local-6989586621680161377"><span id="local-6989586621680161382"><span id="local-6989586621680161386"><span id="local-6989586621680161389"><span id="local-6989586621680161392"><span id="local-6989586621680161395"><span class="annot"><span class="annottext">Eq Payload
Eq Payload =&gt;
(Payload -&gt; Payload -&gt; Ordering)
-&gt; (Payload -&gt; Payload -&gt; Bool)
-&gt; (Payload -&gt; Payload -&gt; Bool)
-&gt; (Payload -&gt; Payload -&gt; Bool)
-&gt; (Payload -&gt; Payload -&gt; Bool)
-&gt; (Payload -&gt; Payload -&gt; Payload)
-&gt; (Payload -&gt; Payload -&gt; Payload)
-&gt; Ord Payload
Payload -&gt; Payload -&gt; Bool
Payload -&gt; Payload -&gt; Ordering
Payload -&gt; Payload -&gt; Payload
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: Payload -&gt; Payload -&gt; Ordering
compare :: Payload -&gt; Payload -&gt; Ordering
$c&lt; :: Payload -&gt; Payload -&gt; Bool
&lt; :: Payload -&gt; Payload -&gt; Bool
$c&lt;= :: Payload -&gt; Payload -&gt; Bool
&lt;= :: Payload -&gt; Payload -&gt; Bool
$c&gt; :: Payload -&gt; Payload -&gt; Bool
&gt; :: Payload -&gt; Payload -&gt; Bool
$c&gt;= :: Payload -&gt; Payload -&gt; Bool
&gt;= :: Payload -&gt; Payload -&gt; Bool
$cmax :: Payload -&gt; Payload -&gt; Payload
max :: Payload -&gt; Payload -&gt; Payload
$cmin :: Payload -&gt; Payload -&gt; Payload
min :: Payload -&gt; Payload -&gt; Payload
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680161402"><span id="local-6989586621680161413"><span class="annot"><span class="annottext">(forall (m :: * -&gt; *). Quote m =&gt; Payload -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *). Quote m =&gt; Payload -&gt; Code m Payload)
-&gt; Lift Payload
forall t.
(forall (m :: * -&gt; *). Quote m =&gt; t -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *). Quote m =&gt; t -&gt; Code m t) -&gt; Lift t
forall (m :: * -&gt; *). Quote m =&gt; Payload -&gt; m Exp
forall (m :: * -&gt; *). Quote m =&gt; Payload -&gt; Code m Payload
$clift :: forall (m :: * -&gt; *). Quote m =&gt; Payload -&gt; m Exp
lift :: forall (m :: * -&gt; *). Quote m =&gt; Payload -&gt; m Exp
$cliftTyped :: forall (m :: * -&gt; *). Quote m =&gt; Payload -&gt; Code m Payload
liftTyped :: forall (m :: * -&gt; *). Quote m =&gt; Payload -&gt; Code m Payload
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Lift</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-442"></span><span>
</span><span id="line-443"></span><span>
</span><span id="line-444"></span><span id="local-6989586621680160646"><span class="annot"><a href="Temporal.Payload.html#base64DecodeFromText"><span class="hs-identifier hs-type">base64DecodeFromText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadFail</span></span><span> </span><span class="annot"><a href="#local-6989586621680160646"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680160646"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span></span><span>
</span><span id="line-445"></span><span id="base64DecodeFromText"><span class="annot"><span class="annottext">base64DecodeFromText :: forall (m :: * -&gt; *). MonadFail m =&gt; Text -&gt; m ByteString
</span><a href="Temporal.Payload.html#base64DecodeFromText"><span class="hs-identifier hs-var hs-var">base64DecodeFromText</span></a></span></span><span> </span><span id="local-6989586621680161431"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680161431"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either Text ByteString
</span><span class="hs-identifier hs-var">decodeBase64</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Either Text ByteString)
-&gt; ByteString -&gt; Either Text ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">Text.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680161431"><span class="hs-identifier hs-var">txt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-446"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621680161432"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680161432"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m ByteString
forall a. String -&gt; m a
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; m ByteString) -&gt; String -&gt; m ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">Text.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680161432"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-447"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621680161434"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680161434"><span class="hs-identifier hs-var">ok</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; m ByteString
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680161434"><span class="hs-identifier hs-var">ok</span></a></span><span>
</span><span id="line-448"></span><span>
</span><span id="line-449"></span><span>
</span><span id="line-450"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680161437"><span id="local-6989586621680161441"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-451"></span><span>  </span><span id="local-6989586621680161474"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser Payload
</span><a href="#local-6989586621680161474"><span class="hs-identifier hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Object -&gt; Parser Payload) -&gt; Value -&gt; Parser Payload
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Payload&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser Payload) -&gt; Value -&gt; Parser Payload)
-&gt; (Object -&gt; Parser Payload) -&gt; Value -&gt; Parser Payload
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680161477"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680161477"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-452"></span><span>    </span><span id="local-6989586621680161478"><span class="annot"><a href="#local-6989586621680161478"><span class="hs-identifier hs-var">rawPayloadData</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680161477"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (Maybe Text)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">.:?</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;data&quot;</span></span><span>
</span><span id="line-453"></span><span>    </span><span id="local-6989586621680161480"><span class="annot"><a href="#local-6989586621680161480"><span class="hs-identifier hs-var">rawPayloadMetadata</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621680161477"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.:?</span></span><span> </span><span class="annot"><span class="hs-string">&quot;metadata&quot;</span></span><span>
</span><span id="line-454"></span><span>    </span><span id="local-6989586621680161481"><span class="annot"><a href="#local-6989586621680161481"><span class="hs-identifier hs-var">payloadData</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">mempty</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Temporal.Payload.html#base64DecodeFromText"><span class="hs-identifier hs-type">base64DecodeFromText</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161478"><span class="hs-identifier hs-type">rawPayloadData</span></a></span><span>
</span><span id="line-455"></span><span>    </span><span id="local-6989586621680161483"><span class="annot"><a href="#local-6989586621680161483"><span class="hs-identifier hs-var">payloadMetadata</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">mempty</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">traverse</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#base64DecodeFromText"><span class="hs-identifier hs-type">base64DecodeFromText</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680161480"><span class="hs-identifier hs-type">rawPayloadMetadata</span></a></span><span>
</span><span id="line-456"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Temporal.Payload.html#payloadData"><span class="hs-glyph hs-var hs-var hs-type hs-type">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-457"></span><span>
</span><span id="line-458"></span><span>
</span><span id="line-459"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680161488"><span id="local-6989586621680161492"><span id="local-6989586621680161495"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-460"></span><span>  </span><span id="local-6989586621680161515"><span class="annot"><span class="annottext">toJSON :: Payload -&gt; Value
</span><a href="#local-6989586621680161515"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621680161517"><span id="local-6989586621680161518"><span class="annot"><span class="annottext">ByteString
Map Text ByteString
payloadData :: Payload -&gt; ByteString
payloadMetadata :: Payload -&gt; Map Text ByteString
payloadData :: ByteString
payloadMetadata :: Map Text ByteString
</span><a href="Temporal.Payload.html#payloadData"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-461"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value) -&gt; [Pair] -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-462"></span><span>      </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680161517"><span class="hs-identifier hs-var">payloadData</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; [Pair]
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;data&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><span class="hs-identifier hs-var">encodeBase64</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680161517"><span class="hs-identifier hs-var">payloadData</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pair -&gt; [Pair] -&gt; [Pair]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; [Pair]) -&gt; [Pair] -&gt; [Pair]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-463"></span><span>        </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Map Text ByteString -&gt; Bool
forall k a. Map k a -&gt; Bool
</span><span class="hs-identifier hs-var">Map.null</span></span><span> </span><span class="annot"><span class="annottext">Map Text ByteString
</span><a href="#local-6989586621680161518"><span class="hs-identifier hs-var">payloadMetadata</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; [Pair]
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;metadata&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Map Text Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Text) -&gt; Map Text ByteString -&gt; Map Text Text
forall a b. (a -&gt; b) -&gt; Map Text a -&gt; Map Text b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><span class="hs-identifier hs-var">encodeBase64</span></span><span> </span><span class="annot"><span class="annottext">Map Text ByteString
</span><a href="#local-6989586621680161518"><span class="hs-identifier hs-var">payloadMetadata</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pair -&gt; [Pair] -&gt; [Pair]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-465"></span><span>  </span><span id="local-6989586621680161539"><span class="annot"><span class="annottext">toEncoding :: Payload -&gt; Encoding
</span><a href="#local-6989586621680161539"><span class="hs-identifier hs-var hs-var hs-var">toEncoding</span></a></span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621680161541"><span id="local-6989586621680161542"><span class="annot"><span class="annottext">ByteString
Map Text ByteString
payloadData :: Payload -&gt; ByteString
payloadMetadata :: Payload -&gt; Map Text ByteString
payloadData :: ByteString
payloadMetadata :: Map Text ByteString
</span><a href="Temporal.Payload.html#payloadData"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-466"></span><span>    </span><span class="annot"><span class="annottext">Series -&gt; Encoding
</span><span class="hs-identifier hs-var">pairs</span></span><span> </span><span class="annot"><span class="annottext">(Series -&gt; Encoding) -&gt; Series -&gt; Encoding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-467"></span><span>      </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680161541"><span class="hs-identifier hs-var">payloadData</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Series
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;data&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Series
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Series
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><span class="hs-identifier hs-var">encodeBase64</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680161541"><span class="hs-identifier hs-var">payloadData</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-468"></span><span>        </span><span class="annot"><span class="annottext">Series -&gt; Series -&gt; Series
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Map Text ByteString -&gt; Bool
forall k a. Map k a -&gt; Bool
</span><span class="hs-identifier hs-var">Map.null</span></span><span> </span><span class="annot"><span class="annottext">Map Text ByteString
</span><a href="#local-6989586621680161542"><span class="hs-identifier hs-var">payloadMetadata</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Series
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;metadata&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Map Text Text -&gt; Series
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Series
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Text) -&gt; Map Text ByteString -&gt; Map Text Text
forall a b. (a -&gt; b) -&gt; Map Text a -&gt; Map Text b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><span class="hs-identifier hs-var">encodeBase64</span></span><span> </span><span class="annot"><span class="annottext">Map Text ByteString
</span><a href="#local-6989586621680161542"><span class="hs-identifier hs-var">payloadMetadata</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-469"></span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span class="annot"><a href="Temporal.Payload.html#convertFromProtoPayload"><span class="hs-identifier hs-type">convertFromProtoPayload</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proto.Payload</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span>
</span><span id="line-472"></span><span id="convertFromProtoPayload"><span class="annot"><span class="annottext">convertFromProtoPayload :: Payload -&gt; Payload
</span><a href="Temporal.Payload.html#convertFromProtoPayload"><span class="hs-identifier hs-var hs-var">convertFromProtoPayload</span></a></span></span><span> </span><span id="local-6989586621680161544"><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161544"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Map Text ByteString -&gt; Payload
</span><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-var">Payload</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161544"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Payload
-&gt; FoldLike ByteString Payload Payload ByteString ByteString
-&gt; ByteString
forall s a t b. s -&gt; FoldLike a s t a b -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">FoldLike ByteString Payload Payload ByteString ByteString
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;data'&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">Proto.data'</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161544"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Payload
-&gt; FoldLike
     (Map Text ByteString)
     Payload
     Payload
     (Map Text ByteString)
     (Map Text ByteString)
-&gt; Map Text ByteString
forall s a t b. s -&gt; FoldLike a s t a b -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">FoldLike
  (Map Text ByteString)
  Payload
  Payload
  (Map Text ByteString)
  (Map Text ByteString)
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;metadata&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">Proto.metadata</span></span><span class="hs-special">)</span><span>
</span><span id="line-473"></span><span>
</span><span id="line-474"></span><span>
</span><span id="line-475"></span><span class="annot"><a href="Temporal.Payload.html#convertToProtoPayload"><span class="hs-identifier hs-type">convertToProtoPayload</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proto.Payload</span></span><span>
</span><span id="line-476"></span><span id="convertToProtoPayload"><span class="annot"><span class="annottext">convertToProtoPayload :: Payload -&gt; Payload
</span><a href="Temporal.Payload.html#convertToProtoPayload"><span class="hs-identifier hs-var hs-var">convertToProtoPayload</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span> </span><span id="local-6989586621680161546"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680161546"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621680161547"><span class="annot"><span class="annottext">Map Text ByteString
</span><a href="#local-6989586621680161547"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-477"></span><span>  </span><span class="annot"><span class="annottext">Payload
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">defMessage</span></span><span>
</span><span id="line-478"></span><span>    </span><span class="annot"><span class="annottext">Payload -&gt; (Payload -&gt; Payload) -&gt; Payload
forall s t. s -&gt; (s -&gt; t) -&gt; t
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' f Payload ByteString
forall {f :: * -&gt; *}. Identical f =&gt; LensLike' f Payload ByteString
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;data'&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">Proto.data'</span></span><span> </span><span class="annot"><span class="annottext">(forall {f :: * -&gt; *}.
 Identical f =&gt;
 LensLike' f Payload ByteString)
-&gt; ByteString -&gt; Payload -&gt; Payload
forall s t a b. Setter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680161546"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-479"></span><span>    </span><span class="annot"><span class="annottext">Payload -&gt; (Payload -&gt; Payload) -&gt; Payload
forall s t. s -&gt; (s -&gt; t) -&gt; t
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' f Payload (Map Text ByteString)
forall {f :: * -&gt; *}.
Identical f =&gt;
LensLike' f Payload (Map Text ByteString)
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;metadata&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">Proto.metadata</span></span><span> </span><span class="annot"><span class="annottext">(forall {f :: * -&gt; *}.
 Identical f =&gt;
 LensLike' f Payload (Map Text ByteString))
-&gt; Map Text ByteString -&gt; Payload -&gt; Payload
forall s t a b. Setter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Map Text ByteString
</span><a href="#local-6989586621680161547"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-480"></span><span>
</span><span id="line-481"></span><span>
</span><span id="line-482"></span><span class="hs-keyword">class</span><span> </span><span id="ApplyPayloads"><span class="annot"><a href="Temporal.Payload.html#ApplyPayloads"><span class="hs-identifier hs-var">ApplyPayloads</span></a></span></span><span> </span><span id="local-6989586621680160711"><span class="annot"><a href="#local-6989586621680160711"><span class="hs-identifier hs-type">codec</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680160712"><span class="annot"><a href="#local-6989586621680160712"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-483"></span><span>  </span><span id="applyPayloads"><span class="annot"><a href="Temporal.Payload.html#applyPayloads"><span class="hs-identifier hs-type">applyPayloads</span></a></span></span><span>
</span><span id="line-484"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621680160709"><span class="annot"><a href="#local-6989586621680160711"><span class="hs-identifier hs-type">codec</span></a></span><span>
</span><span id="line-485"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621680160712"><span class="hs-identifier hs-type">args</span></a></span><span>
</span><span id="line-486"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621680160709"><span class="hs-identifier hs-type">result</span></a></span><span>
</span><span id="line-487"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160712"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160709"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-488"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span>
</span><span id="line-489"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621680160709"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-490"></span><span>
</span><span id="line-491"></span><span>
</span><span id="line-492"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680160713"><span class="annot"><a href="Temporal.Payload.html#ApplyPayloads"><span class="hs-identifier hs-type">ApplyPayloads</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160713"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-493"></span><span>  </span><span id="local-6989586621680161566"><span class="annot"><span class="annottext">applyPayloads :: forall result.
codec
-&gt; Proxy '[]
-&gt; Proxy result
-&gt; ('[] :-&gt;: result)
-&gt; Vector Payload
-&gt; IO (Either String result)
</span><a href="Temporal.Payload.html#applyPayloads"><span class="hs-identifier hs-var hs-var hs-var">applyPayloads</span></a></span></span><span> </span><span class="annot"><span class="annottext">codec
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Proxy '[]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Proxy result
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680161567"><span class="annot"><span class="annottext">'[] :-&gt;: result
</span><a href="#local-6989586621680161567"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">Vector Payload
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either String result -&gt; IO (Either String result)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Either String result -&gt; IO (Either String result))
-&gt; Either String result -&gt; IO (Either String result)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">('[] :-&gt;: result) -&gt; Either String ('[] :-&gt;: result)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">'[] :-&gt;: result
</span><a href="#local-6989586621680161567"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-494"></span><span>
</span><span id="line-495"></span><span>
</span><span id="line-496"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680160718"><span id="local-6989586621680160719"><span id="local-6989586621680160720"><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#Codec"><span class="hs-identifier hs-type">Codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160718"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160719"><span class="hs-identifier hs-type">ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Temporal.Payload.html#ApplyPayloads"><span class="hs-identifier hs-type">ApplyPayloads</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160718"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160720"><span class="hs-identifier hs-type">tys</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Payload.html#ApplyPayloads"><span class="hs-identifier hs-type">ApplyPayloads</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680160718"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680160719"><span class="hs-identifier hs-type">ty</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621680160720"><span class="hs-identifier hs-type">tys</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-497"></span><span>  </span><span id="local-6989586621680161579"><span class="annot"><span class="annottext">applyPayloads :: forall result.
codec
-&gt; Proxy (ty : tys)
-&gt; Proxy result
-&gt; ((ty : tys) :-&gt;: result)
-&gt; Vector Payload
-&gt; IO (Either String result)
</span><a href="Temporal.Payload.html#applyPayloads"><span class="hs-identifier hs-var hs-var hs-var">applyPayloads</span></a></span></span><span> </span><span id="local-6989586621680161580"><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680161580"><span class="hs-identifier hs-var">codec</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (ty : tys)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680161581"><span class="annot"><span class="annottext">Proxy result
</span><a href="#local-6989586621680161581"><span class="hs-identifier hs-var">resP</span></a></span></span><span> </span><span id="local-6989586621680161582"><span class="annot"><span class="annottext">(ty : tys) :-&gt;: result
</span><a href="#local-6989586621680161582"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680161583"><span class="annot"><span class="annottext">Vector Payload
</span><a href="#local-6989586621680161583"><span class="hs-identifier hs-var">vec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Vector Payload -&gt; Maybe (Payload, Vector Payload)
forall a. Vector a -&gt; Maybe (a, Vector a)
</span><span class="hs-identifier hs-var">V.uncons</span></span><span> </span><span class="annot"><span class="annottext">Vector Payload
</span><a href="#local-6989586621680161583"><span class="hs-identifier hs-var">vec</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-498"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Payload, Vector Payload)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either String result -&gt; IO (Either String result)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Either String result -&gt; IO (Either String result))
-&gt; Either String result -&gt; IO (Either String result)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String result
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Not enough arguments&quot;</span></span><span>
</span><span id="line-499"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680161585"><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161585"><span class="hs-identifier hs-var">pl</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680161586"><span class="annot"><span class="annottext">Vector Payload
</span><a href="#local-6989586621680161586"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-500"></span><span>      </span><span id="local-6989586621680161587"><span class="annot"><a href="#local-6989586621680161587"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">codec -&gt; Payload -&gt; IO (Either String ty)
forall fmt a. Codec fmt a =&gt; fmt -&gt; Payload -&gt; IO (Either String a)
</span><a href="Temporal.Payload.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680161580"><span class="hs-identifier hs-var">codec</span></a></span><span> </span><span class="annot"><span class="annottext">Payload
</span><a href="#local-6989586621680161585"><span class="hs-identifier hs-var">pl</span></a></span><span>
</span><span id="line-501"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621680161587"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-502"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621680161588"><span class="annot"><span class="annottext">ty
</span><a href="#local-6989586621680161588"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">codec
-&gt; Proxy tys
-&gt; Proxy result
-&gt; (tys :-&gt;: result)
-&gt; Vector Payload
-&gt; IO (Either String result)
forall result.
codec
-&gt; Proxy tys
-&gt; Proxy result
-&gt; (tys :-&gt;: result)
-&gt; Vector Payload
-&gt; IO (Either String result)
forall codec (args :: [*]) result.
ApplyPayloads codec args =&gt;
codec
-&gt; Proxy args
-&gt; Proxy result
-&gt; (args :-&gt;: result)
-&gt; Vector Payload
-&gt; IO (Either String result)
</span><a href="Temporal.Payload.html#applyPayloads"><span class="hs-identifier hs-var">applyPayloads</span></a></span><span> </span><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680161580"><span class="hs-identifier hs-var">codec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: [*]). Proxy t
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680160720"><span class="hs-identifier hs-type">tys</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Proxy result
</span><a href="#local-6989586621680161581"><span class="hs-identifier hs-var">resP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ty : tys) :-&gt;: result
ty -&gt; tys :-&gt;: result
</span><a href="#local-6989586621680161582"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ty
</span><a href="#local-6989586621680161588"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Vector Payload
</span><a href="#local-6989586621680161586"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-503"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621680161589"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680161589"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either String result -&gt; IO (Either String result)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Either String result -&gt; IO (Either String result))
-&gt; Either String result -&gt; IO (Either String result)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String result
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680161589"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-504"></span><span>
</span><span id="line-505"></span><span>
</span><span id="line-506"></span><span class="hs-keyword">type</span><span> </span><span id="GatherArgs"><span class="annot"><a href="Temporal.Payload.html#GatherArgs"><span class="hs-identifier hs-var">GatherArgs</span></a></span></span><span> </span><span id="local-6989586621680161590"><span class="annot"><a href="#local-6989586621680161590"><span class="hs-identifier hs-type">codec</span></a></span></span><span> </span><span id="local-6989586621680161591"><span class="annot"><a href="#local-6989586621680161591"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#VarArgs"><span class="hs-identifier hs-type">VarArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161591"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Temporal.Payload.html#AllArgs"><span class="hs-identifier hs-type">AllArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#Codec"><span class="hs-identifier hs-type">Codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161590"><span class="hs-identifier hs-type">codec</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680161591"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-507"></span><span>
</span><span id="line-508"></span><span>
</span><span id="line-509"></span><span class="hs-keyword">type</span><span> </span><span id="GatherArgsOf"><span class="annot"><a href="Temporal.Payload.html#GatherArgsOf"><span class="hs-identifier hs-var">GatherArgsOf</span></a></span></span><span> </span><span id="local-6989586621680161592"><span class="annot"><a href="#local-6989586621680161592"><span class="hs-identifier hs-type">codec</span></a></span></span><span> </span><span id="local-6989586621680161593"><span class="annot"><a href="#local-6989586621680161593"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Payload.html#GatherArgs"><span class="hs-identifier hs-type">GatherArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161592"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-type">ArgsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161593"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-510"></span><span>
</span><span id="line-511"></span><span>
</span><span id="line-512"></span><span class="hs-keyword">type</span><span> </span><span id="FunctionSupportsCodec"><span class="annot"><a href="Temporal.Payload.html#FunctionSupportsCodec"><span class="hs-identifier hs-var">FunctionSupportsCodec</span></a></span></span><span> </span><span id="local-6989586621680161594"><span class="annot"><a href="#local-6989586621680161594"><span class="hs-identifier hs-type">codec</span></a></span></span><span> </span><span id="local-6989586621680161595"><span class="annot"><a href="#local-6989586621680161595"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span id="local-6989586621680161596"><span class="annot"><a href="#local-6989586621680161596"><span class="hs-identifier hs-type">result</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#GatherArgs"><span class="hs-identifier hs-type">GatherArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161594"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161595"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Temporal.Payload.html#Codec"><span class="hs-identifier hs-type">Codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161594"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161596"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621680161596"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Temporal.Payload.html#ApplyPayloads"><span class="hs-identifier hs-type">ApplyPayloads</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161594"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161595"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-513"></span><span>
</span><span id="line-514"></span><span>
</span><span id="line-515"></span><span class="hs-keyword">type</span><span> </span><span id="FunctionSupportsCodec%27"><span class="annot"><a href="Temporal.Payload.html#FunctionSupportsCodec%27"><span class="hs-identifier hs-var">FunctionSupportsCodec'</span></a></span></span><span> </span><span id="local-6989586621680161597"><span class="annot"><a href="#local-6989586621680161597"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621680161598"><span class="annot"><a href="#local-6989586621680161598"><span class="hs-identifier hs-type">codec</span></a></span></span><span> </span><span id="local-6989586621680161599"><span class="annot"><a href="#local-6989586621680161599"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#FunctionSupportsCodec"><span class="hs-identifier hs-type">FunctionSupportsCodec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161598"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-type">ArgsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161599"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ResultOf"><span class="hs-identifier hs-type">ResultOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161597"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161599"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680161599"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-type">ArgsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161599"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161597"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ResultOf"><span class="hs-identifier hs-type">ResultOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161597"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680161599"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-516"></span></pre></body></html>