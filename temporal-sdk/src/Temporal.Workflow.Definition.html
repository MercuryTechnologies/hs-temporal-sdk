<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ConstraintKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE InstanceSigs #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE QuantifiedConstraints #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilyDependencies #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Temporal.Workflow.Definition.html"><span class="hs-identifier">Temporal.Workflow.Definition</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowDef"><span class="hs-identifier">WorkflowDef</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>  </span><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowRef"><span class="hs-identifier">WorkflowRef</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>  </span><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowDefinition"><span class="hs-identifier">WorkflowDefinition</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>  </span><span class="annot"><a href="Temporal.Workflow.Definition.html#KnownWorkflow"><span class="hs-identifier">KnownWorkflow</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>  </span><span class="annot"><a href="Temporal.Workflow.Signal.html#SignalRef"><span class="hs-identifier">SignalRef</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>  </span><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowSignalDefinition"><span class="hs-identifier">WorkflowSignalDefinition</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-comment">-- , StartChildWorkflow(..)</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><a href="Temporal.Workflow.Definition.html#provideWorkflow"><span class="hs-identifier">provideWorkflow</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><a href="Temporal.Workflow.Definition.html#ProvidedWorkflow"><span class="hs-identifier">ProvidedWorkflow</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><a href="Temporal.Payload.html#GatherArgs"><span class="hs-identifier">GatherArgs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.IO.Class</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Kind</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Typeable</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Vector</span></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">RequireCallStack</span></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Temporal.Client.Types.html"><span class="hs-identifier">Temporal.Client.Types</span></a></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Temporal.Payload.html"><span class="hs-identifier">Temporal.Payload</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html"><span class="hs-identifier">Temporal.Workflow.Internal.Monad</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Temporal.Workflow.Signal.html"><span class="hs-identifier">Temporal.Workflow.Signal</span></a></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Temporal.Workflow.Types.html"><span class="hs-identifier">Temporal.Workflow.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Types.html#StartChildWorkflowOptions"><span class="hs-identifier">StartChildWorkflowOptions</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="annot"><span class="hs-comment">{- | This is a Workflow function that can be called from the outside world.

You can create a definition via 'Temporal.Workflow.provideWorkflow'.

To make a worker use this definition, you must add it to the 'WorkerConfig' via 'Temporal.Workflow.addWorkflow'.
-}</span></span><span>
</span><span id="line-49"></span><span class="hs-keyword">data</span><span> </span><span id="WorkflowDefinition"><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowDefinition"><span class="hs-identifier hs-var">WorkflowDefinition</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="WorkflowDefinition"><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowDefinition"><span class="hs-identifier hs-var">WorkflowDefinition</span></a></span></span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="workflowName"><span class="annot"><span class="annottext">WorkflowDefinition -&gt; Text
</span><a href="Temporal.Workflow.Definition.html#workflowName"><span class="hs-identifier hs-var hs-var">workflowName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="workflowRun"><span class="annot"><span class="annottext">WorkflowDefinition
-&gt; Vector Payload -&gt; IO (Either String (Workflow Payload))
</span><a href="Temporal.Workflow.Definition.html#workflowRun"><span class="hs-identifier hs-var hs-var">workflowRun</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Vector</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-keyword">class</span><span> </span><span id="WorkflowDef"><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowDef"><span class="hs-identifier hs-var">WorkflowDef</span></a></span></span><span> </span><span id="local-6989586621680173403"><span class="annot"><a href="#local-6989586621680173403"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-56"></span><span>  </span><span id="workflowDefinition"><span class="annot"><a href="Temporal.Workflow.Definition.html#workflowDefinition"><span class="hs-identifier hs-type">workflowDefinition</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680173403"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowDefinition"><span class="hs-identifier hs-type">WorkflowDefinition</span></a></span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowDef"><span class="hs-identifier hs-type">WorkflowDef</span></a></span><span> </span><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowDefinition"><span class="hs-identifier hs-type">WorkflowDefinition</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-60"></span><span>  </span><span id="local-6989586621680173485"><span class="annot"><span class="annottext">workflowDefinition :: WorkflowDefinition -&gt; WorkflowDefinition
</span><a href="Temporal.Workflow.Definition.html#workflowDefinition"><span class="hs-identifier hs-var hs-var hs-var">workflowDefinition</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WorkflowDefinition -&gt; WorkflowDefinition
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="hs-keyword">class</span><span> </span><span id="WorkflowRef"><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowRef"><span class="hs-identifier hs-var">WorkflowRef</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680173411"><span class="annot"><a href="#local-6989586621680173411"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="WorkflowArgs"><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowArgs"><span class="hs-identifier hs-var">WorkflowArgs</span></a></span></span><span> </span><span id="local-6989586621680173411"><span class="annot"><a href="#local-6989586621680173411"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="WorkflowResult"><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowResult"><span class="hs-identifier hs-var">WorkflowResult</span></a></span></span><span> </span><span id="local-6989586621680173411"><span class="annot"><a href="#local-6989586621680173411"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-66"></span><span>  </span><span id="workflowRef"><span class="annot"><a href="Temporal.Workflow.Definition.html#workflowRef"><span class="hs-identifier hs-type">workflowRef</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680173411"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Workflow.Definition.html#KnownWorkflow"><span class="hs-identifier hs-type">KnownWorkflow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowArgs"><span class="hs-identifier hs-type">WorkflowArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173411"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowResult"><span class="hs-identifier hs-type">WorkflowResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173411"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680173412"><span id="local-6989586621680173413"><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowRef"><span class="hs-identifier hs-type">WorkflowRef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Definition.html#KnownWorkflow"><span class="hs-identifier hs-type">KnownWorkflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173412"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173413"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="WorkflowArgs"><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowArgs"><span class="hs-identifier hs-var">WorkflowArgs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Definition.html#KnownWorkflow"><span class="hs-identifier hs-type">KnownWorkflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173412"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173413"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680173412"><span class="hs-identifier hs-type">args</span></a></span><span>
</span><span id="line-71"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="WorkflowResult"><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowResult"><span class="hs-identifier hs-var">WorkflowResult</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Definition.html#KnownWorkflow"><span class="hs-identifier hs-type">KnownWorkflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173412"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173413"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680173413"><span class="hs-identifier hs-type">result</span></a></span><span>
</span><span id="line-72"></span><span>  </span><span id="local-6989586621680173491"><span class="annot"><span class="annottext">workflowRef :: KnownWorkflow args result
-&gt; KnownWorkflow
     (WorkflowArgs (KnownWorkflow args result))
     (WorkflowResult (KnownWorkflow args result))
</span><a href="Temporal.Workflow.Definition.html#workflowRef"><span class="hs-identifier hs-var hs-var hs-var">workflowRef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KnownWorkflow args result -&gt; KnownWorkflow args result
KnownWorkflow args result
-&gt; KnownWorkflow
     (WorkflowArgs (KnownWorkflow args result))
     (WorkflowResult (KnownWorkflow args result))
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="annot"><span class="hs-comment">{- | A 'KnownWorkflow' is a handle that contains all the information needed to start a
Workflow either as a child workflow or as a top-level workflow via a 'Client'.
-}</span></span><span>
</span><span id="line-78"></span><span class="hs-keyword">data</span><span> </span><span id="KnownWorkflow"><span class="annot"><a href="Temporal.Workflow.Definition.html#KnownWorkflow"><span class="hs-identifier hs-var">KnownWorkflow</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680173414"><span class="annot"><a href="#local-6989586621680173414"><span class="hs-identifier hs-type">args</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680173415"><span class="annot"><a href="#local-6989586621680173415"><span class="hs-identifier hs-type">result</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680173493"><span class="annot"><a href="#local-6989586621680173493"><span class="hs-identifier hs-type">codec</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Temporal.Payload.html#FunctionSupportsCodec"><span class="hs-identifier hs-type">FunctionSupportsCodec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173493"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173414"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173415"><span class="hs-identifier hs-type">result</span></a></span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-81"></span><span>  </span><span id="KnownWorkflow"><span class="annot"><a href="Temporal.Workflow.Definition.html#KnownWorkflow"><span class="hs-identifier hs-var">KnownWorkflow</span></a></span></span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="knownWorkflowCodec"><span class="annot"><span class="annottext">()
</span><a href="Temporal.Workflow.Definition.html#knownWorkflowCodec"><span class="hs-identifier hs-var hs-var">knownWorkflowCodec</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680173493"><span class="hs-identifier hs-type">codec</span></a></span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="knownWorkflowName"><span class="annot"><span class="annottext">forall (args :: [*]) result. KnownWorkflow args result -&gt; Text
</span><a href="Temporal.Workflow.Definition.html#knownWorkflowName"><span class="hs-identifier hs-var hs-var">knownWorkflowName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-comment">-- gatherStartChildWorkflowArgs</span><span>
</span><span id="line-88"></span><span class="hs-comment">--   :: forall args result codec. GatherArgs codec args</span><span>
</span><span id="line-89"></span><span class="hs-comment">--   =&gt; codec</span><span>
</span><span id="line-90"></span><span class="hs-comment">--   -&gt; ([IO Payload] -&gt; Workflow (ChildWorkflowHandle result))</span><span>
</span><span id="line-91"></span><span class="hs-comment">--   -&gt; (args :-&gt;: Workflow (ChildWorkflowHandle result))</span><span>
</span><span id="line-92"></span><span class="hs-comment">-- gatherStartChildWorkflowArgs c f = gatherArgs (Proxy @args) c id f</span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="hs-keyword">data</span><span> </span><span id="ProvidedWorkflow"><span class="annot"><a href="Temporal.Workflow.Definition.html#ProvidedWorkflow"><span class="hs-identifier hs-var">ProvidedWorkflow</span></a></span></span><span> </span><span id="local-6989586621680173420"><span class="annot"><a href="#local-6989586621680173420"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ProvidedWorkflow"><span class="annot"><a href="Temporal.Workflow.Definition.html#ProvidedWorkflow"><span class="hs-identifier hs-var">ProvidedWorkflow</span></a></span></span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="definition"><span class="annot"><span class="annottext">forall f. ProvidedWorkflow f -&gt; WorkflowDefinition
</span><a href="Temporal.Workflow.Definition.html#definition"><span class="hs-identifier hs-var hs-var">definition</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowDefinition"><span class="hs-identifier hs-type">WorkflowDefinition</span></a></span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="reference"><span class="annot"><span class="annottext">forall f.
ProvidedWorkflow f
-&gt; KnownWorkflow (ArgsOf f) (ResultOf Workflow f)
</span><a href="Temporal.Workflow.Definition.html#reference"><span class="hs-identifier hs-var hs-var">reference</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Temporal.Workflow.Definition.html#KnownWorkflow"><span class="hs-identifier hs-type">KnownWorkflow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-type">ArgsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173420"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ResultOf"><span class="hs-identifier hs-type">ResultOf</span></a></span><span> </span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173420"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680173427"><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowDef"><span class="hs-identifier hs-type">WorkflowDef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Definition.html#ProvidedWorkflow"><span class="hs-identifier hs-type">ProvidedWorkflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173427"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-101"></span><span>  </span><span class="annot"><a href="Temporal.Workflow.Definition.html#workflowDefinition"><span class="hs-identifier hs-type">workflowDefinition</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Temporal.Workflow.Definition.html#ProvidedWorkflow"><span class="hs-identifier hs-type">ProvidedWorkflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173427"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowDefinition"><span class="hs-identifier hs-type">WorkflowDefinition</span></a></span><span>
</span><span id="line-102"></span><span>  </span><span id="local-6989586621680173502"><span class="annot"><span class="annottext">workflowDefinition :: ProvidedWorkflow f -&gt; WorkflowDefinition
</span><a href="Temporal.Workflow.Definition.html#workflowDefinition"><span class="hs-identifier hs-var hs-var hs-var">workflowDefinition</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProvidedWorkflow f -&gt; WorkflowDefinition
forall f. ProvidedWorkflow f -&gt; WorkflowDefinition
</span><a href="Temporal.Workflow.Definition.html#definition"><span class="hs-identifier hs-var">definition</span></a></span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680173430"><span class="annot"><a href="Temporal.Payload.html#VarArgs"><span class="hs-identifier hs-type">VarArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-type">ArgsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173430"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowRef"><span class="hs-identifier hs-type">WorkflowRef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Definition.html#ProvidedWorkflow"><span class="hs-identifier hs-type">ProvidedWorkflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173430"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="WorkflowArgs"><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowArgs"><span class="hs-identifier hs-var">WorkflowArgs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Definition.html#ProvidedWorkflow"><span class="hs-identifier hs-type">ProvidedWorkflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173430"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-type">ArgsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173430"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="WorkflowResult"><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowResult"><span class="hs-identifier hs-var">WorkflowResult</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Definition.html#ProvidedWorkflow"><span class="hs-identifier hs-type">ProvidedWorkflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173430"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Payload.html#ResultOf"><span class="hs-identifier hs-type">ResultOf</span></a></span><span> </span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173430"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-108"></span><span>  </span><span class="annot"><a href="Temporal.Workflow.Definition.html#workflowRef"><span class="hs-identifier hs-type">workflowRef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Temporal.Workflow.Definition.html#ProvidedWorkflow"><span class="hs-identifier hs-type">ProvidedWorkflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173430"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Workflow.Definition.html#KnownWorkflow"><span class="hs-identifier hs-type">KnownWorkflow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowArgs"><span class="hs-identifier hs-type">WorkflowArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Definition.html#ProvidedWorkflow"><span class="hs-identifier hs-type">ProvidedWorkflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173430"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowResult"><span class="hs-identifier hs-type">WorkflowResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Definition.html#ProvidedWorkflow"><span class="hs-identifier hs-type">ProvidedWorkflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173430"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>  </span><span id="local-6989586621680173506"><span class="annot"><span class="annottext">workflowRef :: ProvidedWorkflow f
-&gt; KnownWorkflow
     (WorkflowArgs (ProvidedWorkflow f))
     (WorkflowResult (ProvidedWorkflow f))
</span><a href="Temporal.Workflow.Definition.html#workflowRef"><span class="hs-identifier hs-var hs-var hs-var">workflowRef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProvidedWorkflow f
-&gt; KnownWorkflow (ArgsOf f) (ResultOf Workflow f)
ProvidedWorkflow f
-&gt; KnownWorkflow
     (WorkflowArgs (ProvidedWorkflow f))
     (WorkflowResult (ProvidedWorkflow f))
forall f.
ProvidedWorkflow f
-&gt; KnownWorkflow (ArgsOf f) (ResultOf Workflow f)
</span><a href="Temporal.Workflow.Definition.html#reference"><span class="hs-identifier hs-var">reference</span></a></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span class="annot"><span class="hs-comment">{- | A utility function for constructing a 'WorkflowDefinition' from a function as well as
a 'KnownWorkflow' value. This is useful for keeping the argument, codec, and result types
in sync with each other so that changes to the function are reflected at their use sites.

&gt; myWorkflow :: Workflow () () Int
&gt; myWorkflow = pure 1
&gt;
&gt; myWorkflowDef :: ProvidedWorkflow () () Int
&gt; myWorkflowDef = provideWorkflow
&gt;   JSON -- codec
&gt;   @&quot;myWorkflow&quot; -- visible name of the workflow
&gt;   () -- initial state
&gt;   myWorkflow -- the workflow function
-}</span></span><span>
</span><span id="line-126"></span><span class="annot"><a href="Temporal.Workflow.Definition.html#provideWorkflow"><span class="hs-identifier hs-type">provideWorkflow</span></a></span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680173433"><span class="annot"><a href="#local-6989586621680173433"><span class="hs-identifier hs-type">codec</span></a></span></span><span> </span><span id="local-6989586621680173431"><span class="annot"><a href="#local-6989586621680173431"><span class="hs-identifier hs-type">f</span></a></span></span><span>
</span><span id="line-128"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="#local-6989586621680173431"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-type">ArgsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173431"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ResultOf"><span class="hs-identifier hs-type">ResultOf</span></a></span><span> </span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173431"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Temporal.Payload.html#FunctionSupportsCodec"><span class="hs-identifier hs-type">FunctionSupportsCodec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173433"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-type">ArgsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173431"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ResultOf"><span class="hs-identifier hs-type">ResultOf</span></a></span><span> </span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173431"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680173433"><span class="hs-identifier hs-type">codec</span></a></span><span>
</span><span id="line-132"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-133"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">RequireCallStackImpl</span></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680173431"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Workflow.Definition.html#ProvidedWorkflow"><span class="hs-identifier hs-type">ProvidedWorkflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173431"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-135"></span><span id="provideWorkflow"><span class="annot"><span class="annottext">provideWorkflow :: forall codec f.
(f ~ (ArgsOf f :-&gt;: Workflow (ResultOf Workflow f)),
 FunctionSupportsCodec codec (ArgsOf f) (ResultOf Workflow f)) =&gt;
codec -&gt; Text -&gt; (RequireCallStackImpl =&gt; f) -&gt; ProvidedWorkflow f
</span><a href="Temporal.Workflow.Definition.html#provideWorkflow"><span class="hs-identifier hs-var hs-var">provideWorkflow</span></a></span></span><span> </span><span id="local-6989586621680173513"><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680173513"><span class="hs-identifier hs-var">codec</span></a></span></span><span> </span><span id="local-6989586621680173514"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680173514"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680173515"><span class="annot"><span class="annottext">RequireCallStackImpl =&gt; f
</span><a href="#local-6989586621680173515"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-136"></span><span>  </span><span class="annot"><span class="annottext">(RequireCallStackImpl =&gt; ProvidedWorkflow f) -&gt; ProvidedWorkflow f
forall r. (RequireCallStackImpl =&gt; r) -&gt; r
</span><span class="hs-identifier hs-var">provideCallStack</span></span><span> </span><span class="annot"><span class="annottext">((RequireCallStackImpl =&gt; ProvidedWorkflow f)
 -&gt; ProvidedWorkflow f)
-&gt; (RequireCallStackImpl =&gt; ProvidedWorkflow f)
-&gt; ProvidedWorkflow f
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-137"></span><span>    </span><span class="annot"><a href="Temporal.Workflow.Definition.html#ProvidedWorkflow"><span class="hs-identifier hs-type">ProvidedWorkflow</span></a></span><span>
</span><span id="line-138"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">definition :: WorkflowDefinition
</span><a href="Temporal.Workflow.Definition.html#definition"><span class="hs-identifier hs-var">definition</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-139"></span><span>          </span><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowDefinition"><span class="hs-identifier hs-type">WorkflowDefinition</span></a></span><span>
</span><span id="line-140"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">workflowName :: Text
</span><a href="Temporal.Workflow.Definition.html#workflowName"><span class="hs-identifier hs-var">workflowName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680173514"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-141"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">workflowRun :: Vector Payload -&gt; IO (Either String (Workflow Payload))
</span><a href="Temporal.Workflow.Definition.html#workflowRun"><span class="hs-identifier hs-var">workflowRun</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680173535"><span class="annot"><span class="annottext">Vector Payload
</span><a href="#local-6989586621680173535"><span class="hs-identifier hs-var">payloads</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-142"></span><span>                </span><span id="local-6989586621680173536"><span class="annot"><a href="#local-6989586621680173536"><span class="hs-identifier hs-var">eWf</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-143"></span><span>                  </span><span class="annot"><span class="annottext">codec
-&gt; Proxy (ArgsOf f)
-&gt; Proxy (Workflow (ResultOf Workflow f))
-&gt; (ArgsOf f :-&gt;: Workflow (ResultOf Workflow f))
-&gt; Vector Payload
-&gt; IO (Either String (Workflow (ResultOf Workflow f)))
forall result.
codec
-&gt; Proxy (ArgsOf f)
-&gt; Proxy result
-&gt; (ArgsOf f :-&gt;: result)
-&gt; Vector Payload
-&gt; IO (Either String result)
forall codec (args :: [*]) result.
ApplyPayloads codec args =&gt;
codec
-&gt; Proxy args
-&gt; Proxy result
-&gt; (args :-&gt;: result)
-&gt; Vector Payload
-&gt; IO (Either String result)
</span><a href="Temporal.Payload.html#applyPayloads"><span class="hs-identifier hs-var">applyPayloads</span></a></span><span>
</span><span id="line-144"></span><span>                    </span><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680173513"><span class="hs-identifier hs-var">codec</span></a></span><span>
</span><span id="line-145"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: [*]). Proxy t
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-type">ArgsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173431"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ResultOf"><span class="hs-identifier hs-type">ResultOf</span></a></span><span> </span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173431"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>                    </span><span class="annot"><span class="annottext">f
ArgsOf f :-&gt;: Workflow (ResultOf Workflow f)
RequireCallStackImpl =&gt; f
</span><a href="#local-6989586621680173515"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-148"></span><span>                    </span><span class="annot"><span class="annottext">Vector Payload
</span><a href="#local-6989586621680173535"><span class="hs-identifier hs-var">payloads</span></a></span><span>
</span><span id="line-149"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680173539"><span class="annot"><span class="annottext">Workflow (ResultOf Workflow f)
</span><a href="#local-6989586621680173539"><span class="hs-identifier hs-var">wf</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Workflow (ResultOf Workflow f)
</span><a href="#local-6989586621680173539"><span class="hs-identifier hs-var">wf</span></a></span><span> </span><span class="annot"><span class="annottext">Workflow (ResultOf Workflow f)
-&gt; (ResultOf Workflow f -&gt; Workflow Payload) -&gt; Workflow Payload
forall a b. Workflow a -&gt; (a -&gt; Workflow b) -&gt; Workflow b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680173540"><span class="annot"><span class="annottext">ResultOf Workflow f
</span><a href="#local-6989586621680173540"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">InstanceM Payload -&gt; Workflow Payload
forall a. RequireCallStack =&gt; InstanceM a -&gt; Workflow a
</span><a href="Temporal.Workflow.Internal.Monad.html#ilift"><span class="hs-identifier hs-var">ilift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IO Payload -&gt; InstanceM Payload
forall a. IO a -&gt; InstanceM a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO Payload -&gt; InstanceM Payload)
-&gt; IO Payload -&gt; InstanceM Payload
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">codec -&gt; ResultOf Workflow f -&gt; IO Payload
forall fmt a. Codec fmt a =&gt; fmt -&gt; a -&gt; IO Payload
</span><a href="Temporal.Payload.html#encode"><span class="hs-identifier hs-var">encode</span></a></span><span> </span><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680173513"><span class="hs-identifier hs-var">codec</span></a></span><span> </span><span class="annot"><span class="annottext">ResultOf Workflow f
</span><a href="#local-6989586621680173540"><span class="hs-identifier hs-var">result</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680173536"><span class="hs-identifier hs-type">eWf</span></a></span><span>
</span><span id="line-150"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-151"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reference :: KnownWorkflow (ArgsOf f) (ResultOf Workflow f)
</span><a href="Temporal.Workflow.Definition.html#reference"><span class="hs-identifier hs-var">reference</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-152"></span><span>          </span><span class="annot"><a href="Temporal.Workflow.Definition.html#KnownWorkflow"><span class="hs-identifier hs-type">KnownWorkflow</span></a></span><span>
</span><span id="line-153"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">knownWorkflowCodec :: codec
</span><a href="Temporal.Workflow.Definition.html#knownWorkflowCodec"><span class="hs-identifier hs-var">knownWorkflowCodec</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680173513"><span class="hs-identifier hs-var">codec</span></a></span><span>
</span><span id="line-154"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">knownWorkflowName :: Text
</span><a href="Temporal.Workflow.Definition.html#knownWorkflowName"><span class="hs-identifier hs-var">knownWorkflowName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680173514"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-155"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-156"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="annot"><span class="hs-comment">{- |
A Signal is an asynchronous request to a Workflow Execution.

A Signal delivers data to a running Workflow Execution. It cannot return data to the caller;
to do so, use a Query instead. The Workflow code that handles a Signal can mutate Workflow state.
A Signal can be sent from a Temporal Client or a Workflow.
When a Signal is sent, it is received by the Cluster and recorded as an Event to the Workflow Execution Event History.
A successful response from the Cluster means that the Signal has been persisted and will be delivered at least once to
the Workflow Execution.

A Signal must include a destination (Namespace and Workflow Id) and name. It can include a list of arguments.

Signal handlers are Workflow functions that listen for Signals by the Signal name.
Signals are delivered in the order they are received by the Cluster.
If multiple deliveries of a Signal would be a problem for your Workflow, add idempotency logic to your Signal handler
that checks for duplicates.
-}</span></span><span>
</span><span id="line-176"></span><span class="hs-keyword">data</span><span> </span><span id="WorkflowSignalDefinition"><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowSignalDefinition"><span class="hs-identifier hs-var">WorkflowSignalDefinition</span></a></span></span><span>
</span><span id="line-177"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680173544"><span class="annot"><a href="#local-6989586621680173544"><span class="hs-identifier hs-type">codec</span></a></span></span><span> </span><span id="local-6989586621680173545"><span class="annot"><a href="#local-6989586621680173545"><span class="hs-identifier hs-type">f</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#FunctionSupportsCodec"><span class="hs-identifier hs-type">FunctionSupportsCodec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173544"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-type">ArgsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173545"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ResultOf"><span class="hs-identifier hs-type">ResultOf</span></a></span><span> </span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173545"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Temporal.Payload.html#ResultOf"><span class="hs-identifier hs-type">ResultOf</span></a></span><span> </span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680173545"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-179"></span><span>    </span><span id="WorkflowSignalDefinition"><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowSignalDefinition"><span class="hs-identifier hs-var">WorkflowSignalDefinition</span></a></span></span><span>
</span><span id="line-180"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-comment">-- name</span><span>
</span><span id="line-181"></span><span>      </span><span class="annot"><a href="#local-6989586621680173544"><span class="hs-identifier hs-type">codec</span></a></span><span>
</span><span id="line-182"></span><span>      </span><span class="annot"><a href="#local-6989586621680173545"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-183"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680173545"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Vector</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#Payload"><span class="hs-identifier hs-type">Payload</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-comment">-- { workflowSignalName :: Text</span><span>
</span><span id="line-186"></span><span class="hs-comment">-- , workflowSignalHandler :: [Payload] -&gt; IO ()</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- }</span><span>
</span><span id="line-188"></span></pre></body></html>