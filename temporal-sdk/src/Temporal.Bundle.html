<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ConstraintKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE PolyKinds #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilyDependencies #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE UndecidableSuperClasses #-}</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="annot"><span class="hs-comment">{- |
Module: Temporal.Bundle
Description: Utilities to define and reference workflows and activities using records.

Define and reference workflows and activities using records.

The usage of this module is best explained by example. First, define a record type
that contains all of the workflows and activities that you want to define:

@
data EmailWorkflowsB t f = Workflows
 { emailNewUser :: Wear t f (Int -&gt; Workflow ())
 , sendEmail :: Wear t f (String -&gt; Activity () ())
 , emailPasswordReset :: Wear t f (String -&gt; Workflow ())
 } deriving (Generic)

type EmailWorkflows = EmailWorkflowsB Bare Identity
type EmailWorkflowsH = EmailWorkflowsB Covered
@

We define all of our fields using the 'Wear' type, which is a type family
that lets us convert fields from their direct function definitions into
versions that are wrapped in a functor.

Next, we will need some boilerplate instances for this type:

@
instance FunctorB (EmailWorkflowsB Covered)
instance TraversableB (EmailWorkflowsB Covered)
instance ApplicativeB (EmailWorkflowsB Covered)
instance ConstraintsB (EmailWorkflowsB Covered)
instance BareB EmailWorkflowsB
instance Label (EmailWorkflowsB Covered)
@

As an alternative to using 'Generic' and deriving these instances, you can use
'Temporal.Bundle.TH' to generate them for you. With this style, you don't have
to introduce the type parameters manually:

@
import Temporal.Bundle.TH

passthroughBareB [d|
  data EmailWorkflows = Workflows
    { emailNewUser :: Int -&gt; Workflow ()
    , sendEmail :: String -&gt; Activity () ()
    , emailPasswordReset :: String -&gt; Workflow ()
    }
  |]
@

This will generate the same instances as the manual version above,
with the following type synonyms:

@
data EmailWorkflowsB = Workflows {..}
type EmailWorkflows = EmailWorkflowsB Bare Identity
type EmailWorkflowsH = EmailWorkflowsB Covered
@

Now that we have our record type, we can turn it into references and definitions:

Using 'refs', we can use our record type to provide references to our workflows and activities.
References are essentially identifiers that we can use across application / process boundaries
to invoke our workflows and activities with Temporal.

@
wfRefs :: Refs EmailWorkflowsB
wfRefs = refs JSON workflowsImpl
@

Now, we can implement our workflows and activities:

@
workflowsImpl :: EmailWorkflows
workflowsImpl = Workflows
  { emailNewUser = \userId -&gt; provideCallStack $ do
      h &lt;- startActivity
        wfRefs.sendEmail -- &lt;=== Note how we can reference other workflows and activities using the refs we defined above
        (defaultStartActivityOptions $ ScheduleToClose $ TimeSpec 0 0)
        &quot;foo&quot;
      wait h
  , sendEmail = \email -&gt; do
      pure ()
  , emailPasswordReset = \email -&gt; do
      pure ()
  }
@

Lastly, we want a way to register our workflows and activities with the Temporal worker:

@
workerConfigFromRecord = defsToConfig $ defs JSON workflowsImpl
@

This will produce a 'ConfigM' that we can use to register our workflows and activities with the Temporal worker
as part of a larger 'ConfigM' that we pass to 'startWorker'.
-}</span></span><span>
</span><span id="line-112"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Temporal.Bundle.html"><span class="hs-identifier">Temporal.Bundle</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-113"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Turning implementations into references and definitions</span></span><span>
</span><span id="line-114"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#refs"><span class="hs-identifier">refs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-115"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#Refs"><span class="hs-identifier">Refs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-116"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#Ref"><span class="hs-identifier">Ref</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-117"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#defs"><span class="hs-identifier">defs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-118"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#Defs"><span class="hs-identifier">Defs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-119"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#Def"><span class="hs-identifier">Def</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-120"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#collectTemporalDefinitions"><span class="hs-identifier">collectTemporalDefinitions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-121"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#Impl"><span class="hs-identifier">Impl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-122"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#inWorkflowProxies"><span class="hs-identifier">inWorkflowProxies</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-123"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#InWorkflowProxies"><span class="hs-identifier">InWorkflowProxies</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-124"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#InWorkflowProxyOptions"><span class="hs-identifier">InWorkflowProxyOptions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-125"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#RefStartOptions"><span class="hs-identifier">RefStartOptions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-126"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#UseAsInWorkflowProxy"><span class="hs-identifier">UseAsInWorkflowProxy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-127"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#provideDefaultOptions"><span class="hs-identifier">provideDefaultOptions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-128"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#FieldToStartOptionDefaults"><span class="hs-identifier">FieldToStartOptionDefaults</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-129"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#RefStartOptionsType"><span class="hs-identifier">RefStartOptionsType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Worker management</span></span><span>
</span><span id="line-132"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#withTaskQueues"><span class="hs-identifier">withTaskQueues</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-133"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#linkTaskQueues"><span class="hs-identifier">linkTaskQueues</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-134"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#startTaskQueues"><span class="hs-identifier">startTaskQueues</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-135"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#shutdownTaskQueues"><span class="hs-identifier">shutdownTaskQueues</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-136"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#WorkerConfigs"><span class="hs-identifier">WorkerConfigs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-137"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#Workers"><span class="hs-identifier">Workers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Other utilities</span></span><span>
</span><span id="line-140"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#coerceRec"><span class="hs-identifier">coerceRec</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-141"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#Equate"><span class="hs-identifier">Equate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-142"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#ProxySync"><span class="hs-identifier">ProxySync</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-143"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#ProxyAsync"><span class="hs-identifier">ProxyAsync</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Reexports</span></span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Constraints</span></span><span>
</span><span id="line-148"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#CanUseAsRefs"><span class="hs-identifier">CanUseAsRefs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-149"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#CanUseAsDefs"><span class="hs-identifier">CanUseAsDefs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-150"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#RefFromFunction"><span class="hs-identifier">RefFromFunction</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-151"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#RefFromFunction%27"><span class="hs-identifier">RefFromFunction'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-152"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#DefFromFunction"><span class="hs-identifier">DefFromFunction</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-153"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#DefFromFunction%27"><span class="hs-identifier">DefFromFunction'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-154"></span><span>  </span><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowRef"><span class="hs-identifier">WorkflowRef</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-155"></span><span>  </span><span class="annot"><a href="Temporal.Activity.Definition.html#ActivityRef"><span class="hs-identifier">ActivityRef</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-156"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#InnerActivityResult"><span class="hs-identifier">InnerActivityResult</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-157"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#ApplyDef"><span class="hs-identifier">ApplyDef</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-158"></span><span>  </span><span class="annot"><a href="Temporal.Bundle.html#ApplyRef"><span class="hs-identifier">ApplyRef</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-159"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>
</span><span id="line-162"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Catch</span></span><span>
</span><span id="line-163"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Logger</span></span><span>
</span><span id="line-164"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Reader</span></span><span>
</span><span id="line-165"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.EvalRecord.html"><span class="hs-identifier">Data.EvalRecord</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-166"></span><span>  </span><span class="annot"><a href="Data.EvalRecord.html#AllRec"><span class="hs-identifier">AllRec</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-167"></span><span>  </span><span class="annot"><a href="Data.EvalRecord.html#ApplicativeRec"><span class="hs-identifier">ApplicativeRec</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-168"></span><span>  </span><span class="annot"><a href="Data.EvalRecord.html#ConstraintsRec"><span class="hs-identifier">ConstraintsRec</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-169"></span><span>  </span><span class="annot"><a href="Data.EvalRecord.html#TraversableRec"><span class="hs-identifier">TraversableRec</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-170"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Data.EvalRecord.html"><span class="hs-identifier">Data.EvalRecord</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Rec</span></span><span>
</span><span id="line-172"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Kind</span></span><span>
</span><span id="line-173"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Proxy</span></span><span>
</span><span id="line-174"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-175"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Fcf</span></span><span>
</span><span id="line-176"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.TypeLits</span></span><span>
</span><span id="line-177"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">RequireCallStack</span></span><span>
</span><span id="line-178"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Temporal.Activity.html"><span class="hs-identifier">Temporal.Activity</span></a></span><span>
</span><span id="line-179"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Temporal.Activity.Definition.html"><span class="hs-identifier">Temporal.Activity.Definition</span></a></span><span>
</span><span id="line-180"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Temporal.Common.Async.html"><span class="hs-identifier">Temporal.Common.Async</span></a></span><span>
</span><span id="line-181"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Temporal.Core.Client</span></span><span>
</span><span id="line-182"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Temporal.Payload.html"><span class="hs-identifier">Temporal.Payload</span></a></span><span>
</span><span id="line-183"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Temporal.Worker.html"><span class="hs-identifier">Temporal.Worker</span></a></span><span>
</span><span id="line-184"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Temporal.Workflow.html"><span class="hs-identifier">Temporal.Workflow</span></a></span><span>
</span><span id="line-185"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html"><span class="hs-identifier">Temporal.Workflow.Internal.Monad</span></a></span><span>
</span><span id="line-186"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Temporal.Workflow.Types.html"><span class="hs-identifier">Temporal.Workflow.Types</span></a></span><span>
</span><span id="line-187"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">UnliftIO</span></span><span>
</span><span id="line-188"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unsafe.Coerce</span></span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="ApplyRef"><span class="annot"><a href="Temporal.Bundle.html#ApplyRef"><span class="hs-identifier hs-var">ApplyRef</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680195191"><span class="annot"><a href="#local-6989586621680195191"><span class="hs-identifier hs-type">original</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680195192"><span class="annot"><a href="#local-6989586621680195192"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-192"></span><span>  </span><span id="ApplyRef"><span class="annot"><a href="Temporal.Bundle.html#ApplyRef"><span class="hs-identifier hs-var">ApplyRef</span></a></span></span><span> </span><span id="local-6989586621680195193"><span id="local-6989586621680195194"><span class="annot"><a href="#local-6989586621680195193"><span class="hs-identifier hs-type">original</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195194"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Workflow.Definition.html#KnownWorkflow"><span class="hs-identifier hs-type">KnownWorkflow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-type">ArgsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195193"><span class="hs-identifier hs-type">original</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680195194"><span class="hs-identifier hs-type">result</span></a></span><span>
</span><span id="line-193"></span><span>  </span><span id="ApplyRef"><span class="annot"><a href="Temporal.Bundle.html#ApplyRef"><span class="hs-identifier hs-var">ApplyRef</span></a></span></span><span> </span><span id="local-6989586621680195195"><span id="local-6989586621680195196"><span class="annot"><a href="#local-6989586621680195195"><span class="hs-identifier hs-type">original</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Activity.Definition.html#Activity"><span class="hs-identifier hs-type">Activity</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="#local-6989586621680195196"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Activity.Definition.html#KnownActivity"><span class="hs-identifier hs-type">KnownActivity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-type">ArgsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195195"><span class="hs-identifier hs-type">original</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680195196"><span class="hs-identifier hs-type">result</span></a></span><span>
</span><span id="line-194"></span><span>  </span><span id="ApplyRef"><span class="annot"><a href="Temporal.Bundle.html#ApplyRef"><span class="hs-identifier hs-var">ApplyRef</span></a></span></span><span> </span><span id="local-6989586621680195197"><span id="local-6989586621680195198"><span class="annot"><a href="#local-6989586621680195197"><span class="hs-identifier hs-type">original</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195198"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#ApplyRef"><span class="hs-identifier hs-type">ApplyRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195197"><span class="hs-identifier hs-type">original</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195198"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-195"></span><span>  </span><span id="ApplyRef"><span class="annot"><a href="Temporal.Bundle.html#ApplyRef"><span class="hs-identifier hs-var">ApplyRef</span></a></span></span><span> </span><span id="local-6989586621680195199"><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="#local-6989586621680195199"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeError</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Expected a Workflow or Activity, but got &quot;</span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:&lt;&gt;:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">ShowType</span></span><span> </span><span class="annot"><a href="#local-6989586621680195199"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span class="annot"><span class="hs-comment">{- | A reference to a workflow or activity.

Depending on whether the result monad is 'Workflow' or 'Activity',
the 'Eval' instance will resolve to either a 'KnownWorkflow' or 'KnownActivity'.
-}</span></span><span>
</span><span id="line-203"></span><span class="hs-keyword">data</span><span> </span><span id="Ref"><span class="annot"><a href="Temporal.Bundle.html#Ref"><span class="hs-identifier hs-var">Ref</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Eval"><span class="annot"><span class="hs-identifier hs-var">Eval</span></span></span><span> </span><span id="local-6989586621680195204"><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#Ref"><span class="hs-identifier hs-type">Ref</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195204"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#ApplyRef"><span class="hs-identifier hs-type">ApplyRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195204"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195204"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="ApplyDef"><span class="annot"><a href="Temporal.Bundle.html#ApplyDef"><span class="hs-identifier hs-var">ApplyDef</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680195205"><span class="annot"><a href="#local-6989586621680195205"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-210"></span><span>  </span><span id="ApplyDef"><span class="annot"><a href="Temporal.Bundle.html#ApplyDef"><span class="hs-identifier hs-var">ApplyDef</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowDefinition"><span class="hs-identifier hs-type">WorkflowDefinition</span></a></span><span>
</span><span id="line-211"></span><span>  </span><span id="ApplyDef"><span class="annot"><a href="Temporal.Bundle.html#ApplyDef"><span class="hs-identifier hs-var">ApplyDef</span></a></span></span><span> </span><span id="local-6989586621680195206"><span class="hs-special">(</span><span class="annot"><a href="Temporal.Activity.Definition.html#Activity"><span class="hs-identifier hs-type">Activity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195206"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Activity.Definition.html#ActivityDefinition"><span class="hs-identifier hs-type">ActivityDefinition</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195206"><span class="hs-identifier hs-type">env</span></a></span><span>
</span><span id="line-212"></span><span>  </span><span id="ApplyDef"><span class="annot"><a href="Temporal.Bundle.html#ApplyDef"><span class="hs-identifier hs-var">ApplyDef</span></a></span></span><span> </span><span id="local-6989586621680195207"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195207"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#ApplyDef"><span class="hs-identifier hs-type">ApplyDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195207"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-213"></span><span>  </span><span id="ApplyDef"><span class="annot"><a href="Temporal.Bundle.html#ApplyDef"><span class="hs-identifier hs-var">ApplyDef</span></a></span></span><span> </span><span id="local-6989586621680195208"><span class="annot"><a href="#local-6989586621680195208"><span class="hs-identifier hs-type hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeError</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Expected a Workflow or Activity, but got &quot;</span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:&lt;&gt;:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">ShowType</span></span><span> </span><span class="annot"><a href="#local-6989586621680195208"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="hs-keyword">data</span><span> </span><span id="Def"><span class="annot"><a href="Temporal.Bundle.html#Def"><span class="hs-identifier hs-var">Def</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Eval"><span class="annot"><span class="hs-identifier hs-var">Eval</span></span></span><span> </span><span id="local-6989586621680195209"><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="#local-6989586621680195209"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#ApplyDef"><span class="hs-identifier hs-type">ApplyDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195209"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="InnerActivityResult"><span class="annot"><a href="Temporal.Bundle.html#InnerActivityResult"><span class="hs-identifier hs-var">InnerActivityResult</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680195210"><span class="annot"><a href="#local-6989586621680195210"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-223"></span><span>  </span><span id="InnerActivityResult"><span class="annot"><a href="Temporal.Bundle.html#InnerActivityResult"><span class="hs-identifier hs-var">InnerActivityResult</span></a></span></span><span> </span><span id="local-6989586621680195211"><span class="hs-special">(</span><span class="annot"><a href="Temporal.Activity.Definition.html#Activity"><span class="hs-identifier hs-type">Activity</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="#local-6989586621680195211"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680195211"><span class="hs-identifier hs-type">result</span></a></span><span>
</span><span id="line-224"></span><span>  </span><span id="InnerActivityResult"><span class="annot"><a href="Temporal.Bundle.html#InnerActivityResult"><span class="hs-identifier hs-var">InnerActivityResult</span></a></span></span><span> </span><span id="local-6989586621680195212"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195212"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#InnerActivityResult"><span class="hs-identifier hs-type">InnerActivityResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195212"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-225"></span><span>  </span><span id="InnerActivityResult"><span class="annot"><a href="Temporal.Bundle.html#InnerActivityResult"><span class="hs-identifier hs-var">InnerActivityResult</span></a></span></span><span> </span><span id="local-6989586621680195213"><span class="annot"><a href="#local-6989586621680195213"><span class="hs-identifier hs-type hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeError</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Expected an Activity, but got &quot;</span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:&lt;&gt;:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">ShowType</span></span><span> </span><span class="annot"><a href="#local-6989586621680195213"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="hs-keyword">class</span><span> </span><span id="RefFromFunction%27"><span class="annot"><a href="Temporal.Bundle.html#RefFromFunction%27"><span class="hs-identifier hs-var">RefFromFunction'</span></a></span></span><span> </span><span id="local-6989586621680194769"><span class="annot"><a href="#local-6989586621680194769"><span class="hs-identifier hs-type">codec</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680194768"><span class="annot"><a href="#local-6989586621680194768"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680194770"><span class="annot"><a href="#local-6989586621680194770"><span class="hs-identifier hs-type">original</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-229"></span><span>  </span><span id="refFromFunction"><span class="annot"><a href="Temporal.Bundle.html#refFromFunction"><span class="hs-identifier hs-type">refFromFunction</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621680194768"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680194769"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621680194770"><span class="hs-identifier hs-type">original</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Ref"><span class="hs-identifier hs-type">Ref</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680194770"><span class="hs-identifier hs-type">original</span></a></span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-233"></span><span>  </span><span id="local-6989586621680194771"><span id="local-6989586621680194772"><span id="local-6989586621680194773"><span class="hs-special">(</span><span> </span><span class="annot"><a href="Temporal.Payload.html#FunctionSupportsCodec%27"><span class="hs-identifier hs-type">FunctionSupportsCodec'</span></a></span><span> </span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194771"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194772"><span class="hs-identifier hs-type">original</span></a></span><span>
</span><span id="line-234"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Ref"><span class="hs-identifier hs-type">Ref</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680194772"><span class="hs-identifier hs-type">original</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="Temporal.Workflow.Definition.html#KnownWorkflow"><span class="hs-identifier hs-type">KnownWorkflow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-type">ArgsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194772"><span class="hs-identifier hs-type">original</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ResultOf"><span class="hs-identifier hs-type">ResultOf</span></a></span><span> </span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194772"><span class="hs-identifier hs-type">original</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#RefFromFunction%27"><span class="hs-identifier hs-type">RefFromFunction'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194771"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194773"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680194772"><span class="hs-identifier hs-type">original</span></a></span></span></span></span><span>
</span><span id="line-237"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-238"></span><span>  </span><span id="local-6989586621680195224"><span class="annot"><span class="annottext">refFromFunction :: Proxy (Workflow result)
-&gt; codec -&gt; String -&gt; Proxy original -&gt; Ref @@ original
</span><a href="Temporal.Bundle.html#refFromFunction"><span class="hs-identifier hs-var hs-var hs-var">refFromFunction</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (Workflow result)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680195225"><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680195225"><span class="hs-identifier hs-var">codec</span></a></span></span><span> </span><span id="local-6989586621680195226"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680195226"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy original
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">codec
-&gt; Text
-&gt; KnownWorkflow (ArgsOf original) (ResultOf Workflow original)
forall (args :: [*]) result codec.
FunctionSupportsCodec codec args result =&gt;
codec -&gt; Text -&gt; KnownWorkflow args result
</span><a href="Temporal.Workflow.Definition.html#KnownWorkflow"><span class="hs-identifier hs-var">KnownWorkflow</span></a></span><span> </span><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680195225"><span class="hs-identifier hs-var">codec</span></a></span><span> </span><span class="annot"><span class="annottext">(Text
 -&gt; KnownWorkflow (ArgsOf original) (ResultOf Workflow original))
-&gt; Text
-&gt; KnownWorkflow (ArgsOf original) (ResultOf Workflow original)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680195226"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-242"></span><span>  </span><span id="local-6989586621680194797"><span id="local-6989586621680194798"><span id="local-6989586621680194799"><span id="local-6989586621680194800"><span class="hs-special">(</span><span> </span><span class="annot"><a href="Temporal.Payload.html#FunctionSupportsCodec%27"><span class="hs-identifier hs-type">FunctionSupportsCodec'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Activity.Definition.html#Activity"><span class="hs-identifier hs-type">Activity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194797"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680194798"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194799"><span class="hs-identifier hs-type">original</span></a></span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Ref"><span class="hs-identifier hs-type">Ref</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680194799"><span class="hs-identifier hs-type">original</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="Temporal.Activity.Definition.html#KnownActivity"><span class="hs-identifier hs-type">KnownActivity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-type">ArgsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194799"><span class="hs-identifier hs-type">original</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ResultOf"><span class="hs-identifier hs-type">ResultOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Activity.Definition.html#Activity"><span class="hs-identifier hs-type">Activity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194797"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680194799"><span class="hs-identifier hs-type">original</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-244"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#RefFromFunction%27"><span class="hs-identifier hs-type">RefFromFunction'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194798"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Activity.Definition.html#Activity"><span class="hs-identifier hs-type">Activity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194797"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194800"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680194799"><span class="hs-identifier hs-type">original</span></a></span></span></span></span></span><span>
</span><span id="line-246"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-247"></span><span>  </span><span id="local-6989586621680195236"><span class="annot"><span class="annottext">refFromFunction :: Proxy (Activity env result)
-&gt; codec -&gt; String -&gt; Proxy original -&gt; Ref @@ original
</span><a href="Temporal.Bundle.html#refFromFunction"><span class="hs-identifier hs-var hs-var hs-var">refFromFunction</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (Activity env result)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680195237"><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680195237"><span class="hs-identifier hs-var">codec</span></a></span></span><span> </span><span id="local-6989586621680195238"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680195238"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy original
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">codec
-&gt; Text
-&gt; KnownActivity
     (ArgsOf original) (ResultOf (Activity env) original)
forall (args :: [*]) result codec.
FunctionSupportsCodec codec args result =&gt;
codec -&gt; Text -&gt; KnownActivity args result
</span><a href="Temporal.Activity.Definition.html#KnownActivity"><span class="hs-identifier hs-var">KnownActivity</span></a></span><span> </span><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680195237"><span class="hs-identifier hs-var">codec</span></a></span><span> </span><span class="annot"><span class="annottext">(Text
 -&gt; KnownActivity
      (ArgsOf original) (ResultOf (Activity env) original))
-&gt; Text
-&gt; KnownActivity
     (ArgsOf original) (ResultOf (Activity env) original)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680195238"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680194808"><span id="local-6989586621680194809"><span id="local-6989586621680194810"><span id="local-6989586621680194811"><span class="annot"><a href="Temporal.Bundle.html#RefFromFunction%27"><span class="hs-identifier hs-type">RefFromFunction'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194808"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194809"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194810"><span class="hs-identifier hs-type">original</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#RefFromFunction%27"><span class="hs-identifier hs-type">RefFromFunction'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194808"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680194811"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680194809"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680194810"><span class="hs-identifier hs-type">original</span></a></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-251"></span><span>  </span><span id="local-6989586621680195243"><span class="annot"><span class="annottext">refFromFunction :: Proxy (a -&gt; b)
-&gt; codec -&gt; String -&gt; Proxy original -&gt; Ref @@ original
</span><a href="Temporal.Bundle.html#refFromFunction"><span class="hs-identifier hs-var hs-var hs-var">refFromFunction</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (a -&gt; b)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy b -&gt; codec -&gt; String -&gt; Proxy original -&gt; Ref @@ original
forall codec f original.
RefFromFunction' codec f original =&gt;
Proxy f -&gt; codec -&gt; String -&gt; Proxy original -&gt; Ref @@ original
</span><a href="Temporal.Bundle.html#refFromFunction"><span class="hs-identifier hs-var">refFromFunction</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680194809"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#RefFromFunction%27"><span class="hs-identifier hs-type">RefFromFunction'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194814"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194815"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194815"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="RefFromFunction"><span class="annot"><a href="Temporal.Bundle.html#RefFromFunction"><span class="hs-identifier hs-var">RefFromFunction</span></a></span></span><span> </span><span id="local-6989586621680194814"><span class="annot"><a href="#local-6989586621680194814"><span class="hs-identifier hs-type">codec</span></a></span></span><span> </span><span id="local-6989586621680194815"><span class="annot"><a href="#local-6989586621680194815"><span class="hs-identifier hs-type">f</span></a></span></span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680195246"><span id="local-6989586621680195247"><span class="annot"><a href="Temporal.Bundle.html#RefFromFunction%27"><span class="hs-identifier hs-type">RefFromFunction'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195246"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195247"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195247"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#RefFromFunction"><span class="hs-identifier hs-type">RefFromFunction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195246"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195247"><span class="hs-identifier hs-type">f</span></a></span></span></span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span class="hs-keyword">class</span><span> </span><span id="DefFromFunction%27"><span class="annot"><a href="Temporal.Bundle.html#DefFromFunction%27"><span class="hs-identifier hs-var">DefFromFunction'</span></a></span></span><span> </span><span id="local-6989586621680194835"><span class="annot"><a href="#local-6989586621680194835"><span class="hs-identifier hs-type">codec</span></a></span></span><span> </span><span id="local-6989586621680194837"><span class="annot"><a href="#local-6989586621680194837"><span class="hs-identifier hs-type">env</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680194834"><span class="annot"><a href="#local-6989586621680194834"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680194836"><span class="annot"><a href="#local-6989586621680194836"><span class="hs-identifier hs-type">original</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-261"></span><span>  </span><span id="defFromFunction"><span class="annot"><a href="Temporal.Bundle.html#defFromFunction"><span class="hs-identifier hs-type">defFromFunction</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">RequireCallStack</span></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621680194834"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680194835"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680194836"><span class="hs-identifier hs-type">original</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194837"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680194836"><span class="hs-identifier hs-type">original</span></a></span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#DefFromFunction%27"><span class="hs-identifier hs-type">DefFromFunction'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194819"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194820"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194821"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194821"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="DefFromFunction"><span class="annot"><a href="Temporal.Bundle.html#DefFromFunction"><span class="hs-identifier hs-var">DefFromFunction</span></a></span></span><span> </span><span id="local-6989586621680194819"><span class="annot"><a href="#local-6989586621680194819"><span class="hs-identifier hs-type">codec</span></a></span></span><span> </span><span id="local-6989586621680194820"><span class="annot"><a href="#local-6989586621680194820"><span class="hs-identifier hs-type">env</span></a></span></span><span> </span><span id="local-6989586621680194821"><span class="annot"><a href="#local-6989586621680194821"><span class="hs-identifier hs-type">f</span></a></span></span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680195255"><span id="local-6989586621680195256"><span id="local-6989586621680195257"><span class="annot"><a href="Temporal.Bundle.html#DefFromFunction%27"><span class="hs-identifier hs-type">DefFromFunction'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195255"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195256"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195257"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195257"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#DefFromFunction"><span class="hs-identifier hs-type">DefFromFunction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195255"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195256"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195257"><span class="hs-identifier hs-type">f</span></a></span></span></span></span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-271"></span><span>  </span><span id="local-6989586621680194838"><span id="local-6989586621680194839"><span id="local-6989586621680194840"><span id="local-6989586621680194841"><span class="hs-special">(</span><span> </span><span class="annot"><a href="Temporal.Payload.html#FunctionSupportsCodec%27"><span class="hs-identifier hs-type">FunctionSupportsCodec'</span></a></span><span> </span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194838"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194839"><span class="hs-identifier hs-type">original</span></a></span><span>
</span><span id="line-272"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194840"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680194839"><span class="hs-identifier hs-type">original</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="Temporal.Workflow.Definition.html#WorkflowDefinition"><span class="hs-identifier hs-type">WorkflowDefinition</span></a></span><span>
</span><span id="line-273"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#DefFromFunction%27"><span class="hs-identifier hs-type">DefFromFunction'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194838"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194840"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194841"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680194839"><span class="hs-identifier hs-type">original</span></a></span></span></span></span></span><span>
</span><span id="line-275"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-276"></span><span>  </span><span id="local-6989586621680195294"><span class="annot"><span class="annottext">defFromFunction :: RequireCallStack =&gt;
Proxy (Workflow result)
-&gt; codec -&gt; String -&gt; original -&gt; Def env @@ original
</span><a href="Temporal.Bundle.html#defFromFunction"><span class="hs-identifier hs-var hs-var hs-var">defFromFunction</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (Workflow result)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680195295"><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680195295"><span class="hs-identifier hs-var">codec</span></a></span></span><span> </span><span id="local-6989586621680195296"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680195296"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680195297"><span class="annot"><span class="annottext">original
</span><a href="#local-6989586621680195297"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; (Vector Payload -&gt; IO (Either String (Workflow Payload)))
-&gt; WorkflowDefinition
</span><a href="Temporal.Workflow.Definition.html#WorkflowDefinition"><span class="hs-identifier hs-var">WorkflowDefinition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680195296"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Vector Payload -&gt; IO (Either String (Workflow Payload)))
 -&gt; WorkflowDefinition)
-&gt; (Vector Payload -&gt; IO (Either String (Workflow Payload)))
-&gt; WorkflowDefinition
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680195299"><span class="annot"><span class="annottext">Vector Payload
</span><a href="#local-6989586621680195299"><span class="hs-identifier hs-var">payloads</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-277"></span><span>    </span><span id="local-6989586621680195300"><span class="annot"><a href="#local-6989586621680195300"><span class="hs-identifier hs-var">eWf</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-278"></span><span>      </span><span class="annot"><span class="annottext">codec
-&gt; Proxy (ArgsOf original)
-&gt; Proxy (Workflow (ResultOf Workflow original))
-&gt; (ArgsOf original :-&gt;: Workflow (ResultOf Workflow original))
-&gt; Vector Payload
-&gt; IO (Either String (Workflow (ResultOf Workflow original)))
forall result.
codec
-&gt; Proxy (ArgsOf original)
-&gt; Proxy result
-&gt; (ArgsOf original :-&gt;: result)
-&gt; Vector Payload
-&gt; IO (Either String result)
forall codec (args :: [*]) result.
ApplyPayloads codec args =&gt;
codec
-&gt; Proxy args
-&gt; Proxy result
-&gt; (args :-&gt;: result)
-&gt; Vector Payload
-&gt; IO (Either String result)
</span><a href="Temporal.Payload.html#applyPayloads"><span class="hs-identifier hs-var">applyPayloads</span></a></span><span>
</span><span id="line-279"></span><span>        </span><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680195295"><span class="hs-identifier hs-var">codec</span></a></span><span>
</span><span id="line-280"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: [*]). Proxy t
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-type">ArgsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194839"><span class="hs-identifier hs-type">original</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ResultOf"><span class="hs-identifier hs-type">ResultOf</span></a></span><span> </span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194839"><span class="hs-identifier hs-type">original</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span>        </span><span class="annot"><span class="annottext">original
ArgsOf original :-&gt;: Workflow (ResultOf Workflow original)
</span><a href="#local-6989586621680195297"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-283"></span><span>        </span><span class="annot"><span class="annottext">Vector Payload
</span><a href="#local-6989586621680195299"><span class="hs-identifier hs-var">payloads</span></a></span><span>
</span><span id="line-284"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680195302"><span class="annot"><span class="annottext">Workflow (ResultOf Workflow original)
</span><a href="#local-6989586621680195302"><span class="hs-identifier hs-var">wf</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Workflow (ResultOf Workflow original)
</span><a href="#local-6989586621680195302"><span class="hs-identifier hs-var">wf</span></a></span><span> </span><span class="annot"><span class="annottext">Workflow (ResultOf Workflow original)
-&gt; (ResultOf Workflow original -&gt; Workflow Payload)
-&gt; Workflow Payload
forall a b. Workflow a -&gt; (a -&gt; Workflow b) -&gt; Workflow b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680195303"><span class="annot"><span class="annottext">ResultOf Workflow original
</span><a href="#local-6989586621680195303"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">InstanceM Payload -&gt; Workflow Payload
forall a. RequireCallStack =&gt; InstanceM a -&gt; Workflow a
</span><a href="Temporal.Workflow.Internal.Monad.html#ilift"><span class="hs-identifier hs-var">ilift</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IO Payload -&gt; InstanceM Payload
forall a. IO a -&gt; InstanceM a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO Payload -&gt; InstanceM Payload)
-&gt; IO Payload -&gt; InstanceM Payload
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">codec -&gt; ResultOf Workflow original -&gt; IO Payload
forall fmt a. Codec fmt a =&gt; fmt -&gt; a -&gt; IO Payload
</span><a href="Temporal.Payload.html#encode"><span class="hs-identifier hs-var">encode</span></a></span><span> </span><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680195295"><span class="hs-identifier hs-var">codec</span></a></span><span> </span><span class="annot"><span class="annottext">ResultOf Workflow original
</span><a href="#local-6989586621680195303"><span class="hs-identifier hs-var">result</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680195300"><span class="hs-identifier hs-type">eWf</span></a></span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-288"></span><span>  </span><span id="local-6989586621680194874"><span id="local-6989586621680194875"><span id="local-6989586621680194876"><span id="local-6989586621680194877"><span class="hs-special">(</span><span> </span><span class="annot"><a href="Temporal.Payload.html#FunctionSupportsCodec%27"><span class="hs-identifier hs-type">FunctionSupportsCodec'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Activity.Definition.html#Activity"><span class="hs-identifier hs-type">Activity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194874"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680194875"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194876"><span class="hs-identifier hs-type">original</span></a></span><span>
</span><span id="line-289"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194874"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680194876"><span class="hs-identifier hs-type">original</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="Temporal.Activity.Definition.html#ActivityDefinition"><span class="hs-identifier hs-type">ActivityDefinition</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194874"><span class="hs-identifier hs-type">env</span></a></span><span>
</span><span id="line-290"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#DefFromFunction%27"><span class="hs-identifier hs-type">DefFromFunction'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194875"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194874"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Activity.Definition.html#Activity"><span class="hs-identifier hs-type">Activity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194874"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194877"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680194876"><span class="hs-identifier hs-type">original</span></a></span></span></span></span></span><span>
</span><span id="line-292"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-293"></span><span>  </span><span id="local-6989586621680195328"><span class="annot"><span class="annottext">defFromFunction :: RequireCallStack =&gt;
Proxy (Activity env result)
-&gt; codec -&gt; String -&gt; original -&gt; Def env @@ original
</span><a href="Temporal.Bundle.html#defFromFunction"><span class="hs-identifier hs-var hs-var hs-var">defFromFunction</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (Activity env result)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680195329"><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680195329"><span class="hs-identifier hs-var">codec</span></a></span></span><span> </span><span id="local-6989586621680195330"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680195330"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680195331"><span class="annot"><span class="annottext">original
</span><a href="#local-6989586621680195331"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-294"></span><span>    </span><span class="annot"><span class="annottext">Text
-&gt; (ActivityEnv env
    -&gt; ExecuteActivityInput -&gt; IO (Either String Payload))
-&gt; ActivityDefinition env
forall env.
Text
-&gt; (ActivityEnv env
    -&gt; ExecuteActivityInput -&gt; IO (Either String Payload))
-&gt; ActivityDefinition env
</span><a href="Temporal.Activity.Definition.html#ActivityDefinition"><span class="hs-identifier hs-var">ActivityDefinition</span></a></span><span>
</span><span id="line-295"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680195330"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-296"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680195333"><span class="annot"><span class="annottext">ActivityEnv env
</span><a href="#local-6989586621680195333"><span class="hs-identifier hs-var">actEnv</span></a></span></span><span> </span><span id="local-6989586621680195334"><span class="annot"><span class="annottext">ExecuteActivityInput
</span><a href="#local-6989586621680195334"><span class="hs-identifier hs-var">input</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-297"></span><span>          </span><span id="local-6989586621680195335"><span class="annot"><a href="#local-6989586621680195335"><span class="hs-identifier hs-var">eAct</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-298"></span><span>            </span><span class="annot"><span class="annottext">codec
-&gt; Proxy (ArgsOf original)
-&gt; Proxy (Activity env (ResultOf (Activity env) original))
-&gt; (ArgsOf original
    :-&gt;: Activity env (ResultOf (Activity env) original))
-&gt; Vector Payload
-&gt; IO
     (Either String (Activity env (ResultOf (Activity env) original)))
forall result.
codec
-&gt; Proxy (ArgsOf original)
-&gt; Proxy result
-&gt; (ArgsOf original :-&gt;: result)
-&gt; Vector Payload
-&gt; IO (Either String result)
forall codec (args :: [*]) result.
ApplyPayloads codec args =&gt;
codec
-&gt; Proxy args
-&gt; Proxy result
-&gt; (args :-&gt;: result)
-&gt; Vector Payload
-&gt; IO (Either String result)
</span><a href="Temporal.Payload.html#applyPayloads"><span class="hs-identifier hs-var">applyPayloads</span></a></span><span>
</span><span id="line-299"></span><span>              </span><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680195329"><span class="hs-identifier hs-var">codec</span></a></span><span>
</span><span id="line-300"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: [*]). Proxy t
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ArgsOf"><span class="hs-identifier hs-type">ArgsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194876"><span class="hs-identifier hs-type">original</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-301"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Activity.Definition.html#Activity"><span class="hs-identifier hs-type">Activity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194874"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Payload.html#ResultOf"><span class="hs-identifier hs-type">ResultOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Activity.Definition.html#Activity"><span class="hs-identifier hs-type">Activity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194874"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680194876"><span class="hs-identifier hs-type">original</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-302"></span><span>              </span><span class="annot"><span class="annottext">original
ArgsOf original
:-&gt;: Activity env (ResultOf (Activity env) original)
</span><a href="#local-6989586621680195331"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-303"></span><span>              </span><span class="annot"><span class="annottext">ExecuteActivityInput
</span><a href="#local-6989586621680195334"><span class="hs-identifier hs-var">input</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">activityArgs</span><span>
</span><span id="line-304"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Activity.Definition.html#runActivity"><span class="hs-identifier hs-type">runActivity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195333"><span class="hs-identifier hs-type">actEnv</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&gt;=&gt;</span></span><span> </span><span class="annot"><a href="Temporal.Payload.html#encode"><span class="hs-identifier hs-type">encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195329"><span class="hs-identifier hs-type">codec</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680195335"><span class="hs-identifier hs-type">eAct</span></a></span><span>
</span><span id="line-305"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span>
</span><span id="line-308"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680194897"><span id="local-6989586621680194898"><span id="local-6989586621680194899"><span id="local-6989586621680194900"><span id="local-6989586621680194901"><span class="annot"><a href="Temporal.Bundle.html#DefFromFunction%27"><span class="hs-identifier hs-type">DefFromFunction'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194897"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194898"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194899"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194900"><span class="hs-identifier hs-type">original</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#DefFromFunction%27"><span class="hs-identifier hs-type">DefFromFunction'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194897"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194898"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680194901"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680194899"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680194900"><span class="hs-identifier hs-type">original</span></a></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-309"></span><span>  </span><span id="local-6989586621680195349"><span class="annot"><span class="annottext">defFromFunction :: RequireCallStack =&gt;
Proxy (a -&gt; b)
-&gt; codec -&gt; String -&gt; original -&gt; Def env @@ original
</span><a href="Temporal.Bundle.html#defFromFunction"><span class="hs-identifier hs-var hs-var hs-var">defFromFunction</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (a -&gt; b)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall codec env f original.
(DefFromFunction' codec env f original, RequireCallStack) =&gt;
Proxy f -&gt; codec -&gt; String -&gt; original -&gt; Def env @@ original
</span><a href="Temporal.Bundle.html#defFromFunction"><span class="hs-identifier hs-var">defFromFunction</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680194897"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680194898"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680194899"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-310"></span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="annot"><span class="hs-comment">-- | A bare record type that supplies the actual implementation of workflows and activities.</span></span><span>
</span><span id="line-313"></span><span class="hs-keyword">type</span><span> </span><span id="Impl"><span class="annot"><a href="Temporal.Bundle.html#Impl"><span class="hs-identifier hs-var">Impl</span></a></span></span><span> </span><span id="local-6989586621680195350"><span class="annot"><a href="#local-6989586621680195350"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680195350"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pure</span></span><span>
</span><span id="line-314"></span><span>
</span><span id="line-315"></span><span>
</span><span id="line-316"></span><span class="annot"><span class="hs-comment">-- | References to workflows and activities that can be used at invokation callsites.</span></span><span>
</span><span id="line-317"></span><span class="hs-keyword">type</span><span> </span><span id="Refs"><span class="annot"><a href="Temporal.Bundle.html#Refs"><span class="hs-identifier hs-var">Refs</span></a></span></span><span> </span><span id="local-6989586621680195351"><span class="annot"><a href="#local-6989586621680195351"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680195351"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Ref"><span class="hs-identifier hs-type">Ref</span></a></span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span>
</span><span id="line-320"></span><span class="annot"><span class="hs-comment">-- | A wrapped version of the implementations that carries information needed to register workflows and activities with the Temporal worker.</span></span><span>
</span><span id="line-321"></span><span class="hs-keyword">type</span><span> </span><span id="Defs"><span class="annot"><a href="Temporal.Bundle.html#Defs"><span class="hs-identifier hs-var">Defs</span></a></span></span><span> </span><span id="local-6989586621680195352"><span class="annot"><a href="#local-6989586621680195352"><span class="hs-identifier hs-type">env</span></a></span></span><span> </span><span id="local-6989586621680195353"><span class="annot"><a href="#local-6989586621680195353"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680195353"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195352"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-322"></span><span>
</span><span id="line-323"></span><span>
</span><span id="line-324"></span><span class="hs-keyword">type</span><span> </span><span id="CanUseAsRefs"><span class="annot"><a href="Temporal.Bundle.html#CanUseAsRefs"><span class="hs-identifier hs-var">CanUseAsRefs</span></a></span></span><span> </span><span id="local-6989586621680195354"><span class="annot"><a href="#local-6989586621680195354"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621680195355"><span class="annot"><a href="#local-6989586621680195355"><span class="hs-identifier hs-type">codec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-325"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#ConstraintsRec"><span class="hs-identifier hs-type">ConstraintsRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195354"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-326"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#WitnessFieldTypes"><span class="hs-identifier hs-type">Rec.WitnessFieldTypes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195354"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-327"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#AllRec"><span class="hs-identifier hs-type">AllRec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#RefFromFunction"><span class="hs-identifier hs-type">RefFromFunction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195355"><span class="hs-identifier hs-type">codec</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680195354"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-328"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#ApplicativeRec"><span class="hs-identifier hs-type">ApplicativeRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195354"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-329"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-330"></span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span class="annot"><span class="hs-comment">{- | Produce a record of references to workflows and activities from a record of implementations.

The fields in the records produced by this function can be used to invoke the workflows and activities
via the Temporal client or within Temporal workflows.
-}</span></span><span>
</span><span id="line-337"></span><span class="annot"><a href="Temporal.Bundle.html#refs"><span class="hs-identifier hs-type">refs</span></a></span><span>
</span><span id="line-338"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680194902"><span class="annot"><a href="#local-6989586621680194902"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621680194903"><span class="annot"><a href="#local-6989586621680194903"><span class="hs-identifier hs-type">codec</span></a></span></span><span>
</span><span id="line-339"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#CanUseAsRefs"><span class="hs-identifier hs-type">CanUseAsRefs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194902"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194903"><span class="hs-identifier hs-type">codec</span></a></span><span>
</span><span id="line-340"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-341"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680194903"><span class="hs-identifier hs-type">codec</span></a></span><span>
</span><span id="line-342"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Refs"><span class="hs-identifier hs-type">Refs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194902"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-343"></span><span id="refs"><span class="annot"><span class="annottext">refs :: forall (r :: (* -&gt; * -&gt; *) -&gt; *) codec.
CanUseAsRefs r codec =&gt;
codec -&gt; Refs r
</span><a href="Temporal.Bundle.html#refs"><span class="hs-identifier hs-var hs-var">refs</span></a></span></span><span> </span><span id="local-6989586621680195365"><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680195365"><span class="hs-identifier hs-var">codec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">r Ref
</span><a href="#local-6989586621680195366"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-344"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-345"></span><span>    </span><span class="annot"><a href="#local-6989586621680195367"><span class="hs-identifier hs-type">ns</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-346"></span><span>    </span><span id="local-6989586621680195367"><span class="annot"><span class="annottext">ns :: String
</span><a href="#local-6989586621680195367"><span class="hs-identifier hs-var hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy r -&gt; String
forall (rec :: (* -&gt; * -&gt; *) -&gt; *).
WitnessFieldTypes rec =&gt;
Proxy rec -&gt; String
</span><a href="Data.EvalRecord.html#typeName"><span class="hs-identifier hs-var">Rec.typeName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: (* -&gt; * -&gt; *) -&gt; *). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680194902"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span>    </span><span class="annot"><a href="#local-6989586621680195369"><span class="hs-identifier hs-type">defLabels</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680194902"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstFn</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span>
</span><span id="line-349"></span><span>    </span><span id="local-6989586621680195369"><span class="annot"><span class="annottext">defLabels :: r (ConstFn String)
</span><a href="#local-6989586621680195369"><span class="hs-identifier hs-var hs-var">defLabels</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a. Metadata a -&gt; ConstFn String @@ a) -&gt; r (ConstFn String)
forall (f :: * -&gt; * -&gt; *). (forall a. Metadata a -&gt; f @@ a) -&gt; r f
forall (rec :: (* -&gt; * -&gt; *) -&gt; *) (f :: * -&gt; * -&gt; *).
ApplicativeRec rec =&gt;
(forall a. Metadata a -&gt; f @@ a) -&gt; rec f
</span><a href="Data.EvalRecord.html#pure"><span class="hs-identifier hs-var">Rec.pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680195376"><span class="annot"><span class="annottext">Metadata a
</span><a href="#local-6989586621680195376"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680195367"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Metadata a -&gt; String
forall {k} (a :: k). Metadata a -&gt; String
</span><a href="Data.EvalRecord.html#name"><span class="hs-identifier hs-var">Rec.name</span></a></span><span> </span><span class="annot"><span class="annottext">Metadata a
</span><a href="#local-6989586621680195376"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span>    </span><span class="annot"><a href="#local-6989586621680195379"><span class="hs-identifier hs-type">convertToKnownWorkflow</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680194925"><span class="annot"><a href="#local-6989586621680194925"><span class="hs-identifier hs-type">wf</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#RefFromFunction"><span class="hs-identifier hs-type">RefFromFunction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194903"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194925"><span class="hs-identifier hs-type">wf</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#Metadata"><span class="hs-identifier hs-type">Rec.Metadata</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194925"><span class="hs-identifier hs-type">wf</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Ref"><span class="hs-identifier hs-type">Ref</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680194925"><span class="hs-identifier hs-type">wf</span></a></span><span>
</span><span id="line-352"></span><span>    </span><span id="local-6989586621680195379"><span class="annot"><span class="annottext">convertToKnownWorkflow :: forall wf.
RefFromFunction codec wf =&gt;
Metadata wf -&gt; String -&gt; Ref @@ wf
</span><a href="#local-6989586621680195379"><span class="hs-identifier hs-var hs-var">convertToKnownWorkflow</span></a></span></span><span> </span><span class="annot"><span class="annottext">Metadata wf
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680195383"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680195383"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy wf -&gt; codec -&gt; String -&gt; Proxy wf -&gt; Ref @@ wf
forall codec f original.
RefFromFunction' codec f original =&gt;
Proxy f -&gt; codec -&gt; String -&gt; Proxy original -&gt; Ref @@ original
</span><a href="Temporal.Bundle.html#refFromFunction"><span class="hs-identifier hs-var">refFromFunction</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680194925"><span class="hs-identifier hs-type">wf</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680195365"><span class="hs-identifier hs-var">codec</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680195383"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680194925"><span class="hs-identifier hs-type">wf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span>    </span><span class="annot"><a href="#local-6989586621680195366"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680194902"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Ref"><span class="hs-identifier hs-type">Ref</span></a></span><span>
</span><span id="line-355"></span><span>    </span><span id="local-6989586621680195366"><span class="annot"><span class="annottext">result :: r Ref
</span><a href="#local-6989586621680195366"><span class="hs-identifier hs-var hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (c :: * -&gt; Constraint) (b :: (* -&gt; * -&gt; *) -&gt; *)
       (f :: * -&gt; * -&gt; *) (g :: * -&gt; * -&gt; *).
(AllRec c b, ConstraintsRec b) =&gt;
(forall a. c a =&gt; Metadata a -&gt; (f @@ a) -&gt; g @@ a) -&gt; b f -&gt; b g
</span><a href="Data.EvalRecord.html#mapC"><span class="hs-identifier hs-var">Rec.mapC</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#RefFromFunction"><span class="hs-identifier hs-type">RefFromFunction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194903"><span class="hs-identifier hs-type">codec</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Metadata a -&gt; String -&gt; Ref @@ a
Metadata a -&gt; Eval (ConstFn String a) -&gt; Ref @@ a
forall wf.
RefFromFunction codec wf =&gt;
Metadata wf -&gt; String -&gt; Ref @@ wf
forall a.
RefFromFunction codec a =&gt;
Metadata a -&gt; (ConstFn String @@ a) -&gt; Ref @@ a
</span><a href="#local-6989586621680195379"><span class="hs-identifier hs-var">convertToKnownWorkflow</span></a></span><span> </span><span class="annot"><span class="annottext">r (ConstFn String)
</span><a href="#local-6989586621680195369"><span class="hs-identifier hs-var">defLabels</span></a></span><span>
</span><span id="line-356"></span><span>
</span><span id="line-357"></span><span>
</span><span id="line-358"></span><span class="annot"><span class="hs-comment">{- | Constraints needed to turn a record of implementations into a record of definitions.

That is, all of the fields (Workflows, Activities) in the record support the supplied codec,
and the activities have an environment of type @env@.
-}</span></span><span>
</span><span id="line-363"></span><span class="hs-keyword">type</span><span> </span><span id="CanUseAsDefs"><span class="annot"><a href="Temporal.Bundle.html#CanUseAsDefs"><span class="hs-identifier hs-var">CanUseAsDefs</span></a></span></span><span> </span><span id="local-6989586621680195387"><span class="annot"><a href="#local-6989586621680195387"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621680195388"><span class="annot"><a href="#local-6989586621680195388"><span class="hs-identifier hs-type">codec</span></a></span></span><span> </span><span id="local-6989586621680195389"><span class="annot"><a href="#local-6989586621680195389"><span class="hs-identifier hs-type">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-364"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#ConstraintsRec"><span class="hs-identifier hs-type">ConstraintsRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195387"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-365"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#WitnessFieldTypes"><span class="hs-identifier hs-type">Rec.WitnessFieldTypes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195387"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-366"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#AllRec"><span class="hs-identifier hs-type">AllRec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#DefFromFunction"><span class="hs-identifier hs-type">DefFromFunction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195388"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195389"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680195387"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-367"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#ApplicativeRec"><span class="hs-identifier hs-type">ApplicativeRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195387"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-368"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-369"></span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span class="annot"><span class="hs-comment">-- | Produce a record of definitions from a record of implementations, using the supplied codec.</span></span><span>
</span><span id="line-372"></span><span class="annot"><a href="Temporal.Bundle.html#defs"><span class="hs-identifier hs-type">defs</span></a></span><span>
</span><span id="line-373"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680194934"><span class="annot"><a href="#local-6989586621680194934"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621680194935"><span class="annot"><a href="#local-6989586621680194935"><span class="hs-identifier hs-type">codec</span></a></span></span><span> </span><span id="local-6989586621680194936"><span class="annot"><a href="#local-6989586621680194936"><span class="hs-identifier hs-type">env</span></a></span></span><span>
</span><span id="line-374"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#CanUseAsDefs"><span class="hs-identifier hs-type">CanUseAsDefs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194934"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194935"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194936"><span class="hs-identifier hs-type">env</span></a></span><span>
</span><span id="line-375"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-376"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680194935"><span class="hs-identifier hs-type">codec</span></a></span><span>
</span><span id="line-377"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Impl"><span class="hs-identifier hs-type">Impl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194934"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-378"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Defs"><span class="hs-identifier hs-type">Defs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194936"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194934"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-379"></span><span id="defs"><span class="annot"><span class="annottext">defs :: forall (f :: (* -&gt; * -&gt; *) -&gt; *) codec env.
CanUseAsDefs f codec env =&gt;
codec -&gt; Impl f -&gt; Defs env f
</span><a href="Temporal.Bundle.html#defs"><span class="hs-identifier hs-var hs-var">defs</span></a></span></span><span> </span><span id="local-6989586621680195400"><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680195400"><span class="hs-identifier hs-var">codec</span></a></span></span><span> </span><span id="local-6989586621680195401"><span class="annot"><span class="annottext">Impl f
</span><a href="#local-6989586621680195401"><span class="hs-identifier hs-var">wfrec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f (Def env)
</span><a href="#local-6989586621680195402"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-380"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-381"></span><span>    </span><span class="annot"><a href="#local-6989586621680195403"><span class="hs-identifier hs-type">ns</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-382"></span><span>    </span><span id="local-6989586621680195403"><span class="annot"><span class="annottext">ns :: String
</span><a href="#local-6989586621680195403"><span class="hs-identifier hs-var hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy f -&gt; String
forall (rec :: (* -&gt; * -&gt; *) -&gt; *).
WitnessFieldTypes rec =&gt;
Proxy rec -&gt; String
</span><a href="Data.EvalRecord.html#typeName"><span class="hs-identifier hs-var">Rec.typeName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: (* -&gt; * -&gt; *) -&gt; *). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680194934"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span>    </span><span class="annot"><a href="#local-6989586621680195404"><span class="hs-identifier hs-type">defLabels</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680194934"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstFn</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span>
</span><span id="line-385"></span><span>    </span><span id="local-6989586621680195404"><span class="annot"><span class="annottext">defLabels :: f (ConstFn String)
</span><a href="#local-6989586621680195404"><span class="hs-identifier hs-var hs-var">defLabels</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a. Metadata a -&gt; ConstFn String @@ a) -&gt; f (ConstFn String)
forall (f :: * -&gt; * -&gt; *). (forall a. Metadata a -&gt; f @@ a) -&gt; f f
forall (rec :: (* -&gt; * -&gt; *) -&gt; *) (f :: * -&gt; * -&gt; *).
ApplicativeRec rec =&gt;
(forall a. Metadata a -&gt; f @@ a) -&gt; rec f
</span><a href="Data.EvalRecord.html#pure"><span class="hs-identifier hs-var">Rec.pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680195408"><span class="annot"><span class="annottext">Metadata a
</span><a href="#local-6989586621680195408"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680195403"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Metadata a -&gt; String
forall {k} (a :: k). Metadata a -&gt; String
</span><a href="Data.EvalRecord.html#name"><span class="hs-identifier hs-var">Rec.name</span></a></span><span> </span><span class="annot"><span class="annottext">Metadata a
</span><a href="#local-6989586621680195408"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-386"></span><span>
</span><span id="line-387"></span><span>    </span><span class="annot"><a href="#local-6989586621680195409"><span class="hs-identifier hs-type">labeledFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680194934"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.EvalRecord.html#Tuple2"><span class="hs-identifier hs-type">Rec.Tuple2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstFn</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pure</span></span><span class="hs-special">)</span><span>
</span><span id="line-388"></span><span>    </span><span id="local-6989586621680195409"><span class="annot"><span class="annottext">labeledFields :: f (Tuple2 (ConstFn String) Pure)
</span><a href="#local-6989586621680195409"><span class="hs-identifier hs-var hs-var">labeledFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a.
 Metadata a
 -&gt; (ConstFn String @@ a)
 -&gt; (Pure @@ a)
 -&gt; Tuple2 (ConstFn String) Pure @@ a)
-&gt; f (ConstFn String) -&gt; Impl f -&gt; f (Tuple2 (ConstFn String) Pure)
forall (rec :: (* -&gt; * -&gt; *) -&gt; *) (f :: * -&gt; * -&gt; *)
       (g :: * -&gt; * -&gt; *) (h :: * -&gt; * -&gt; *).
ApplicativeRec rec =&gt;
(forall a. Metadata a -&gt; (f @@ a) -&gt; (g @@ a) -&gt; h @@ a)
-&gt; rec f -&gt; rec g -&gt; rec h
</span><a href="Data.EvalRecord.html#zipWith"><span class="hs-identifier hs-var">Rec.zipWith</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Metadata a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680195411"><span class="annot"><span class="annottext">ConstFn String @@ a
</span><a href="#local-6989586621680195411"><span class="hs-keyword hs-var">label</span></a></span></span><span> </span><span id="local-6989586621680195412"><span class="annot"><span class="annottext">Pure @@ a
</span><a href="#local-6989586621680195412"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
ConstFn String @@ a
</span><a href="#local-6989586621680195411"><span class="hs-keyword hs-var">label</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
Pure @@ a
</span><a href="#local-6989586621680195412"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">f (ConstFn String)
</span><a href="#local-6989586621680195404"><span class="hs-identifier hs-var">defLabels</span></a></span><span> </span><span class="annot"><span class="annottext">Impl f
</span><a href="#local-6989586621680195401"><span class="hs-identifier hs-var">wfrec</span></a></span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span>    </span><span class="annot"><a href="#local-6989586621680195413"><span class="hs-identifier hs-type">convertToWorkflowDefinition</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680194952"><span class="annot"><a href="#local-6989586621680194952"><span class="hs-identifier hs-type">wf</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#DefFromFunction"><span class="hs-identifier hs-type">DefFromFunction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194935"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194936"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194952"><span class="hs-identifier hs-type">wf</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#Metadata"><span class="hs-identifier hs-type">Rec.Metadata</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194952"><span class="hs-identifier hs-type">wf</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680194952"><span class="hs-identifier hs-type">wf</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194936"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680194952"><span class="hs-identifier hs-type">wf</span></a></span><span>
</span><span id="line-391"></span><span>    </span><span id="local-6989586621680195413"><span class="annot"><span class="annottext">convertToWorkflowDefinition :: forall wf.
DefFromFunction codec env wf =&gt;
Metadata wf -&gt; (String, wf) -&gt; Def env @@ wf
</span><a href="#local-6989586621680195413"><span class="hs-identifier hs-var hs-var">convertToWorkflowDefinition</span></a></span></span><span> </span><span class="annot"><span class="annottext">Metadata wf
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680195416"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680195416"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680195417"><span class="annot"><span class="annottext">wf
</span><a href="#local-6989586621680195417"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(RequireCallStackImpl =&gt; Def env @@ wf) -&gt; Def env @@ wf
forall r. (RequireCallStackImpl =&gt; r) -&gt; r
</span><span class="hs-identifier hs-var">provideCallStack</span></span><span> </span><span class="annot"><span class="annottext">((RequireCallStackImpl =&gt; Def env @@ wf) -&gt; Def env @@ wf)
-&gt; (RequireCallStackImpl =&gt; Def env @@ wf) -&gt; Def env @@ wf
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall codec env f original.
(DefFromFunction' codec env f original, RequireCallStack) =&gt;
Proxy f -&gt; codec -&gt; String -&gt; original -&gt; Def env @@ original
</span><a href="Temporal.Bundle.html#defFromFunction"><span class="hs-identifier hs-var">defFromFunction</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680194935"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680194936"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">wf -&gt; Proxy wf
forall a. a -&gt; Proxy a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">wf
</span><a href="#local-6989586621680195417"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">codec
</span><a href="#local-6989586621680195400"><span class="hs-identifier hs-var">codec</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680195416"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">wf
</span><a href="#local-6989586621680195417"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-392"></span><span>
</span><span id="line-393"></span><span>    </span><span class="annot"><a href="#local-6989586621680195402"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680194934"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194936"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-394"></span><span>    </span><span id="local-6989586621680195402"><span class="annot"><span class="annottext">result :: f (Def env)
</span><a href="#local-6989586621680195402"><span class="hs-identifier hs-var hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (c :: * -&gt; Constraint) (b :: (* -&gt; * -&gt; *) -&gt; *)
       (f :: * -&gt; * -&gt; *) (g :: * -&gt; * -&gt; *).
(AllRec c b, ConstraintsRec b) =&gt;
(forall a. c a =&gt; Metadata a -&gt; (f @@ a) -&gt; g @@ a) -&gt; b f -&gt; b g
</span><a href="Data.EvalRecord.html#mapC"><span class="hs-identifier hs-var">Rec.mapC</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#DefFromFunction"><span class="hs-identifier hs-type">DefFromFunction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194935"><span class="hs-identifier hs-type">codec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194936"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Metadata a -&gt; (String, a) -&gt; Def env @@ a
Metadata a -&gt; Eval (Tuple2 (ConstFn String) Pure a) -&gt; Def env @@ a
forall wf.
DefFromFunction codec env wf =&gt;
Metadata wf -&gt; (String, wf) -&gt; Def env @@ wf
forall a.
DefFromFunction codec env a =&gt;
Metadata a -&gt; (Tuple2 (ConstFn String) Pure @@ a) -&gt; Def env @@ a
</span><a href="#local-6989586621680195413"><span class="hs-identifier hs-var">convertToWorkflowDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">f (Tuple2 (ConstFn String) Pure)
</span><a href="#local-6989586621680195409"><span class="hs-identifier hs-var">labeledFields</span></a></span><span>
</span><span id="line-395"></span><span>
</span><span id="line-396"></span><span>
</span><span id="line-397"></span><span class="annot"><span class="hs-comment">-- | Convert a record of 'Def' values into a worker and  that you can pass to 'startWorker'.</span></span><span>
</span><span id="line-398"></span><span class="annot"><a href="Temporal.Bundle.html#collectTemporalDefinitions"><span class="hs-identifier hs-type">collectTemporalDefinitions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680194956"><span class="annot"><a href="#local-6989586621680194956"><span class="hs-identifier hs-type">rec</span></a></span></span><span> </span><span id="local-6989586621680194958"><span class="annot"><a href="#local-6989586621680194958"><span class="hs-identifier hs-type">actEnv</span></a></span></span><span> </span><span id="local-6989586621680194960"><span class="annot"><a href="#local-6989586621680194960"><span class="hs-identifier hs-type">f</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.EvalRecord.html#TraversableRec"><span class="hs-identifier hs-type">TraversableRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194956"><span class="hs-identifier hs-type">rec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#ConstraintsRec"><span class="hs-identifier hs-type">ConstraintsRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194956"><span class="hs-identifier hs-type">rec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#AllRecF"><span class="hs-identifier hs-type">Rec.AllRecF</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Worker.html#ToDefinitions"><span class="hs-identifier hs-type">ToDefinitions</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194958"><span class="hs-identifier hs-type">actEnv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680194960"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194956"><span class="hs-identifier hs-type">rec</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680194956"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194960"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Worker.html#Definitions"><span class="hs-identifier hs-type">Definitions</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194958"><span class="hs-identifier hs-type">actEnv</span></a></span><span>
</span><span id="line-399"></span><span id="collectTemporalDefinitions"><span class="annot"><span class="annottext">collectTemporalDefinitions :: forall (rec :: (* -&gt; * -&gt; *) -&gt; *) actEnv (f :: * -&gt; * -&gt; *).
(TraversableRec rec, ConstraintsRec rec,
 AllRecF (ToDefinitions actEnv) f rec) =&gt;
rec f -&gt; Definitions actEnv
</span><a href="Temporal.Bundle.html#collectTemporalDefinitions"><span class="hs-identifier hs-var hs-var">collectTemporalDefinitions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (c :: * -&gt; Constraint) (b :: (* -&gt; * -&gt; *) -&gt; *) m
       (f :: * -&gt; * -&gt; *).
(TraversableRec b, ConstraintsRec b, AllRec c b, Monoid m) =&gt;
(forall a. c a =&gt; Metadata a -&gt; (f @@ a) -&gt; m) -&gt; b f -&gt; m
</span><a href="Data.EvalRecord.html#foldMapC"><span class="hs-identifier hs-var">Rec.foldMapC</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Data.EvalRecord.html#ClassF"><span class="hs-identifier hs-type">Rec.ClassF</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Worker.html#ToDefinitions"><span class="hs-identifier hs-type">ToDefinitions</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194958"><span class="hs-identifier hs-type">actEnv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680194960"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Metadata a -&gt; (f @@ a) -&gt; Definitions actEnv
forall a.
ClassF (ToDefinitions actEnv) f a =&gt;
Metadata a -&gt; (f @@ a) -&gt; Definitions actEnv
forall a.
ToDefinitions actEnv (f @@ a) =&gt;
Metadata a -&gt; (f @@ a) -&gt; Definitions actEnv
</span><a href="#local-6989586621680195437"><span class="hs-identifier hs-var">mkConf</span></a></span><span>
</span><span id="line-400"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-401"></span><span>    </span><span class="annot"><a href="#local-6989586621680195437"><span class="hs-identifier hs-type">mkConf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680194974"><span class="annot"><a href="#local-6989586621680194974"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Temporal.Worker.html#ToDefinitions"><span class="hs-identifier hs-type">ToDefinitions</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194958"><span class="hs-identifier hs-type">actEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680194960"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680194974"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#Metadata"><span class="hs-identifier hs-type">Rec.Metadata</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194974"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680194960"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680194974"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Worker.html#Definitions"><span class="hs-identifier hs-type">Definitions</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194958"><span class="hs-identifier hs-type">actEnv</span></a></span><span>
</span><span id="line-402"></span><span>    </span><span id="local-6989586621680195437"><span class="annot"><span class="annottext">mkConf :: forall a.
ToDefinitions actEnv (f @@ a) =&gt;
Metadata a -&gt; (f @@ a) -&gt; Definitions actEnv
</span><a href="#local-6989586621680195437"><span class="hs-identifier hs-var hs-var">mkConf</span></a></span></span><span> </span><span class="annot"><span class="annottext">Metadata a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(f @@ a) -&gt; Definitions actEnv
forall env f. ToDefinitions env f =&gt; f -&gt; Definitions env
</span><a href="Temporal.Worker.html#toDefinitions"><span class="hs-identifier hs-var">toDefinitions</span></a></span><span>
</span><span id="line-403"></span><span>
</span><span id="line-404"></span><span>
</span><span id="line-405"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="RefStartOptionsType"><span class="annot"><a href="Temporal.Bundle.html#RefStartOptionsType"><span class="hs-identifier hs-var">RefStartOptionsType</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680195445"><span class="annot"><a href="#local-6989586621680195445"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-406"></span><span>  </span><span id="RefStartOptionsType"><span class="annot"><a href="Temporal.Bundle.html#RefStartOptionsType"><span class="hs-identifier hs-var">RefStartOptionsType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Activity.Definition.html#Activity"><span class="hs-identifier hs-type">Activity</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Workflow.Types.html#StartActivityOptions"><span class="hs-identifier hs-type">StartActivityOptions</span></a></span><span>
</span><span id="line-407"></span><span>  </span><span id="RefStartOptionsType"><span class="annot"><a href="Temporal.Bundle.html#RefStartOptionsType"><span class="hs-identifier hs-var">RefStartOptionsType</span></a></span></span><span> </span><span id="local-6989586621680195446"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195446"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#RefStartOptionsType"><span class="hs-identifier hs-type">RefStartOptionsType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195446"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-408"></span><span>  </span><span id="RefStartOptionsType"><span class="annot"><a href="Temporal.Bundle.html#RefStartOptionsType"><span class="hs-identifier hs-var">RefStartOptionsType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Workflow.Types.html#StartChildWorkflowOptions"><span class="hs-identifier hs-type">StartChildWorkflowOptions</span></a></span><span>
</span><span id="line-409"></span><span>  </span><span id="RefStartOptionsType"><span class="annot"><a href="Temporal.Bundle.html#RefStartOptionsType"><span class="hs-identifier hs-var">RefStartOptionsType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Definition.html#KnownWorkflow"><span class="hs-identifier hs-type">KnownWorkflow</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Workflow.Types.html#StartChildWorkflowOptions"><span class="hs-identifier hs-type">StartChildWorkflowOptions</span></a></span><span>
</span><span id="line-410"></span><span>  </span><span id="RefStartOptionsType"><span class="annot"><a href="Temporal.Bundle.html#RefStartOptionsType"><span class="hs-identifier hs-var">RefStartOptionsType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Activity.Definition.html#KnownActivity"><span class="hs-identifier hs-type">KnownActivity</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Workflow.Types.html#StartActivityOptions"><span class="hs-identifier hs-type">StartActivityOptions</span></a></span><span>
</span><span id="line-411"></span><span>
</span><span id="line-412"></span><span>
</span><span id="line-413"></span><span class="hs-keyword">class</span><span> </span><span id="FieldToStartOptionDefaults"><span class="annot"><a href="Temporal.Bundle.html#FieldToStartOptionDefaults"><span class="hs-identifier hs-var">FieldToStartOptionDefaults</span></a></span></span><span> </span><span id="local-6989586621680194990"><span class="annot"><a href="#local-6989586621680194990"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-414"></span><span>  </span><span id="refStartOptionsDefaults"><span class="annot"><a href="Temporal.Bundle.html#refStartOptionsDefaults"><span class="hs-identifier hs-type">refStartOptionsDefaults</span></a></span></span><span>
</span><span id="line-415"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621680194990"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-416"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Workflow.Types.html#StartActivityOptions"><span class="hs-identifier hs-type">StartActivityOptions</span></a></span><span>
</span><span id="line-417"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Workflow.Types.html#StartChildWorkflowOptions"><span class="hs-identifier hs-type">StartChildWorkflowOptions</span></a></span><span>
</span><span id="line-418"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#RefStartOptionsType"><span class="hs-identifier hs-type">RefStartOptionsType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194990"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-419"></span><span>
</span><span id="line-420"></span><span>
</span><span id="line-421"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680194991"><span id="local-6989586621680194992"><span class="annot"><a href="Temporal.Bundle.html#FieldToStartOptionDefaults"><span class="hs-identifier hs-type">FieldToStartOptionDefaults</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194991"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#FieldToStartOptionDefaults"><span class="hs-identifier hs-type">FieldToStartOptionDefaults</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680194992"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680194991"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-422"></span><span>  </span><span id="local-6989586621680195453"><span class="annot"><span class="annottext">refStartOptionsDefaults :: Proxy (a -&gt; b)
-&gt; StartActivityOptions
-&gt; StartChildWorkflowOptions
-&gt; RefStartOptionsType (a -&gt; b)
</span><a href="Temporal.Bundle.html#refStartOptionsDefaults"><span class="hs-identifier hs-var hs-var hs-var">refStartOptionsDefaults</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (a -&gt; b)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy b
-&gt; StartActivityOptions
-&gt; StartChildWorkflowOptions
-&gt; RefStartOptionsType b
forall f.
FieldToStartOptionDefaults f =&gt;
Proxy f
-&gt; StartActivityOptions
-&gt; StartChildWorkflowOptions
-&gt; RefStartOptionsType f
</span><a href="Temporal.Bundle.html#refStartOptionsDefaults"><span class="hs-identifier hs-var">refStartOptionsDefaults</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680194991"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-423"></span><span>
</span><span id="line-424"></span><span>
</span><span id="line-425"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680194995"><span id="local-6989586621680194996"><span class="annot"><a href="Temporal.Bundle.html#FieldToStartOptionDefaults"><span class="hs-identifier hs-type">FieldToStartOptionDefaults</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Activity.Definition.html#Activity"><span class="hs-identifier hs-type">Activity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194995"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194996"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-426"></span><span>  </span><span id="local-6989586621680195456"><span class="annot"><span class="annottext">refStartOptionsDefaults :: Proxy (Activity env result)
-&gt; StartActivityOptions
-&gt; StartChildWorkflowOptions
-&gt; RefStartOptionsType (Activity env result)
</span><a href="Temporal.Bundle.html#refStartOptionsDefaults"><span class="hs-identifier hs-var hs-var hs-var">refStartOptionsDefaults</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (Activity env result)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680195457"><span class="annot"><span class="annottext">StartActivityOptions
</span><a href="#local-6989586621680195457"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="annot"><span class="annottext">StartChildWorkflowOptions
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StartActivityOptions
RefStartOptionsType (Activity env result)
</span><a href="#local-6989586621680195457"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-427"></span><span>
</span><span id="line-428"></span><span>
</span><span id="line-429"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680194999"><span id="local-6989586621680195000"><span class="annot"><a href="Temporal.Bundle.html#FieldToStartOptionDefaults"><span class="hs-identifier hs-type">FieldToStartOptionDefaults</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Activity.Definition.html#KnownActivity"><span class="hs-identifier hs-type">KnownActivity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680194999"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195000"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-430"></span><span>  </span><span id="local-6989586621680195460"><span class="annot"><span class="annottext">refStartOptionsDefaults :: Proxy (KnownActivity args res)
-&gt; StartActivityOptions
-&gt; StartChildWorkflowOptions
-&gt; RefStartOptionsType (KnownActivity args res)
</span><a href="Temporal.Bundle.html#refStartOptionsDefaults"><span class="hs-identifier hs-var hs-var hs-var">refStartOptionsDefaults</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (KnownActivity args res)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680195461"><span class="annot"><span class="annottext">StartActivityOptions
</span><a href="#local-6989586621680195461"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="annot"><span class="annottext">StartChildWorkflowOptions
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StartActivityOptions
RefStartOptionsType (KnownActivity args res)
</span><a href="#local-6989586621680195461"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-431"></span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680195002"><span class="annot"><a href="Temporal.Bundle.html#FieldToStartOptionDefaults"><span class="hs-identifier hs-type">FieldToStartOptionDefaults</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195002"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-434"></span><span>  </span><span id="local-6989586621680195464"><span class="annot"><span class="annottext">refStartOptionsDefaults :: Proxy (Workflow a)
-&gt; StartActivityOptions
-&gt; StartChildWorkflowOptions
-&gt; RefStartOptionsType (Workflow a)
</span><a href="Temporal.Bundle.html#refStartOptionsDefaults"><span class="hs-identifier hs-var hs-var hs-var">refStartOptionsDefaults</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (Workflow a)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">StartActivityOptions
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680195465"><span class="annot"><span class="annottext">StartChildWorkflowOptions
</span><a href="#local-6989586621680195465"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StartChildWorkflowOptions
RefStartOptionsType (Workflow a)
</span><a href="#local-6989586621680195465"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-435"></span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680195005"><span id="local-6989586621680195006"><span class="annot"><a href="Temporal.Bundle.html#FieldToStartOptionDefaults"><span class="hs-identifier hs-type">FieldToStartOptionDefaults</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Definition.html#KnownWorkflow"><span class="hs-identifier hs-type">KnownWorkflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195005"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195006"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-438"></span><span>  </span><span id="local-6989586621680195468"><span class="annot"><span class="annottext">refStartOptionsDefaults :: Proxy (KnownWorkflow args res)
-&gt; StartActivityOptions
-&gt; StartChildWorkflowOptions
-&gt; RefStartOptionsType (KnownWorkflow args res)
</span><a href="Temporal.Bundle.html#refStartOptionsDefaults"><span class="hs-identifier hs-var hs-var hs-var">refStartOptionsDefaults</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (KnownWorkflow args res)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">StartActivityOptions
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680195469"><span class="annot"><span class="annottext">StartChildWorkflowOptions
</span><a href="#local-6989586621680195469"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StartChildWorkflowOptions
RefStartOptionsType (KnownWorkflow args res)
</span><a href="#local-6989586621680195469"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-439"></span><span>
</span><span id="line-440"></span><span>
</span><span id="line-441"></span><span class="hs-keyword">data</span><span> </span><span id="RefStartOptions"><span class="annot"><a href="Temporal.Bundle.html#RefStartOptions"><span class="hs-identifier hs-var">RefStartOptions</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-442"></span><span>
</span><span id="line-443"></span><span>
</span><span id="line-444"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Eval"><span class="annot"><span class="hs-identifier hs-var">Eval</span></span></span><span> </span><span id="local-6989586621680195470"><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#RefStartOptions"><span class="hs-identifier hs-type">RefStartOptions</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195470"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#RefStartOptionsType"><span class="hs-identifier hs-type">RefStartOptionsType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195470"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-445"></span><span>
</span><span id="line-446"></span><span>
</span><span id="line-447"></span><span class="annot"><span class="hs-comment">{- | Define a record that provides the same default options for all activities in the a record.

This is useful when you want to provide the same default options for all activities in a record.
For example, you might want to provide a default timeout or non-retryable error type list for all activities.
-}</span></span><span>
</span><span id="line-452"></span><span class="annot"><a href="Temporal.Bundle.html#provideDefaultOptions"><span class="hs-identifier hs-type">provideDefaultOptions</span></a></span><span>
</span><span id="line-453"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680195007"><span class="annot"><a href="#local-6989586621680195007"><span class="hs-identifier hs-type">rec</span></a></span></span><span>
</span><span id="line-454"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.EvalRecord.html#ApplicativeRec"><span class="hs-identifier hs-type">ApplicativeRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195007"><span class="hs-identifier hs-type">rec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#ConstraintsRec"><span class="hs-identifier hs-type">ConstraintsRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195007"><span class="hs-identifier hs-type">rec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#AllRec"><span class="hs-identifier hs-type">AllRec</span></a></span><span> </span><span class="annot"><a href="Temporal.Bundle.html#FieldToStartOptionDefaults"><span class="hs-identifier hs-type">FieldToStartOptionDefaults</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195007"><span class="hs-identifier hs-type">rec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-455"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Workflow.Types.html#StartActivityOptions"><span class="hs-identifier hs-type">StartActivityOptions</span></a></span><span>
</span><span id="line-456"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Workflow.Types.html#StartChildWorkflowOptions"><span class="hs-identifier hs-type">StartChildWorkflowOptions</span></a></span><span>
</span><span id="line-457"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195007"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="annot"><a href="Temporal.Bundle.html#RefStartOptions"><span class="hs-identifier hs-type">RefStartOptions</span></a></span><span>
</span><span id="line-458"></span><span id="provideDefaultOptions"><span class="annot"><span class="annottext">provideDefaultOptions :: forall (rec :: (* -&gt; * -&gt; *) -&gt; *).
(ApplicativeRec rec, ConstraintsRec rec,
 AllRec FieldToStartOptionDefaults rec) =&gt;
StartActivityOptions
-&gt; StartChildWorkflowOptions -&gt; rec RefStartOptions
</span><a href="Temporal.Bundle.html#provideDefaultOptions"><span class="hs-identifier hs-var hs-var">provideDefaultOptions</span></a></span></span><span> </span><span id="local-6989586621680195477"><span class="annot"><span class="annottext">StartActivityOptions
</span><a href="#local-6989586621680195477"><span class="hs-identifier hs-var">act</span></a></span></span><span> </span><span id="local-6989586621680195478"><span class="annot"><span class="annottext">StartChildWorkflowOptions
</span><a href="#local-6989586621680195478"><span class="hs-identifier hs-var">wf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-459"></span><span>  </span><span class="annot"><span class="annottext">forall (c :: * -&gt; Constraint) (b :: (* -&gt; * -&gt; *) -&gt; *)
       (f :: * -&gt; * -&gt; *) (g :: * -&gt; * -&gt; *).
(AllRec c b, ConstraintsRec b) =&gt;
(forall a. c a =&gt; Metadata a -&gt; (f @@ a) -&gt; g @@ a) -&gt; b f -&gt; b g
</span><a href="Data.EvalRecord.html#mapC"><span class="hs-identifier hs-var">Rec.mapC</span></a></span><span>
</span><span id="line-460"></span><span>    </span><span class="hs-glyph">@</span><span class="annot"><a href="Temporal.Bundle.html#FieldToStartOptionDefaults"><span class="hs-identifier hs-type">FieldToStartOptionDefaults</span></a></span><span>
</span><span id="line-461"></span><span>    </span><span class="annot"><span class="annottext">Metadata a -&gt; () -&gt; RefStartOptions @@ a
Metadata a -&gt; Eval (ConstFn () a) -&gt; RefStartOptions @@ a
forall a.
FieldToStartOptionDefaults a =&gt;
Metadata a -&gt; () -&gt; RefStartOptions @@ a
forall a.
FieldToStartOptionDefaults a =&gt;
Metadata a -&gt; (ConstFn () @@ a) -&gt; RefStartOptions @@ a
</span><a href="#local-6989586621680195479"><span class="hs-identifier hs-var">mkDefaults</span></a></span><span>
</span><span id="line-462"></span><span>    </span><span class="annot"><span class="annottext">rec (ConstFn ())
</span><a href="#local-6989586621680195482"><span class="hs-identifier hs-var">emptyBase</span></a></span><span>
</span><span id="line-463"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-464"></span><span>    </span><span class="annot"><a href="#local-6989586621680195479"><span class="hs-identifier hs-type">mkDefaults</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680195011"><span class="annot"><a href="#local-6989586621680195011"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#FieldToStartOptionDefaults"><span class="hs-identifier hs-type">FieldToStartOptionDefaults</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195011"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#Metadata"><span class="hs-identifier hs-type">Rec.Metadata</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195011"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#RefStartOptions"><span class="hs-identifier hs-type">RefStartOptions</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680195011"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-465"></span><span>    </span><span id="local-6989586621680195479"><span class="annot"><span class="annottext">mkDefaults :: forall a.
FieldToStartOptionDefaults a =&gt;
Metadata a -&gt; () -&gt; RefStartOptions @@ a
</span><a href="#local-6989586621680195479"><span class="hs-identifier hs-var hs-var">mkDefaults</span></a></span></span><span> </span><span id="local-6989586621680195485"><span class="annot"><span class="annottext">Metadata a
</span><a href="#local-6989586621680195485"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy a
-&gt; StartActivityOptions
-&gt; StartChildWorkflowOptions
-&gt; RefStartOptionsType a
forall f.
FieldToStartOptionDefaults f =&gt;
Proxy f
-&gt; StartActivityOptions
-&gt; StartChildWorkflowOptions
-&gt; RefStartOptionsType f
</span><a href="Temporal.Bundle.html#refStartOptionsDefaults"><span class="hs-identifier hs-var">refStartOptionsDefaults</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Metadata a -&gt; Proxy a
forall {k} (a :: k). Metadata a -&gt; Proxy a
</span><a href="#local-6989586621680195486"><span class="hs-identifier hs-var">proxyFromMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Metadata a
</span><a href="#local-6989586621680195485"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">StartActivityOptions
</span><a href="#local-6989586621680195477"><span class="hs-identifier hs-var">act</span></a></span><span> </span><span class="annot"><span class="annottext">StartChildWorkflowOptions
</span><a href="#local-6989586621680195478"><span class="hs-identifier hs-var">wf</span></a></span><span>
</span><span id="line-466"></span><span>    </span><span class="annot"><a href="#local-6989586621680195486"><span class="hs-identifier hs-type">proxyFromMeta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680195014"><span class="annot"><a href="#local-6989586621680195014"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#Metadata"><span class="hs-identifier hs-type">Rec.Metadata</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195014"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621680195014"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-467"></span><span>    </span><span id="local-6989586621680195486"><span class="annot"><span class="annottext">proxyFromMeta :: forall {k} (a :: k). Metadata a -&gt; Proxy a
</span><a href="#local-6989586621680195486"><span class="hs-identifier hs-var hs-var">proxyFromMeta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy a -&gt; Metadata a -&gt; Proxy a
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Proxy a
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span>
</span><span id="line-468"></span><span>    </span><span class="annot"><a href="#local-6989586621680195482"><span class="hs-identifier hs-type">emptyBase</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680195007"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstFn</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-469"></span><span>    </span><span id="local-6989586621680195482"><span class="annot"><span class="annottext">emptyBase :: rec (ConstFn ())
</span><a href="#local-6989586621680195482"><span class="hs-identifier hs-var hs-var">emptyBase</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a. Metadata a -&gt; ConstFn () @@ a) -&gt; rec (ConstFn ())
forall (f :: * -&gt; * -&gt; *).
(forall a. Metadata a -&gt; f @@ a) -&gt; rec f
forall (rec :: (* -&gt; * -&gt; *) -&gt; *) (f :: * -&gt; * -&gt; *).
ApplicativeRec rec =&gt;
(forall a. Metadata a -&gt; f @@ a) -&gt; rec f
</span><a href="Data.EvalRecord.html#pure"><span class="hs-identifier hs-var">Rec.pure</span></a></span><span> </span><span class="annot"><span class="annottext">((forall a. Metadata a -&gt; ConstFn () @@ a) -&gt; rec (ConstFn ()))
-&gt; (forall a. Metadata a -&gt; ConstFn () @@ a) -&gt; rec (ConstFn ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">() -&gt; Metadata a -&gt; ()
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span>
</span><span id="line-472"></span><span class="hs-keyword">data</span><span> </span><span id="InWorkflowProxies"><span class="annot"><a href="Temporal.Bundle.html#InWorkflowProxies"><span class="hs-identifier hs-var">InWorkflowProxies</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-473"></span><span>
</span><span id="line-474"></span><span>
</span><span id="line-475"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Eval"><span class="annot"><span class="hs-identifier hs-var">Eval</span></span></span><span> </span><span id="local-6989586621680195488"><span id="local-6989586621680195489"><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#InWorkflowProxies"><span class="hs-identifier hs-type">InWorkflowProxies</span></a></span><span> </span><span class="annot"><a href="Temporal.Bundle.html#ProxySync"><span class="hs-identifier hs-type">ProxySync</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Definition.html#KnownWorkflow"><span class="hs-identifier hs-type">KnownWorkflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195488"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195489"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680195488"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195489"><span class="hs-identifier hs-type">res</span></a></span><span>
</span><span id="line-476"></span><span>
</span><span id="line-477"></span><span>
</span><span id="line-478"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Eval"><span class="annot"><span class="hs-identifier hs-var">Eval</span></span></span><span> </span><span id="local-6989586621680195490"><span id="local-6989586621680195491"><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#InWorkflowProxies"><span class="hs-identifier hs-type">InWorkflowProxies</span></a></span><span> </span><span class="annot"><a href="Temporal.Bundle.html#ProxyAsync"><span class="hs-identifier hs-type">ProxyAsync</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Definition.html#KnownWorkflow"><span class="hs-identifier hs-type">KnownWorkflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195490"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195491"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680195490"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#ChildWorkflowHandle"><span class="hs-identifier hs-type">ChildWorkflowHandle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195491"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-479"></span><span>
</span><span id="line-480"></span><span>
</span><span id="line-481"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Eval"><span class="annot"><span class="hs-identifier hs-var">Eval</span></span></span><span> </span><span id="local-6989586621680195492"><span id="local-6989586621680195493"><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#InWorkflowProxies"><span class="hs-identifier hs-type">InWorkflowProxies</span></a></span><span> </span><span class="annot"><a href="Temporal.Bundle.html#ProxySync"><span class="hs-identifier hs-type">ProxySync</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Activity.Definition.html#KnownActivity"><span class="hs-identifier hs-type">KnownActivity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195492"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195493"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680195492"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195493"><span class="hs-identifier hs-type">res</span></a></span><span>
</span><span id="line-482"></span><span>
</span><span id="line-483"></span><span>
</span><span id="line-484"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Eval"><span class="annot"><span class="hs-identifier hs-var">Eval</span></span></span><span> </span><span id="local-6989586621680195494"><span id="local-6989586621680195495"><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#InWorkflowProxies"><span class="hs-identifier hs-type">InWorkflowProxies</span></a></span><span> </span><span class="annot"><a href="Temporal.Bundle.html#ProxyAsync"><span class="hs-identifier hs-type">ProxyAsync</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Activity.Definition.html#KnownActivity"><span class="hs-identifier hs-type">KnownActivity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195494"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195495"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680195494"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="Temporal.Payload.html#%3A-%3E%3A"><span class="hs-operator hs-type">:-&gt;:</span></a></span><span> </span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Workflow"><span class="hs-identifier hs-type">Workflow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Internal.Monad.html#Task"><span class="hs-identifier hs-type">Task</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195495"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span>
</span><span id="line-487"></span><span class="hs-keyword">class</span><span> </span><span id="UseAsInWorkflowProxy"><span class="annot"><a href="Temporal.Bundle.html#UseAsInWorkflowProxy"><span class="hs-identifier hs-var">UseAsInWorkflowProxy</span></a></span></span><span> </span><span id="local-6989586621680195025"><span class="annot"><a href="#local-6989586621680195025"><span class="hs-identifier hs-type">synchronicity</span></a></span></span><span> </span><span id="local-6989586621680195026"><span class="annot"><a href="#local-6989586621680195026"><span class="hs-identifier hs-type">ref</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-488"></span><span>  </span><span id="useAsInWorkflowProxy"><span class="annot"><a href="Temporal.Bundle.html#useAsInWorkflowProxy"><span class="hs-identifier hs-type">useAsInWorkflowProxy</span></a></span></span><span>
</span><span id="line-489"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">RequireCallStack</span></span><span>
</span><span id="line-490"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195025"><span class="hs-identifier hs-type">synchronicity</span></a></span><span>
</span><span id="line-491"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195026"><span class="hs-identifier hs-type">ref</span></a></span><span>
</span><span id="line-492"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#RefStartOptions"><span class="hs-identifier hs-type">RefStartOptions</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680195026"><span class="hs-identifier hs-type">ref</span></a></span><span>
</span><span id="line-493"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#InWorkflowProxies"><span class="hs-identifier hs-type">InWorkflowProxies</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195025"><span class="hs-identifier hs-type">synchronicity</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680195026"><span class="hs-identifier hs-type">ref</span></a></span><span>
</span><span id="line-494"></span><span>
</span><span id="line-495"></span><span>
</span><span id="line-496"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680195027"><span id="local-6989586621680195028"><span class="annot"><a href="Temporal.Payload.html#VarArgs"><span class="hs-identifier hs-type">VarArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195027"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#UseAsInWorkflowProxy"><span class="hs-identifier hs-type">UseAsInWorkflowProxy</span></a></span><span> </span><span class="annot"><a href="Temporal.Bundle.html#ProxySync"><span class="hs-identifier hs-type">ProxySync</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Activity.Definition.html#KnownActivity"><span class="hs-identifier hs-type">KnownActivity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195027"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195028"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-497"></span><span>  </span><span id="local-6989586621680195509"><span class="annot"><span class="annottext">useAsInWorkflowProxy :: RequireCallStack =&gt;
ProxySync
-&gt; KnownActivity args res
-&gt; (RefStartOptions @@ KnownActivity args res)
-&gt; InWorkflowProxies ProxySync @@ KnownActivity args res
</span><a href="Temporal.Bundle.html#useAsInWorkflowProxy"><span class="hs-identifier hs-var hs-var hs-var">useAsInWorkflowProxy</span></a></span></span><span> </span><span class="annot"><span class="annottext">ProxySync
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KnownActivity args res
-&gt; (RefStartOptions @@ KnownActivity args res)
-&gt; InWorkflowProxies ProxySync @@ KnownActivity args res
KnownActivity args res
-&gt; StartActivityOptions
-&gt; ActivityArgs (KnownActivity args res)
   :-&gt;: Workflow (ActivityResult (KnownActivity args res))
forall activity.
(RequireCallStack, ActivityRef activity) =&gt;
activity
-&gt; StartActivityOptions
-&gt; ActivityArgs activity :-&gt;: Workflow (ActivityResult activity)
</span><a href="Temporal.Workflow.html#executeActivity"><span class="hs-identifier hs-var">executeActivity</span></a></span><span>
</span><span id="line-498"></span><span>
</span><span id="line-499"></span><span>
</span><span id="line-500"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680195038"><span id="local-6989586621680195039"><span class="annot"><a href="Temporal.Payload.html#VarArgs"><span class="hs-identifier hs-type">VarArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195038"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#UseAsInWorkflowProxy"><span class="hs-identifier hs-type">UseAsInWorkflowProxy</span></a></span><span> </span><span class="annot"><a href="Temporal.Bundle.html#ProxyAsync"><span class="hs-identifier hs-type">ProxyAsync</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Activity.Definition.html#KnownActivity"><span class="hs-identifier hs-type">KnownActivity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195038"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195039"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-501"></span><span>  </span><span id="local-6989586621680195521"><span class="annot"><span class="annottext">useAsInWorkflowProxy :: RequireCallStack =&gt;
ProxyAsync
-&gt; KnownActivity args res
-&gt; (RefStartOptions @@ KnownActivity args res)
-&gt; InWorkflowProxies ProxyAsync @@ KnownActivity args res
</span><a href="Temporal.Bundle.html#useAsInWorkflowProxy"><span class="hs-identifier hs-var hs-var hs-var">useAsInWorkflowProxy</span></a></span></span><span> </span><span class="annot"><span class="annottext">ProxyAsync
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KnownActivity args res
-&gt; (RefStartOptions @@ KnownActivity args res)
-&gt; InWorkflowProxies ProxyAsync @@ KnownActivity args res
KnownActivity args res
-&gt; StartActivityOptions
-&gt; ActivityArgs (KnownActivity args res)
   :-&gt;: Workflow (Task (ActivityResult (KnownActivity args res)))
forall activity.
(RequireCallStack, ActivityRef activity) =&gt;
activity
-&gt; StartActivityOptions
-&gt; ActivityArgs activity
   :-&gt;: Workflow (Task (ActivityResult activity))
</span><a href="Temporal.Workflow.html#startActivity"><span class="hs-identifier hs-var">startActivity</span></a></span><span>
</span><span id="line-502"></span><span>
</span><span id="line-503"></span><span>
</span><span id="line-504"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680195044"><span id="local-6989586621680195045"><span class="annot"><a href="Temporal.Bundle.html#UseAsInWorkflowProxy"><span class="hs-identifier hs-type">UseAsInWorkflowProxy</span></a></span><span> </span><span class="annot"><a href="Temporal.Bundle.html#ProxySync"><span class="hs-identifier hs-type">ProxySync</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Definition.html#KnownWorkflow"><span class="hs-identifier hs-type">KnownWorkflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195044"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195045"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-505"></span><span>  </span><span id="local-6989586621680195533"><span class="annot"><span class="annottext">useAsInWorkflowProxy :: RequireCallStack =&gt;
ProxySync
-&gt; KnownWorkflow args res
-&gt; (RefStartOptions @@ KnownWorkflow args res)
-&gt; InWorkflowProxies ProxySync @@ KnownWorkflow args res
</span><a href="Temporal.Bundle.html#useAsInWorkflowProxy"><span class="hs-identifier hs-var hs-var hs-var">useAsInWorkflowProxy</span></a></span></span><span> </span><span class="annot"><span class="annottext">ProxySync
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KnownWorkflow args res
-&gt; (RefStartOptions @@ KnownWorkflow args res)
-&gt; InWorkflowProxies ProxySync @@ KnownWorkflow args res
KnownWorkflow args res
-&gt; StartChildWorkflowOptions
-&gt; WorkflowArgs (KnownWorkflow args res)
   :-&gt;: Workflow (WorkflowResult (KnownWorkflow args res))
forall wf.
(RequireCallStack, WorkflowRef wf) =&gt;
wf
-&gt; StartChildWorkflowOptions
-&gt; WorkflowArgs wf :-&gt;: Workflow (WorkflowResult wf)
</span><a href="Temporal.Workflow.html#executeChildWorkflow"><span class="hs-identifier hs-var">executeChildWorkflow</span></a></span><span>
</span><span id="line-506"></span><span>
</span><span id="line-507"></span><span>
</span><span id="line-508"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680195054"><span id="local-6989586621680195055"><span class="annot"><a href="Temporal.Bundle.html#UseAsInWorkflowProxy"><span class="hs-identifier hs-type">UseAsInWorkflowProxy</span></a></span><span> </span><span class="annot"><a href="Temporal.Bundle.html#ProxyAsync"><span class="hs-identifier hs-type">ProxyAsync</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Workflow.Definition.html#KnownWorkflow"><span class="hs-identifier hs-type">KnownWorkflow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195054"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195055"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-509"></span><span>  </span><span id="local-6989586621680195544"><span class="annot"><span class="annottext">useAsInWorkflowProxy :: RequireCallStack =&gt;
ProxyAsync
-&gt; KnownWorkflow args res
-&gt; (RefStartOptions @@ KnownWorkflow args res)
-&gt; InWorkflowProxies ProxyAsync @@ KnownWorkflow args res
</span><a href="Temporal.Bundle.html#useAsInWorkflowProxy"><span class="hs-identifier hs-var hs-var hs-var">useAsInWorkflowProxy</span></a></span></span><span> </span><span class="annot"><span class="annottext">ProxyAsync
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KnownWorkflow args res
-&gt; (RefStartOptions @@ KnownWorkflow args res)
-&gt; InWorkflowProxies ProxyAsync @@ KnownWorkflow args res
KnownWorkflow args res
-&gt; StartChildWorkflowOptions
-&gt; WorkflowArgs (KnownWorkflow args res)
   :-&gt;: Workflow
          (ChildWorkflowHandle (WorkflowResult (KnownWorkflow args res)))
forall wf.
(RequireCallStack, WorkflowRef wf) =&gt;
wf
-&gt; StartChildWorkflowOptions
-&gt; WorkflowArgs wf
   :-&gt;: Workflow (ChildWorkflowHandle (WorkflowResult wf))
</span><a href="Temporal.Workflow.html#startChildWorkflow"><span class="hs-identifier hs-var">startChildWorkflow</span></a></span><span>
</span><span id="line-510"></span><span>
</span><span id="line-511"></span><span>
</span><span id="line-512"></span><span class="hs-keyword">data</span><span> </span><span id="ProxySync"><span class="annot"><a href="Temporal.Bundle.html#ProxySync"><span class="hs-identifier hs-var">ProxySync</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ProxySync"><span class="annot"><a href="Temporal.Bundle.html#ProxySync"><span class="hs-identifier hs-var">ProxySync</span></a></span></span><span>
</span><span id="line-513"></span><span>
</span><span id="line-514"></span><span>
</span><span id="line-515"></span><span class="hs-keyword">data</span><span> </span><span id="ProxyAsync"><span class="annot"><a href="Temporal.Bundle.html#ProxyAsync"><span class="hs-identifier hs-var">ProxyAsync</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ProxyAsync"><span class="annot"><a href="Temporal.Bundle.html#ProxyAsync"><span class="hs-identifier hs-var">ProxyAsync</span></a></span></span><span>
</span><span id="line-516"></span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span class="hs-keyword">class</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680195060"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680195062"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="#local-6989586621680195061"><span class="hs-identifier hs-type">d</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680195062"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="Equate"><span class="annot"><a href="Temporal.Bundle.html#Equate"><span class="hs-identifier hs-var">Equate</span></a></span></span><span> </span><span id="local-6989586621680195060"><span class="annot"><a href="#local-6989586621680195060"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span id="local-6989586621680195061"><span class="annot"><a href="#local-6989586621680195061"><span class="hs-identifier hs-type">d</span></a></span></span><span> </span><span id="local-6989586621680195062"><span class="annot"><a href="#local-6989586621680195062"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-519"></span><span>
</span><span id="line-520"></span><span>
</span><span id="line-521"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680195071"><span id="local-6989586621680195072"><span id="local-6989586621680195073"><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680195071"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680195072"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="#local-6989586621680195073"><span class="hs-identifier hs-type">d</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680195072"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Equate"><span class="hs-identifier hs-type">Equate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195071"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195073"><span class="hs-identifier hs-type">d</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195072"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-522"></span><span>
</span><span id="line-523"></span><span>
</span><span id="line-524"></span><span id="local-6989586621680195074"><span id="local-6989586621680195075"><span id="local-6989586621680195076"><span class="annot"><a href="Temporal.Bundle.html#coerceRec"><span class="hs-identifier hs-type">coerceRec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#AllRec"><span class="hs-identifier hs-type">Rec.AllRec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#Equate"><span class="hs-identifier hs-type">Equate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195074"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195075"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680195076"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195076"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195074"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195076"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195075"><span class="hs-identifier hs-type">d</span></a></span></span></span></span><span>
</span><span id="line-525"></span><span id="coerceRec"><span class="annot"><span class="annottext">coerceRec :: forall (c :: * -&gt; * -&gt; *) (d :: * -&gt; * -&gt; *)
       (rec :: (* -&gt; * -&gt; *) -&gt; *).
AllRec (Equate c d) rec =&gt;
rec c -&gt; rec d
</span><a href="Temporal.Bundle.html#coerceRec"><span class="hs-identifier hs-var hs-var">coerceRec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">rec c -&gt; rec d
forall a b. a -&gt; b
</span><span class="hs-identifier hs-var">unsafeCoerce</span></span><span>
</span><span id="line-526"></span><span>
</span><span id="line-527"></span><span>
</span><span id="line-528"></span><span class="hs-keyword">type</span><span> </span><span id="InWorkflowProxyOptions"><span class="annot"><a href="Temporal.Bundle.html#InWorkflowProxyOptions"><span class="hs-identifier hs-var">InWorkflowProxyOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#RefStartOptions"><span class="hs-identifier hs-type">RefStartOptions</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;=&lt;</span></span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Ref"><span class="hs-identifier hs-type">Ref</span></a></span><span>
</span><span id="line-529"></span><span>
</span><span id="line-530"></span><span>
</span><span id="line-531"></span><span class="annot"><span class="hs-comment">{- | Combine a record of references with a record of default options to give a record of
functions that can be used to start activities and workflows. This is just a convenience
function that makes it so that you don't have to call 'executeActivity' or 'executeChildWorkflow'
directly as often.
-}</span></span><span>
</span><span id="line-536"></span><span class="annot"><a href="Temporal.Bundle.html#inWorkflowProxies"><span class="hs-identifier hs-type">inWorkflowProxies</span></a></span><span>
</span><span id="line-537"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680195083"><span class="annot"><a href="#local-6989586621680195083"><span class="hs-identifier hs-type">synchronicity</span></a></span></span><span> </span><span id="local-6989586621680195082"><span class="annot"><a href="#local-6989586621680195082"><span class="hs-identifier hs-type">rec</span></a></span></span><span>
</span><span id="line-538"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">RequireCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#ConstraintsRec"><span class="hs-identifier hs-type">ConstraintsRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195082"><span class="hs-identifier hs-type">rec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#AllRec"><span class="hs-identifier hs-type">Rec.AllRec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.EvalRecord.html#ClassF"><span class="hs-identifier hs-type">Rec.ClassF</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#UseAsInWorkflowProxy"><span class="hs-identifier hs-type">UseAsInWorkflowProxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195083"><span class="hs-identifier hs-type">synchronicity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Ref"><span class="hs-identifier hs-type">Ref</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680195082"><span class="hs-identifier hs-type">rec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#ApplicativeRec"><span class="hs-identifier hs-type">ApplicativeRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195082"><span class="hs-identifier hs-type">rec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-539"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195083"><span class="hs-identifier hs-type">synchronicity</span></a></span><span>
</span><span id="line-540"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195082"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#RefStartOptions"><span class="hs-identifier hs-type">RefStartOptions</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;=&lt;</span></span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Ref"><span class="hs-identifier hs-type">Ref</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-541"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195082"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Ref"><span class="hs-identifier hs-type">Ref</span></a></span><span>
</span><span id="line-542"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195082"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#InWorkflowProxies"><span class="hs-identifier hs-type">InWorkflowProxies</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195083"><span class="hs-identifier hs-type">synchronicity</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;=&lt;</span></span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Ref"><span class="hs-identifier hs-type">Ref</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-543"></span><span id="inWorkflowProxies"><span class="annot"><span class="annottext">inWorkflowProxies :: forall synchronicity (rec :: (* -&gt; * -&gt; *) -&gt; *).
(RequireCallStack, ConstraintsRec rec,
 AllRec (ClassF (UseAsInWorkflowProxy synchronicity) Ref) rec,
 ApplicativeRec rec) =&gt;
synchronicity
-&gt; rec (RefStartOptions &lt;=&lt; Ref)
-&gt; rec Ref
-&gt; rec (InWorkflowProxies synchronicity &lt;=&lt; Ref)
</span><a href="Temporal.Bundle.html#inWorkflowProxies"><span class="hs-identifier hs-var hs-var">inWorkflowProxies</span></a></span></span><span> </span><span id="local-6989586621680195567"><span class="annot"><span class="annottext">synchronicity
</span><a href="#local-6989586621680195567"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (c :: * -&gt; Constraint) (b :: (* -&gt; * -&gt; *) -&gt; *)
       (f :: * -&gt; * -&gt; *) (g :: * -&gt; * -&gt; *) (h :: * -&gt; * -&gt; *).
(AllRec c b, ConstraintsRec b, ApplicativeRec b) =&gt;
(forall a. c a =&gt; Metadata a -&gt; (f @@ a) -&gt; (g @@ a) -&gt; h @@ a)
-&gt; b f -&gt; b g -&gt; b h
</span><a href="Data.EvalRecord.html#zipWithC"><span class="hs-identifier hs-var">Rec.zipWithC</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Data.EvalRecord.html#ClassF"><span class="hs-identifier hs-type">Rec.ClassF</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#UseAsInWorkflowProxy"><span class="hs-identifier hs-type">UseAsInWorkflowProxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195083"><span class="hs-identifier hs-type">synchronicity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Ref"><span class="hs-identifier hs-type">Ref</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Metadata a
-&gt; ((RefStartOptions &lt;=&lt; Ref) @@ a)
-&gt; (Ref @@ a)
-&gt; (InWorkflowProxies synchronicity &lt;=&lt; Ref) @@ a
forall a.
ClassF (UseAsInWorkflowProxy synchronicity) Ref a =&gt;
Metadata a
-&gt; ((RefStartOptions &lt;=&lt; Ref) @@ a)
-&gt; (Ref @@ a)
-&gt; (InWorkflowProxies synchronicity &lt;=&lt; Ref) @@ a
forall a.
UseAsInWorkflowProxy synchronicity (Ref @@ a) =&gt;
Metadata a
-&gt; ((RefStartOptions &lt;=&lt; Ref) @@ a)
-&gt; (Ref @@ a)
-&gt; (InWorkflowProxies synchronicity &lt;=&lt; Ref) @@ a
</span><a href="#local-6989586621680195569"><span class="hs-identifier hs-var">convertToProxies</span></a></span><span>
</span><span id="line-544"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-545"></span><span>    </span><span class="annot"><a href="#local-6989586621680195569"><span class="hs-identifier hs-type">convertToProxies</span></a></span><span>
</span><span id="line-546"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680195094"><span class="annot"><a href="#local-6989586621680195094"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-547"></span><span>       </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#UseAsInWorkflowProxy"><span class="hs-identifier hs-type">UseAsInWorkflowProxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195083"><span class="hs-identifier hs-type">synchronicity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#Ref"><span class="hs-identifier hs-type">Ref</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680195094"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-548"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.EvalRecord.html#Metadata"><span class="hs-identifier hs-type">Rec.Metadata</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195094"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-549"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#InWorkflowProxyOptions"><span class="hs-identifier hs-type">InWorkflowProxyOptions</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680195094"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-550"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Ref"><span class="hs-identifier hs-type">Ref</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680195094"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-551"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#InWorkflowProxies"><span class="hs-identifier hs-type">InWorkflowProxies</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195083"><span class="hs-identifier hs-type">synchronicity</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;=&lt;</span></span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Ref"><span class="hs-identifier hs-type">Ref</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">@@</span></span><span> </span><span class="annot"><a href="#local-6989586621680195094"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-552"></span><span>    </span><span id="local-6989586621680195569"><span class="annot"><span class="annottext">convertToProxies :: forall a.
UseAsInWorkflowProxy synchronicity (Ref @@ a) =&gt;
Metadata a
-&gt; ((RefStartOptions &lt;=&lt; Ref) @@ a)
-&gt; (Ref @@ a)
-&gt; (InWorkflowProxies synchronicity &lt;=&lt; Ref) @@ a
</span><a href="#local-6989586621680195569"><span class="hs-identifier hs-var hs-var">convertToProxies</span></a></span></span><span> </span><span class="annot"><span class="annottext">Metadata a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680195580"><span class="annot"><span class="annottext">(RefStartOptions &lt;=&lt; Ref) @@ a
</span><a href="#local-6989586621680195580"><span class="hs-identifier hs-var">opt</span></a></span></span><span> </span><span id="local-6989586621680195581"><span class="annot"><span class="annottext">Ref @@ a
</span><a href="#local-6989586621680195581"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">synchronicity
-&gt; ApplyRef a a
-&gt; (RefStartOptions @@ ApplyRef a a)
-&gt; InWorkflowProxies synchronicity @@ ApplyRef a a
forall synchronicity ref.
(UseAsInWorkflowProxy synchronicity ref, RequireCallStack) =&gt;
synchronicity
-&gt; ref
-&gt; (RefStartOptions @@ ref)
-&gt; InWorkflowProxies synchronicity @@ ref
</span><a href="Temporal.Bundle.html#useAsInWorkflowProxy"><span class="hs-identifier hs-var">useAsInWorkflowProxy</span></a></span><span> </span><span class="annot"><span class="annottext">synchronicity
</span><a href="#local-6989586621680195567"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Ref @@ a
ApplyRef a a
</span><a href="#local-6989586621680195581"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">(RefStartOptions &lt;=&lt; Ref) @@ a
RefStartOptions @@ ApplyRef a a
</span><a href="#local-6989586621680195580"><span class="hs-identifier hs-var">opt</span></a></span><span>
</span><span id="line-553"></span><span>
</span><span id="line-554"></span><span>
</span><span id="line-555"></span><span class="hs-keyword">type</span><span> </span><span id="Workers"><span class="annot"><a href="Temporal.Bundle.html#Workers"><span class="hs-identifier hs-var">Workers</span></a></span></span><span> </span><span id="local-6989586621680195582"><span class="annot"><a href="#local-6989586621680195582"><span class="hs-identifier hs-type">env</span></a></span></span><span> </span><span id="local-6989586621680195583"><span class="annot"><a href="#local-6989586621680195583"><span class="hs-identifier hs-type">rec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680195583"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstFn</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Worker.html#Worker"><span class="hs-identifier hs-type">Worker</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195582"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-556"></span><span>
</span><span id="line-557"></span><span>
</span><span id="line-558"></span><span class="hs-keyword">type</span><span> </span><span id="WorkerConfigs"><span class="annot"><a href="Temporal.Bundle.html#WorkerConfigs"><span class="hs-identifier hs-var">WorkerConfigs</span></a></span></span><span> </span><span id="local-6989586621680195584"><span class="annot"><a href="#local-6989586621680195584"><span class="hs-identifier hs-type">env</span></a></span></span><span> </span><span id="local-6989586621680195585"><span class="annot"><a href="#local-6989586621680195585"><span class="hs-identifier hs-type">rec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680195585"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstFn</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Worker.Types.html#WorkerConfig"><span class="hs-identifier hs-type">WorkerConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195584"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-559"></span><span>
</span><span id="line-560"></span><span>
</span><span id="line-561"></span><span class="annot"><span class="hs-comment">{- | Start a Temporal worker for each task queue specified in the MercuryTaskQueues record.

This function starts each worker concurrently, waits for them to initialize, and then returns
a worker for each task queue.
-}</span></span><span>
</span><span id="line-566"></span><span class="annot"><a href="Temporal.Bundle.html#startTaskQueues"><span class="hs-identifier hs-type">startTaskQueues</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680195096"><span class="annot"><a href="#local-6989586621680195096"><span class="hs-identifier hs-type">rec</span></a></span></span><span> </span><span id="local-6989586621680195097"><span class="annot"><a href="#local-6989586621680195097"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621680195101"><span class="annot"><a href="#local-6989586621680195101"><span class="hs-identifier hs-type">env</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.EvalRecord.html#TraversableRec"><span class="hs-identifier hs-type">TraversableRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195096"><span class="hs-identifier hs-type">rec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadUnliftIO</span></span><span> </span><span class="annot"><a href="#local-6989586621680195097"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadCatch</span></span><span> </span><span class="annot"><a href="#local-6989586621680195097"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Client</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#WorkerConfigs"><span class="hs-identifier hs-type">WorkerConfigs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195101"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195096"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195097"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#Workers"><span class="hs-identifier hs-type">Workers</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195101"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195096"><span class="hs-identifier hs-type">rec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-567"></span><span id="startTaskQueues"><span class="annot"><span class="annottext">startTaskQueues :: forall (rec :: (* -&gt; * -&gt; *) -&gt; *) (m :: * -&gt; *) env.
(TraversableRec rec, MonadUnliftIO m, MonadCatch m) =&gt;
Client -&gt; WorkerConfigs env rec -&gt; m (Workers env rec)
</span><a href="Temporal.Bundle.html#startTaskQueues"><span class="hs-identifier hs-var hs-var">startTaskQueues</span></a></span></span><span> </span><span id="local-6989586621680195600"><span class="annot"><span class="annottext">Client
</span><a href="#local-6989586621680195600"><span class="hs-identifier hs-var">client</span></a></span></span><span> </span><span id="local-6989586621680195601"><span class="annot"><span class="annottext">WorkerConfigs env rec
</span><a href="#local-6989586621680195601"><span class="hs-identifier hs-var">conf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WorkerConfigs env rec -&gt; m (rec (ConstFn (Async (Worker env))))
</span><a href="#local-6989586621680195602"><span class="hs-identifier hs-var">startWorkers</span></a></span><span> </span><span class="annot"><span class="annottext">WorkerConfigs env rec
</span><a href="#local-6989586621680195601"><span class="hs-identifier hs-var">conf</span></a></span><span> </span><span class="annot"><span class="annottext">m (rec (ConstFn (Async (Worker env))))
-&gt; (rec (ConstFn (Async (Worker env))) -&gt; m (Workers env rec))
-&gt; m (Workers env rec)
forall a b. m a -&gt; (a -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">rec (ConstFn (Async (Worker env))) -&gt; m (Workers env rec)
</span><a href="#local-6989586621680195603"><span class="hs-identifier hs-var">awaitWorkersStart</span></a></span><span>
</span><span id="line-568"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-569"></span><span>    </span><span class="annot"><a href="#local-6989586621680195602"><span class="hs-identifier hs-type">startWorkers</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680195096"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstFn</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Worker.Types.html#WorkerConfig"><span class="hs-identifier hs-type">WorkerConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195101"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195097"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680195096"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstFn</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Async</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Worker.html#Worker"><span class="hs-identifier hs-type">Worker</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195101"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-570"></span><span>    </span><span id="local-6989586621680195602"><span class="annot"><span class="annottext">startWorkers :: WorkerConfigs env rec -&gt; m (rec (ConstFn (Async (Worker env))))
</span><a href="#local-6989586621680195602"><span class="hs-identifier hs-var hs-var">startWorkers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a.
 Metadata a
 -&gt; (ConstFn (WorkerConfig env) @@ a)
 -&gt; m (ConstFn (Async (Worker env)) @@ a))
-&gt; WorkerConfigs env rec -&gt; m (rec (ConstFn (Async (Worker env))))
forall (e :: * -&gt; *) (f :: * -&gt; * -&gt; *) (g :: * -&gt; * -&gt; *).
Applicative e =&gt;
(forall a. Metadata a -&gt; (f @@ a) -&gt; e (g @@ a))
-&gt; rec f -&gt; e (rec g)
forall (rec :: (* -&gt; * -&gt; *) -&gt; *) (e :: * -&gt; *) (f :: * -&gt; * -&gt; *)
       (g :: * -&gt; * -&gt; *).
(TraversableRec rec, Applicative e) =&gt;
(forall a. Metadata a -&gt; (f @@ a) -&gt; e (g @@ a))
-&gt; rec f -&gt; e (rec g)
</span><a href="Data.EvalRecord.html#traverse"><span class="hs-identifier hs-var">Rec.traverse</span></a></span><span> </span><span class="annot"><span class="annottext">((forall a.
  Metadata a
  -&gt; (ConstFn (WorkerConfig env) @@ a)
  -&gt; m (ConstFn (Async (Worker env)) @@ a))
 -&gt; WorkerConfigs env rec -&gt; m (rec (ConstFn (Async (Worker env)))))
-&gt; (forall a.
    Metadata a
    -&gt; (ConstFn (WorkerConfig env) @@ a)
    -&gt; m (ConstFn (Async (Worker env)) @@ a))
-&gt; WorkerConfigs env rec
-&gt; m (rec (ConstFn (Async (Worker env))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Metadata a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680195611"><span class="annot"><span class="annottext">ConstFn (WorkerConfig env) @@ a
</span><a href="#local-6989586621680195611"><span class="hs-identifier hs-var">workerConfig</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(LoggingT m (Async (Worker env))
 -&gt; (Loc -&gt; Text -&gt; LogLevel -&gt; LogStr -&gt; IO ())
 -&gt; m (ConstFn (Async (Worker env)) @@ a))
-&gt; (Loc -&gt; Text -&gt; LogLevel -&gt; LogStr -&gt; IO ())
-&gt; LoggingT m (Async (Worker env))
-&gt; m (ConstFn (Async (Worker env)) @@ a)
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT m (Async (Worker env))
-&gt; (Loc -&gt; Text -&gt; LogLevel -&gt; LogStr -&gt; IO ())
-&gt; m (Async (Worker env))
LoggingT m (Async (Worker env))
-&gt; (Loc -&gt; Text -&gt; LogLevel -&gt; LogStr -&gt; IO ())
-&gt; m (ConstFn (Async (Worker env)) @@ a)
forall (m :: * -&gt; *) a.
LoggingT m a -&gt; (Loc -&gt; Text -&gt; LogLevel -&gt; LogStr -&gt; IO ()) -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">ConstFn (WorkerConfig env) @@ a
WorkerConfig env
</span><a href="#local-6989586621680195611"><span class="hs-identifier hs-var">workerConfig</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">logger</span><span> </span><span class="annot"><span class="annottext">(LoggingT m (Async (Worker env))
 -&gt; m (ConstFn (Async (Worker env)) @@ a))
-&gt; LoggingT m (Async (Worker env))
-&gt; m (ConstFn (Async (Worker env)) @@ a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-571"></span><span>      </span><span class="annot"><span class="annottext">String
-&gt; LoggingT m (Worker env) -&gt; LoggingT m (Async (Worker env))
forall (m :: * -&gt; *) a.
MonadUnliftIO m =&gt;
String -&gt; m a -&gt; m (Async a)
</span><a href="Temporal.Common.Async.html#asyncLabelled"><span class="hs-identifier hs-var">asyncLabelled</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;temporal/startTaskQueues&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Client -&gt; WorkerConfig env -&gt; LoggingT m (Worker env)
forall (m :: * -&gt; *) actEnv.
(MonadUnliftIO m, MonadCatch m) =&gt;
Client -&gt; WorkerConfig actEnv -&gt; m (Worker actEnv)
</span><a href="Temporal.Worker.html#startWorker"><span class="hs-identifier hs-var">startWorker</span></a></span><span> </span><span class="annot"><span class="annottext">Client
</span><a href="#local-6989586621680195600"><span class="hs-identifier hs-var">client</span></a></span><span> </span><span class="annot"><span class="annottext">ConstFn (WorkerConfig env) @@ a
WorkerConfig env
</span><a href="#local-6989586621680195611"><span class="hs-identifier hs-var">workerConfig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-572"></span><span>    </span><span class="annot"><a href="#local-6989586621680195603"><span class="hs-identifier hs-type">awaitWorkersStart</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680195096"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstFn</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Async</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Worker.html#Worker"><span class="hs-identifier hs-type">Worker</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195101"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195097"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680195096"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstFn</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Worker.html#Worker"><span class="hs-identifier hs-type">Worker</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195101"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-573"></span><span>    </span><span id="local-6989586621680195603"><span class="annot"><span class="annottext">awaitWorkersStart :: rec (ConstFn (Async (Worker env))) -&gt; m (Workers env rec)
</span><a href="#local-6989586621680195603"><span class="hs-identifier hs-var hs-var">awaitWorkersStart</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a.
 Metadata a
 -&gt; (ConstFn (Async (Worker env)) @@ a)
 -&gt; m (ConstFn (Worker env) @@ a))
-&gt; rec (ConstFn (Async (Worker env))) -&gt; m (Workers env rec)
forall (e :: * -&gt; *) (f :: * -&gt; * -&gt; *) (g :: * -&gt; * -&gt; *).
Applicative e =&gt;
(forall a. Metadata a -&gt; (f @@ a) -&gt; e (g @@ a))
-&gt; rec f -&gt; e (rec g)
forall (rec :: (* -&gt; * -&gt; *) -&gt; *) (e :: * -&gt; *) (f :: * -&gt; * -&gt; *)
       (g :: * -&gt; * -&gt; *).
(TraversableRec rec, Applicative e) =&gt;
(forall a. Metadata a -&gt; (f @@ a) -&gt; e (g @@ a))
-&gt; rec f -&gt; e (rec g)
</span><a href="Data.EvalRecord.html#traverse"><span class="hs-identifier hs-var">Rec.traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Metadata a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680195616"><span class="annot"><span class="annottext">ConstFn (Async (Worker env)) @@ a
</span><a href="#local-6989586621680195616"><span class="hs-identifier hs-var">workerStartupThread</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Async (Worker env) -&gt; m (Worker env)
forall (m :: * -&gt; *) a. MonadIO m =&gt; Async a -&gt; m a
</span><span class="hs-identifier hs-var">UnliftIO.wait</span></span><span> </span><span class="annot"><span class="annottext">Async (Worker env)
ConstFn (Async (Worker env)) @@ a
</span><a href="#local-6989586621680195616"><span class="hs-identifier hs-var">workerStartupThread</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-574"></span><span>
</span><span id="line-575"></span><span>
</span><span id="line-576"></span><span class="annot"><span class="hs-comment">{- | Stop each Temporal worker for each task queue specified in the MercuryTaskQueues record.

This function stops each worker concurrently, waits for them to complete shutdown (gracefully or not), and then returns.
-}</span></span><span>
</span><span id="line-580"></span><span class="annot"><a href="Temporal.Bundle.html#shutdownTaskQueues"><span class="hs-identifier hs-type">shutdownTaskQueues</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680195136"><span class="annot"><a href="#local-6989586621680195136"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621680195135"><span class="annot"><a href="#local-6989586621680195135"><span class="hs-identifier hs-type">rec</span></a></span></span><span> </span><span id="local-6989586621680195137"><span class="annot"><a href="#local-6989586621680195137"><span class="hs-identifier hs-type">env</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.EvalRecord.html#TraversableRec"><span class="hs-identifier hs-type">TraversableRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195135"><span class="hs-identifier hs-type">rec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadUnliftIO</span></span><span> </span><span class="annot"><a href="#local-6989586621680195136"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Workers"><span class="hs-identifier hs-type">Workers</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195137"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195135"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195136"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680195135"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstFn</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-581"></span><span id="shutdownTaskQueues"><span class="annot"><span class="annottext">shutdownTaskQueues :: forall (m :: * -&gt; *) (rec :: (* -&gt; * -&gt; *) -&gt; *) env.
(TraversableRec rec, MonadUnliftIO m) =&gt;
Workers env rec -&gt; m (rec (ConstFn (Either SomeException ())))
</span><a href="Temporal.Bundle.html#shutdownTaskQueues"><span class="hs-identifier hs-var hs-var">shutdownTaskQueues</span></a></span></span><span> </span><span id="local-6989586621680195628"><span class="annot"><span class="annottext">Workers env rec
</span><a href="#local-6989586621680195628"><span class="hs-identifier hs-var">workers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-582"></span><span>  </span><span class="annot"><span class="annottext">Workers env rec -&gt; m (rec (ConstFn (Async ())))
</span><a href="#local-6989586621680195629"><span class="hs-identifier hs-var">stopWorkers</span></a></span><span> </span><span class="annot"><span class="annottext">Workers env rec
</span><a href="#local-6989586621680195628"><span class="hs-identifier hs-var">workers</span></a></span><span>
</span><span id="line-583"></span><span>    </span><span class="annot"><span class="annottext">m (rec (ConstFn (Async ())))
-&gt; (rec (ConstFn (Async ()))
    -&gt; m (rec (ConstFn (Either SomeException ()))))
-&gt; m (rec (ConstFn (Either SomeException ())))
forall a b. m a -&gt; (a -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">rec (ConstFn (Async ()))
-&gt; m (rec (ConstFn (Either SomeException ())))
</span><a href="#local-6989586621680195630"><span class="hs-identifier hs-var">awaitWorkersStop</span></a></span><span>
</span><span id="line-584"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-585"></span><span>    </span><span class="annot"><a href="#local-6989586621680195629"><span class="hs-identifier hs-type">stopWorkers</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680195135"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstFn</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Worker.html#Worker"><span class="hs-identifier hs-type">Worker</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195137"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195136"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680195135"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstFn</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Async</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-586"></span><span>    </span><span id="local-6989586621680195629"><span class="annot"><span class="annottext">stopWorkers :: Workers env rec -&gt; m (rec (ConstFn (Async ())))
</span><a href="#local-6989586621680195629"><span class="hs-identifier hs-var hs-var">stopWorkers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a.
 Metadata a
 -&gt; (ConstFn (Worker env) @@ a) -&gt; m (ConstFn (Async ()) @@ a))
-&gt; Workers env rec -&gt; m (rec (ConstFn (Async ())))
forall (e :: * -&gt; *) (f :: * -&gt; * -&gt; *) (g :: * -&gt; * -&gt; *).
Applicative e =&gt;
(forall a. Metadata a -&gt; (f @@ a) -&gt; e (g @@ a))
-&gt; rec f -&gt; e (rec g)
forall (rec :: (* -&gt; * -&gt; *) -&gt; *) (e :: * -&gt; *) (f :: * -&gt; * -&gt; *)
       (g :: * -&gt; * -&gt; *).
(TraversableRec rec, Applicative e) =&gt;
(forall a. Metadata a -&gt; (f @@ a) -&gt; e (g @@ a))
-&gt; rec f -&gt; e (rec g)
</span><a href="Data.EvalRecord.html#traverse"><span class="hs-identifier hs-var">Rec.traverse</span></a></span><span> </span><span class="annot"><span class="annottext">((forall a.
  Metadata a
  -&gt; (ConstFn (Worker env) @@ a) -&gt; m (ConstFn (Async ()) @@ a))
 -&gt; Workers env rec -&gt; m (rec (ConstFn (Async ()))))
-&gt; (forall a.
    Metadata a
    -&gt; (ConstFn (Worker env) @@ a) -&gt; m (ConstFn (Async ()) @@ a))
-&gt; Workers env rec
-&gt; m (rec (ConstFn (Async ())))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Metadata a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680195633"><span class="annot"><span class="annottext">ConstFn (Worker env) @@ a
</span><a href="#local-6989586621680195633"><span class="hs-identifier hs-var">worker</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m () -&gt; m (Async ())
forall (m :: * -&gt; *) a.
MonadUnliftIO m =&gt;
String -&gt; m a -&gt; m (Async a)
</span><a href="Temporal.Common.Async.html#asyncLabelled"><span class="hs-identifier hs-var">asyncLabelled</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;temporal/shutdownTaskQueues&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Worker env -&gt; m ()
forall (m :: * -&gt; *) actEnv.
MonadUnliftIO m =&gt;
Worker actEnv -&gt; m ()
</span><a href="Temporal.Worker.html#shutdown"><span class="hs-identifier hs-var">shutdown</span></a></span><span> </span><span class="annot"><span class="annottext">ConstFn (Worker env) @@ a
Worker env
</span><a href="#local-6989586621680195633"><span class="hs-identifier hs-var">worker</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-587"></span><span>    </span><span class="annot"><a href="#local-6989586621680195630"><span class="hs-identifier hs-type">awaitWorkersStop</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680195135"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstFn</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Async</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195136"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680195135"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstFn</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-588"></span><span>    </span><span id="local-6989586621680195630"><span class="annot"><span class="annottext">awaitWorkersStop :: rec (ConstFn (Async ()))
-&gt; m (rec (ConstFn (Either SomeException ())))
</span><a href="#local-6989586621680195630"><span class="hs-identifier hs-var hs-var">awaitWorkersStop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a.
 Metadata a
 -&gt; (ConstFn (Async ()) @@ a)
 -&gt; m (ConstFn (Either SomeException ()) @@ a))
-&gt; rec (ConstFn (Async ()))
-&gt; m (rec (ConstFn (Either SomeException ())))
forall (e :: * -&gt; *) (f :: * -&gt; * -&gt; *) (g :: * -&gt; * -&gt; *).
Applicative e =&gt;
(forall a. Metadata a -&gt; (f @@ a) -&gt; e (g @@ a))
-&gt; rec f -&gt; e (rec g)
forall (rec :: (* -&gt; * -&gt; *) -&gt; *) (e :: * -&gt; *) (f :: * -&gt; * -&gt; *)
       (g :: * -&gt; * -&gt; *).
(TraversableRec rec, Applicative e) =&gt;
(forall a. Metadata a -&gt; (f @@ a) -&gt; e (g @@ a))
-&gt; rec f -&gt; e (rec g)
</span><a href="Data.EvalRecord.html#traverse"><span class="hs-identifier hs-var">Rec.traverse</span></a></span><span> </span><span class="annot"><span class="annottext">((forall a.
  Metadata a
  -&gt; (ConstFn (Async ()) @@ a)
  -&gt; m (ConstFn (Either SomeException ()) @@ a))
 -&gt; rec (ConstFn (Async ()))
 -&gt; m (rec (ConstFn (Either SomeException ()))))
-&gt; (forall a.
    Metadata a
    -&gt; (ConstFn (Async ()) @@ a)
    -&gt; m (ConstFn (Either SomeException ()) @@ a))
-&gt; rec (ConstFn (Async ()))
-&gt; m (rec (ConstFn (Either SomeException ())))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Metadata a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680195636"><span class="annot"><span class="annottext">ConstFn (Async ()) @@ a
</span><a href="#local-6989586621680195636"><span class="hs-identifier hs-var">workerShutdownThread</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Async () -&gt; m (Either SomeException ())
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Async a -&gt; m (Either SomeException a)
</span><span class="hs-identifier hs-var">UnliftIO.waitCatch</span></span><span> </span><span class="annot"><span class="annottext">Async ()
ConstFn (Async ()) @@ a
</span><a href="#local-6989586621680195636"><span class="hs-identifier hs-var">workerShutdownThread</span></a></span><span>
</span><span id="line-589"></span><span>
</span><span id="line-590"></span><span>
</span><span id="line-591"></span><span class="annot"><a href="Temporal.Bundle.html#linkTaskQueues"><span class="hs-identifier hs-type">linkTaskQueues</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680195149"><span class="annot"><a href="#local-6989586621680195149"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621680195148"><span class="annot"><a href="#local-6989586621680195148"><span class="hs-identifier hs-type">rec</span></a></span></span><span> </span><span id="local-6989586621680195150"><span class="annot"><a href="#local-6989586621680195150"><span class="hs-identifier hs-type">env</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.EvalRecord.html#TraversableRec"><span class="hs-identifier hs-type">TraversableRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195148"><span class="hs-identifier hs-type">rec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadUnliftIO</span></span><span> </span><span class="annot"><a href="#local-6989586621680195149"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#Workers"><span class="hs-identifier hs-type">Workers</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195150"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195148"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195149"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-592"></span><span id="linkTaskQueues"><span class="annot"><span class="annottext">linkTaskQueues :: forall (m :: * -&gt; *) (rec :: (* -&gt; * -&gt; *) -&gt; *) env.
(TraversableRec rec, MonadUnliftIO m) =&gt;
Workers env rec -&gt; m ()
</span><a href="Temporal.Bundle.html#linkTaskQueues"><span class="hs-identifier hs-var hs-var">linkTaskQueues</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a. Metadata a -&gt; (ConstFn (Worker env) @@ a) -&gt; m ())
-&gt; rec (ConstFn (Worker env)) -&gt; m ()
forall (e :: * -&gt; *) (f :: * -&gt; * -&gt; *) c.
Applicative e =&gt;
(forall a. Metadata a -&gt; (f @@ a) -&gt; e c) -&gt; rec f -&gt; e ()
forall (rec :: (* -&gt; * -&gt; *) -&gt; *) (e :: * -&gt; *) (f :: * -&gt; * -&gt; *)
       c.
(TraversableRec rec, Applicative e) =&gt;
(forall a. Metadata a -&gt; (f @@ a) -&gt; e c) -&gt; rec f -&gt; e ()
</span><a href="Data.EvalRecord.html#traverse_"><span class="hs-identifier hs-var">Rec.traverse_</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Metadata a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; m ()
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; m ()) -&gt; (Worker env -&gt; IO ()) -&gt; Worker env -&gt; m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Worker env -&gt; IO ()
forall actEnv. Worker actEnv -&gt; IO ()
</span><a href="Temporal.Worker.html#linkWorker"><span class="hs-identifier hs-var">linkWorker</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-593"></span><span>
</span><span id="line-594"></span><span>
</span><span id="line-595"></span><span class="annot"><a href="Temporal.Bundle.html#withTaskQueues"><span class="hs-identifier hs-type">withTaskQueues</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680195163"><span class="annot"><a href="#local-6989586621680195163"><span class="hs-identifier hs-type">rec</span></a></span></span><span> </span><span id="local-6989586621680195164"><span class="annot"><a href="#local-6989586621680195164"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621680195165"><span class="annot"><a href="#local-6989586621680195165"><span class="hs-identifier hs-type">env</span></a></span></span><span> </span><span id="local-6989586621680195166"><span class="annot"><a href="#local-6989586621680195166"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.EvalRecord.html#TraversableRec"><span class="hs-identifier hs-type">TraversableRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195163"><span class="hs-identifier hs-type">rec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadUnliftIO</span></span><span> </span><span class="annot"><a href="#local-6989586621680195164"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadCatch</span></span><span> </span><span class="annot"><a href="#local-6989586621680195164"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Client</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Temporal.Bundle.html#WorkerConfigs"><span class="hs-identifier hs-type">WorkerConfigs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195165"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195163"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Temporal.Bundle.html#Workers"><span class="hs-identifier hs-type">Workers</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195165"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195163"><span class="hs-identifier hs-type">rec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195164"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195166"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680195164"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680195166"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-596"></span><span id="withTaskQueues"><span class="annot"><span class="annottext">withTaskQueues :: forall (rec :: (* -&gt; * -&gt; *) -&gt; *) (m :: * -&gt; *) env a.
(TraversableRec rec, MonadUnliftIO m, MonadCatch m) =&gt;
Client -&gt; WorkerConfigs env rec -&gt; (Workers env rec -&gt; m a) -&gt; m a
</span><a href="Temporal.Bundle.html#withTaskQueues"><span class="hs-identifier hs-var hs-var">withTaskQueues</span></a></span></span><span> </span><span id="local-6989586621680195663"><span class="annot"><span class="annottext">Client
</span><a href="#local-6989586621680195663"><span class="hs-identifier hs-var">client</span></a></span></span><span> </span><span id="local-6989586621680195664"><span class="annot"><span class="annottext">WorkerConfigs env rec
</span><a href="#local-6989586621680195664"><span class="hs-identifier hs-var">conf</span></a></span></span><span> </span><span id="local-6989586621680195665"><span class="annot"><span class="annottext">Workers env rec -&gt; m a
</span><a href="#local-6989586621680195665"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (Workers env rec)
-&gt; (Workers env rec -&gt; m (rec (ConstFn (Either SomeException ()))))
-&gt; (Workers env rec -&gt; m a)
-&gt; m a
forall (m :: * -&gt; *) a b c.
MonadUnliftIO m =&gt;
m a -&gt; (a -&gt; m b) -&gt; (a -&gt; m c) -&gt; m c
</span><span class="hs-identifier hs-var">UnliftIO.bracket</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Client -&gt; WorkerConfigs env rec -&gt; m (Workers env rec)
forall (rec :: (* -&gt; * -&gt; *) -&gt; *) (m :: * -&gt; *) env.
(TraversableRec rec, MonadUnliftIO m, MonadCatch m) =&gt;
Client -&gt; WorkerConfigs env rec -&gt; m (Workers env rec)
</span><a href="Temporal.Bundle.html#startTaskQueues"><span class="hs-identifier hs-var">startTaskQueues</span></a></span><span> </span><span class="annot"><span class="annottext">Client
</span><a href="#local-6989586621680195663"><span class="hs-identifier hs-var">client</span></a></span><span> </span><span class="annot"><span class="annottext">WorkerConfigs env rec
</span><a href="#local-6989586621680195664"><span class="hs-identifier hs-var">conf</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Workers env rec -&gt; m (rec (ConstFn (Either SomeException ())))
forall (m :: * -&gt; *) (rec :: (* -&gt; * -&gt; *) -&gt; *) env.
(TraversableRec rec, MonadUnliftIO m) =&gt;
Workers env rec -&gt; m (rec (ConstFn (Either SomeException ())))
</span><a href="Temporal.Bundle.html#shutdownTaskQueues"><span class="hs-identifier hs-var">shutdownTaskQueues</span></a></span><span> </span><span class="annot"><span class="annottext">((Workers env rec -&gt; m a) -&gt; m a)
-&gt; (Workers env rec -&gt; m a) -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680195667"><span class="annot"><span class="annottext">Workers env rec
</span><a href="#local-6989586621680195667"><span class="hs-identifier hs-var">ws</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Workers env rec -&gt; m ()
forall (m :: * -&gt; *) (rec :: (* -&gt; * -&gt; *) -&gt; *) env.
(TraversableRec rec, MonadUnliftIO m) =&gt;
Workers env rec -&gt; m ()
</span><a href="Temporal.Bundle.html#linkTaskQueues"><span class="hs-identifier hs-var">linkTaskQueues</span></a></span><span> </span><span class="annot"><span class="annottext">Workers env rec
</span><a href="#local-6989586621680195667"><span class="hs-identifier hs-var">ws</span></a></span><span> </span><span class="annot"><span class="annottext">m () -&gt; m a -&gt; m a
forall a b. m a -&gt; m b -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Workers env rec -&gt; m a
</span><a href="#local-6989586621680195665"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Workers env rec
</span><a href="#local-6989586621680195667"><span class="hs-identifier hs-var">ws</span></a></span><span>
</span><span id="line-597"></span></pre></body></html>